{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/i18n.ts"],"sourcesContent":["const translations: Record<string, Record<string, string>> = {\n  es: {\n    dashboard: 'Panel Principal',\n    home: 'Inicio',\n    workflows: 'Flujos de Trabajo',\n    repository: 'Repositorio',\n    chat: 'Chat',\n    analytics: 'Analíticas',\n    surveys: 'Encuestas',\n    profile: 'Perfil',\n    settings: 'Configuración',\n    logout: 'Cerrar Sesión',\n    admin: 'Administración',\n    users: 'Usuarios',\n    units: 'Unidades',\n    roles: 'Roles',\n    storage: 'Almacenamiento',\n    communications: 'Comunicaciones',\n    audit: 'Auditoría',\n    tenants: 'Organizaciones',\n    platform: 'Plataforma',\n\n    nav_operation: 'OPERACIÓN',\n    nav_governance: 'GOBERNANZA',\n    nav_management: 'GESTIÓN',\n    nav_platform: 'PLATAFORMA',\n    nav_dashboard: 'Inicio',\n    nav_chat: 'Chat',\n    nav_chat0: 'Chat',\n    nav_repository: 'Repositorio',\n    nav_workflows: 'Mis Flujos',\n    nav_analytics: 'Analíticas',\n    nav_surveys: 'Encuestas',\n    nav_admin: 'Administración',\n    nav_units: 'Unidades',\n    nav_roles: 'Roles',\n    nav_users: 'Usuarios',\n    nav_comms: 'Comunicaciones',\n    nav_unit: 'Mi Unidad',\n    nav_settings: 'Configuración',\n    nav_storage: 'Almacenamiento',\n    nav_audit: 'Auditoría',\n    nav_projects: 'Proyectos',\n    nav_requests: 'Solicitudes',\n\n    search: 'Buscar',\n    save: 'Guardar',\n    cancel: 'Cancelar',\n    delete: 'Eliminar',\n    edit: 'Editar',\n    create: 'Crear',\n    add: 'Agregar',\n    close: 'Cerrar',\n    confirm: 'Confirmar',\n    loading: 'Cargando...',\n    error: 'Error',\n    success: 'Éxito',\n    warning: 'Advertencia',\n    info: 'Información',\n    welcome: 'Bienvenido',\n    documents: 'Documentos',\n    projects: 'Proyectos',\n    activities: 'Actividades',\n    phases: 'Fases',\n    status: 'Estado',\n    active: 'Activo',\n    inactive: 'Inactivo',\n    pending: 'Pendiente',\n    completed: 'Completado',\n    archived: 'Archivado',\n    all: 'Todos',\n    filter: 'Filtrar',\n    sort: 'Ordenar',\n    export: 'Exportar',\n    import: 'Importar',\n    download: 'Descargar',\n    upload: 'Subir',\n    view: 'Ver',\n    details: 'Detalles',\n    description: 'Descripción',\n    name: 'Nombre',\n    email: 'Correo',\n    phone: 'Teléfono',\n    date: 'Fecha',\n    time: 'Hora',\n    type: 'Tipo',\n    category: 'Categoría',\n    tags: 'Etiquetas',\n    comments: 'Comentarios',\n    likes: 'Me gusta',\n    share: 'Compartir',\n    notifications: 'Notificaciones',\n    messages: 'Mensajes',\n    newMessage: 'Nuevo Mensaje',\n    send: 'Enviar',\n    reply: 'Responder',\n    forward: 'Reenviar',\n    attach: 'Adjuntar',\n    myUnit: 'Mi Unidad',\n    myTeam: 'Mi Equipo',\n    myProjects: 'Mis Proyectos',\n    myTasks: 'Mis Tareas',\n    recentActivity: 'Actividad Reciente',\n    quickActions: 'Acciones Rápidas',\n    overview: 'Resumen',\n    reports: 'Reportes',\n    help: 'Ayuda',\n    support: 'Soporte',\n    documentation: 'Documentación',\n    version: 'Versión',\n    language: 'Idioma',\n    theme: 'Tema',\n    dark: 'Oscuro',\n    light: 'Claro',\n    auto: 'Automático',\n\n    wf_title_requests: 'Solicitudes',\n    wf_title_projects: 'Proyectos',\n    wf_desc_requests: 'Gestiona las solicitudes de tu equipo',\n    wf_desc_projects: 'Organiza y da seguimiento a tus proyectos',\n    wf_new_request: 'Nueva Solicitud',\n    wf_new_project: 'Nuevo Proyecto',\n    wf_new_folder: 'Nueva Carpeta',\n    wf_import: 'Importar',\n\n    surveys_title: 'Encuestas',\n    surveys_desc: 'Crea y gestiona encuestas para tu organización',\n    surveys_create_btn: 'Nueva Encuesta',\n    surveys_tab_active: 'Activas',\n    surveys_tab_drafts: 'Borradores',\n    surveys_tab_closed: 'Cerradas',\n    surveys_cancel: 'Cancelar',\n    surveys_template_title: 'Crear desde Plantilla',\n    surveys_template_subtitle: 'Selecciona una plantilla para comenzar',\n\n    survey_yes: 'Sí',\n    survey_no: 'No',\n    survey_next_btn: 'Siguiente',\n    survey_prev_btn: 'Anterior',\n    survey_finish_btn: 'Finalizar',\n    survey_next_dim_btn: 'Siguiente Dimensión',\n    survey_dropdown_placeholder: 'Selecciona una opción',\n    survey_required: 'Requerido',\n    survey_respond_btn: 'Responder',\n    survey_view_results: 'Ver Resultados',\n    survey_completed: 'Completada',\n    survey_completed_btn: 'Completada',\n    survey_exit: 'Salir',\n    survey_saving: 'Guardando...',\n    survey_saved: 'Guardado',\n    survey_questions_count: 'preguntas',\n    survey_sections: 'secciones',\n    survey_page_info: 'Página',\n    survey_page_of: 'de',\n    survey_audience_global: 'Global',\n    survey_audience_unit: 'Por Unidad',\n    survey_global_progress: 'Progreso Global',\n    survey_empty_title: 'No hay encuestas',\n    survey_empty_create_first: 'Crea tu primera encuesta',\n    survey_thank_you_title: '¡Gracias!',\n    survey_thank_you_desc: 'Tu respuesta ha sido registrada',\n    survey_text_placeholder: 'Escribe tu respuesta aquí...',\n    survey_likert_agree: 'Totalmente de acuerdo',\n    survey_likert_disagree: 'Totalmente en desacuerdo',\n    survey_nps_likely: 'Muy probable',\n    survey_nps_unlikely: 'Muy improbable',\n\n    builder_tab_design: 'Diseño',\n    builder_tab_settings: 'Configuración',\n    builder_publish: 'Publicar',\n    builder_question_types: 'Tipos de Pregunta',\n    builder_new_question: 'Nueva Pregunta',\n    builder_no_questions: 'Sin preguntas',\n    builder_ph_title: 'Título de la encuesta',\n    builder_ph_desc: 'Descripción de la encuesta',\n    builder_q_ph: 'Escribe tu pregunta...',\n    builder_required: 'Requerida',\n    builder_delete_q: 'Eliminar',\n    builder_select_type: 'Selecciona tipo',\n    builder_add_option: 'Agregar opción',\n    builder_text_help: 'Texto de ayuda',\n    builder_settings_header: 'Configuración',\n    builder_audience_label: 'Audiencia',\n    builder_audience_global_btn: 'Global',\n    builder_audience_unit_btn: 'Por Unidad',\n    builder_type_free_text: 'Texto Libre',\n    builder_type_likert: 'Escala Likert',\n    builder_type_nps_full: 'NPS (0-10)',\n    builder_type_multi: 'Opción Múltiple',\n    builder_type_check: 'Casillas',\n    builder_type_yesno: 'Sí/No',\n    builder_type_rating: 'Calificación',\n    builder_type_dropdown: 'Desplegable',\n    builder_type_ranking: 'Ranking',\n    builder_type_date: 'Fecha',\n    builder_type_file: 'Archivo',\n\n    results_tab_general: 'General',\n    results_tab_dimensions: 'Dimensiones',\n    results_tab_analytics: 'Análisis',\n    results_tab_actions: 'Acciones',\n    results_aiq: 'AIQ',\n    results_aiq_desc: 'Índice de Agilidad',\n    results_dq: 'DQ',\n    results_dq_desc: 'Índice Digital',\n    results_benchmark_title: 'Benchmark',\n    results_benchmark_sector: 'Sector',\n    results_benchmark_expected: 'Esperado',\n\n    badge_high: 'Alto',\n    badge_medium: 'Medio',\n    badge_low: 'Bajo',\n\n    profile_title: 'Mi Perfil',\n    profile_tab_info: 'Información',\n    profile_tab_security: 'Seguridad',\n    profile_name: 'Nombre',\n    profile_bio: 'Biografía',\n    profile_phone: 'Teléfono',\n    profile_location: 'Ubicación',\n    profile_lang: 'Idioma',\n    profile_timezone: 'Zona Horaria',\n    profile_regional: 'Regional',\n    profile_level: 'Nivel',\n    profile_last_access: 'Último Acceso',\n    profile_today: 'Hoy',\n    profile_active: 'Activo',\n    profile_save_btn: 'Guardar Cambios',\n    profile_saved: 'Guardado',\n    profile_change_photo: 'Cambiar Foto',\n\n    security_password_title: 'Cambiar Contraseña',\n    security_current_pass: 'Contraseña Actual',\n    security_new_pass: 'Nueva Contraseña',\n    security_confirm_pass: 'Confirmar Contraseña',\n    security_change_btn: 'Cambiar Contraseña',\n    security_pass_mismatch: 'Las contraseñas no coinciden',\n    security_mfa_title: 'Autenticación de Dos Factores',\n    security_mfa_desc: 'Agrega una capa extra de seguridad',\n    security_mfa_enable: 'Habilitar 2FA',\n    security_activity_title: 'Actividad Reciente',\n    security_activity_desc: 'Historial de sesiones',\n\n    repo_upload_title: 'Subir Archivo',\n    repo_upload_btn: 'Subir',\n    repo_search_placeholder: 'Buscar documentos...',\n    repo_filter_type: 'Tipo',\n    repo_filter_favorites: 'Favoritos',\n    repo_filter_clear: 'Limpiar',\n    repo_empty_title: 'Sin documentos',\n    repo_empty_desc: 'Sube tu primer documento',\n    repo_tab_file: 'Archivo',\n    repo_tab_link: 'Enlace',\n    repo_tab_embed: 'Incrustado',\n\n    doc_viewer_comments: 'Comentarios',\n    doc_viewer_upload_new: 'Subir Nueva Versión'\n  },\n  en: {\n    dashboard: 'Dashboard',\n    home: 'Home',\n    workflows: 'Workflows',\n    repository: 'Repository',\n    chat: 'Chat',\n    analytics: 'Analytics',\n    surveys: 'Surveys',\n    profile: 'Profile',\n    settings: 'Settings',\n    logout: 'Logout',\n    admin: 'Admin',\n    users: 'Users',\n    units: 'Units',\n    roles: 'Roles',\n    storage: 'Storage',\n    communications: 'Communications',\n    audit: 'Audit',\n    tenants: 'Organizations',\n    platform: 'Platform',\n\n    nav_operation: 'OPERATION',\n    nav_governance: 'GOVERNANCE',\n    nav_management: 'MANAGEMENT',\n    nav_platform: 'PLATFORM',\n    nav_dashboard: 'Dashboard',\n    nav_chat: 'Chat',\n    nav_chat0: 'Chat',\n    nav_repository: 'Repository',\n    nav_workflows: 'My Workflows',\n    nav_analytics: 'Analytics',\n    nav_surveys: 'Surveys',\n    nav_admin: 'Admin',\n    nav_units: 'Units',\n    nav_roles: 'Roles',\n    nav_users: 'Users',\n    nav_comms: 'Communications',\n    nav_unit: 'My Unit',\n    nav_settings: 'Settings',\n    nav_storage: 'Storage',\n    nav_audit: 'Audit',\n    nav_projects: 'Projects',\n    nav_requests: 'Requests',\n\n    search: 'Search',\n    save: 'Save',\n    cancel: 'Cancel',\n    delete: 'Delete',\n    edit: 'Edit',\n    create: 'Create',\n    add: 'Add',\n    close: 'Close',\n    confirm: 'Confirm',\n    loading: 'Loading...',\n    error: 'Error',\n    success: 'Success',\n    warning: 'Warning',\n    info: 'Information',\n    welcome: 'Welcome',\n    documents: 'Documents',\n    projects: 'Projects',\n    activities: 'Activities',\n    phases: 'Phases',\n    status: 'Status',\n    active: 'Active',\n    inactive: 'Inactive',\n    pending: 'Pending',\n    completed: 'Completed',\n    archived: 'Archived',\n    all: 'All',\n    filter: 'Filter',\n    sort: 'Sort',\n    export: 'Export',\n    import: 'Import',\n    download: 'Download',\n    upload: 'Upload',\n    view: 'View',\n    details: 'Details',\n    description: 'Description',\n    name: 'Name',\n    email: 'Email',\n    phone: 'Phone',\n    date: 'Date',\n    time: 'Time',\n    type: 'Type',\n    category: 'Category',\n    tags: 'Tags',\n    comments: 'Comments',\n    likes: 'Likes',\n    share: 'Share',\n    notifications: 'Notifications',\n    messages: 'Messages',\n    newMessage: 'New Message',\n    send: 'Send',\n    reply: 'Reply',\n    forward: 'Forward',\n    attach: 'Attach',\n    myUnit: 'My Unit',\n    myTeam: 'My Team',\n    myProjects: 'My Projects',\n    myTasks: 'My Tasks',\n    recentActivity: 'Recent Activity',\n    quickActions: 'Quick Actions',\n    overview: 'Overview',\n    reports: 'Reports',\n    help: 'Help',\n    support: 'Support',\n    documentation: 'Documentation',\n    version: 'Version',\n    language: 'Language',\n    theme: 'Theme',\n    dark: 'Dark',\n    light: 'Light',\n    auto: 'Auto',\n\n    wf_title_requests: 'Requests',\n    wf_title_projects: 'Projects',\n    wf_desc_requests: 'Manage your team requests',\n    wf_desc_projects: 'Organize and track your projects',\n    wf_new_request: 'New Request',\n    wf_new_project: 'New Project',\n    wf_new_folder: 'New Folder',\n    wf_import: 'Import',\n\n    surveys_title: 'Surveys',\n    surveys_desc: 'Create and manage surveys for your organization',\n    surveys_create_btn: 'New Survey',\n    surveys_tab_active: 'Active',\n    surveys_tab_drafts: 'Drafts',\n    surveys_tab_closed: 'Closed',\n    surveys_cancel: 'Cancel',\n    surveys_template_title: 'Create from Template',\n    surveys_template_subtitle: 'Select a template to get started',\n\n    survey_yes: 'Yes',\n    survey_no: 'No',\n    survey_next_btn: 'Next',\n    survey_prev_btn: 'Previous',\n    survey_finish_btn: 'Finish',\n    survey_next_dim_btn: 'Next Dimension',\n    survey_dropdown_placeholder: 'Select an option',\n    survey_required: 'Required',\n    survey_respond_btn: 'Respond',\n    survey_view_results: 'View Results',\n    survey_completed: 'Completed',\n    survey_completed_btn: 'Completed',\n    survey_exit: 'Exit',\n    survey_saving: 'Saving...',\n    survey_saved: 'Saved',\n    survey_questions_count: 'questions',\n    survey_sections: 'sections',\n    survey_page_info: 'Page',\n    survey_page_of: 'of',\n    survey_audience_global: 'Global',\n    survey_audience_unit: 'By Unit',\n    survey_global_progress: 'Global Progress',\n    survey_empty_title: 'No surveys',\n    survey_empty_create_first: 'Create your first survey',\n    survey_thank_you_title: 'Thank you!',\n    survey_thank_you_desc: 'Your response has been recorded',\n    survey_text_placeholder: 'Write your answer here...',\n    survey_likert_agree: 'Strongly agree',\n    survey_likert_disagree: 'Strongly disagree',\n    survey_nps_likely: 'Very likely',\n    survey_nps_unlikely: 'Very unlikely',\n\n    builder_tab_design: 'Design',\n    builder_tab_settings: 'Settings',\n    builder_publish: 'Publish',\n    builder_question_types: 'Question Types',\n    builder_new_question: 'New Question',\n    builder_no_questions: 'No questions',\n    builder_ph_title: 'Survey title',\n    builder_ph_desc: 'Survey description',\n    builder_q_ph: 'Write your question...',\n    builder_required: 'Required',\n    builder_delete_q: 'Delete',\n    builder_select_type: 'Select type',\n    builder_add_option: 'Add option',\n    builder_text_help: 'Help text',\n    builder_settings_header: 'Settings',\n    builder_audience_label: 'Audience',\n    builder_audience_global_btn: 'Global',\n    builder_audience_unit_btn: 'By Unit',\n    builder_type_free_text: 'Free Text',\n    builder_type_likert: 'Likert Scale',\n    builder_type_nps_full: 'NPS (0-10)',\n    builder_type_multi: 'Multiple Choice',\n    builder_type_check: 'Checkboxes',\n    builder_type_yesno: 'Yes/No',\n    builder_type_rating: 'Rating',\n    builder_type_dropdown: 'Dropdown',\n    builder_type_ranking: 'Ranking',\n    builder_type_date: 'Date',\n    builder_type_file: 'File',\n\n    results_tab_general: 'General',\n    results_tab_dimensions: 'Dimensions',\n    results_tab_analytics: 'Analytics',\n    results_tab_actions: 'Actions',\n    results_aiq: 'AIQ',\n    results_aiq_desc: 'Agility Index',\n    results_dq: 'DQ',\n    results_dq_desc: 'Digital Index',\n    results_benchmark_title: 'Benchmark',\n    results_benchmark_sector: 'Sector',\n    results_benchmark_expected: 'Expected',\n\n    badge_high: 'High',\n    badge_medium: 'Medium',\n    badge_low: 'Low',\n\n    profile_title: 'My Profile',\n    profile_tab_info: 'Information',\n    profile_tab_security: 'Security',\n    profile_name: 'Name',\n    profile_bio: 'Bio',\n    profile_phone: 'Phone',\n    profile_location: 'Location',\n    profile_lang: 'Language',\n    profile_timezone: 'Timezone',\n    profile_regional: 'Regional',\n    profile_level: 'Level',\n    profile_last_access: 'Last Access',\n    profile_today: 'Today',\n    profile_active: 'Active',\n    profile_save_btn: 'Save Changes',\n    profile_saved: 'Saved',\n    profile_change_photo: 'Change Photo',\n\n    security_password_title: 'Change Password',\n    security_current_pass: 'Current Password',\n    security_new_pass: 'New Password',\n    security_confirm_pass: 'Confirm Password',\n    security_change_btn: 'Change Password',\n    security_pass_mismatch: 'Passwords do not match',\n    security_mfa_title: 'Two-Factor Authentication',\n    security_mfa_desc: 'Add an extra layer of security',\n    security_mfa_enable: 'Enable 2FA',\n    security_activity_title: 'Recent Activity',\n    security_activity_desc: 'Session history',\n\n    repo_upload_title: 'Upload File',\n    repo_upload_btn: 'Upload',\n    repo_search_placeholder: 'Search documents...',\n    repo_filter_type: 'Type',\n    repo_filter_favorites: 'Favorites',\n    repo_filter_clear: 'Clear',\n    repo_empty_title: 'No documents',\n    repo_empty_desc: 'Upload your first document',\n    repo_tab_file: 'File',\n    repo_tab_link: 'Link',\n    repo_tab_embed: 'Embed',\n\n    doc_viewer_comments: 'Comments',\n    doc_viewer_upload_new: 'Upload New Version'\n  }\n};\n\nexport function useTranslation(locale: string = 'es') {\n  const t = (key: string): string => {\n    return translations[locale]?.[key] || translations['es']?.[key] || key;\n  };\n\n  return { t, locale };\n}\n\nexport function getTranslation(key: string, locale: string = 'es'): string {\n  return translations[locale]?.[key] || translations['es']?.[key] || key;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 521, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/Sidebar.tsx"],"sourcesContent":["'use client';\nimport { useApp } from '@/context/AppContext';\nimport { useTranslation } from '@/lib/i18n';\nimport {\n    SquaresFour, Planet, Buildings, ShieldCheck, ChatCircleDots, Files,\n    GitPullRequest, Gear, UsersThree, TreeStructure, Megaphone, Kanban, ChartPieSlice,\n    ClipboardText, CaretLeft, CaretRight, Globe, CloudArrowUp, X\n} from '@phosphor-icons/react';\nimport { usePathname, useRouter } from 'next/navigation';\n\nexport default function Sidebar() {\n    const { currentUser, isSuperAdmin, currentTenant, isSidebarCollapsed, toggleSidebar, unreadChatCount, isMobileMenuOpen, closeMobileMenu } = useApp();\n    const { t } = useTranslation();\n    const router = useRouter();\n    const pathname = usePathname();\n\n    if (!currentUser) return null;\n\n    const handleNavigation = (path: string) => {\n        router.push(path);\n        closeMobileMenu();\n    };\n\n    const NavItem = ({ icon: Icon, label, path, badge }: { icon: any, label: string, path: string, badge?: number | string | boolean }) => {\n        const isActive = pathname === path;\n        return (\n            <button\n                id={`nav-item-${path.replace(/\\//g, '-')}`}\n                className={`nav-item ${isActive ? 'active' : ''} ${isSidebarCollapsed ? 'justify-center px-0' : ''}`}\n                onClick={() => handleNavigation(path)}\n                title={isSidebarCollapsed ? label : ''}\n            >\n                <Icon size={isSidebarCollapsed ? 22 : 18} weight={isActive ? 'bold' : 'regular'} />\n                {!isSidebarCollapsed && label}\n                {!isSidebarCollapsed && badge && badge !== 0 && <span className=\"nav-badge mx-2\">{badge}</span>}\n            </button>\n        );\n    };\n\n    return (\n        <>\n            {isMobileMenuOpen && (\n                <div \n                    className=\"fixed inset-0 bg-black/50 z-40 lg:hidden\" \n                    onClick={closeMobileMenu}\n                />\n            )}\n            <aside \n                id=\"sidebar\" \n                className={`\n                    ${isSuperAdmin ? 'super-mode' : ''} \n                    ${isSidebarCollapsed ? 'collapsed w-[80px]' : 'w-[260px]'} \n                    transition-all duration-300\n                    fixed lg:relative\n                    h-full\n                    z-50\n                    ${isMobileMenuOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}\n                `}\n            >\n                <div className={`brand flex items-center ${isSidebarCollapsed ? 'justify-center p-4' : 'justify-between p-5'}`}>\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"brand-logo flex-shrink-0\"><SquaresFour weight=\"bold\" /></div>\n                        {!isSidebarCollapsed && (\n                            <div className=\"animate-fadeIn\">\n                                <div style={{ fontWeight: 700, color: 'white', fontSize: '15px', letterSpacing: '-0.02em' }}>\n                                    {isSuperAdmin ? 'Antigravity DB' : (currentTenant?.branding?.app_title || 'Maturity360')}\n                                </div>\n                                <div style={{ fontSize: 10, opacity: 0.5, fontWeight: 600, textTransform: 'uppercase', letterSpacing: '0.05em' }} id=\"tenant-label\">\n                                    {isSuperAdmin ? 'Global View' : currentTenant?.name}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                        <button\n                            onClick={closeMobileMenu}\n                            className=\"text-white/40 hover:text-white transition-colors p-1.5 rounded-lg hover:bg-white/10 lg:hidden\"\n                            title=\"Cerrar Menú\"\n                        >\n                            <X size={18} weight=\"bold\" />\n                        </button>\n                        <button\n                            onClick={toggleSidebar}\n                            className={`text-white/40 hover:text-white transition-colors p-1.5 rounded-lg hover:bg-white/10 hidden lg:block ${isSidebarCollapsed ? 'hidden' : ''}`}\n                            title=\"Contraer Menú\"\n                        >\n                            <CaretLeft size={16} weight=\"bold\" />\n                        </button>\n                    </div>\n                </div>\n\n                {isSidebarCollapsed && (\n                    <div className=\"hidden lg:flex justify-center p-2 border-b border-white/5\">\n                        <button\n                            onClick={toggleSidebar}\n                            className=\"text-white/40 hover:text-white transition-colors p-2 rounded-xl hover:bg-white/10\"\n                            title=\"Expandir Menú\"\n                        >\n                            <CaretRight size={20} weight=\"bold\" />\n                        </button>\n                    </div>\n                )}\n\n                <nav className=\"nav\" id=\"nav-menu\">\n                    {isSuperAdmin ? (\n                        <>\n                            <div className=\"nav-header\">{t('nav_platform')}</div>\n                            <NavItem icon={Planet} label=\"Global Dashboard\" path=\"/dashboard\" />\n                            <NavItem icon={Buildings} label=\"Tenants\" path=\"/dashboard/tenants\" />\n                            <NavItem icon={UsersThree} label=\"Users & Permissions\" path=\"/dashboard/admin/users\" />\n                            <NavItem icon={Globe} label=\"Platform Params\" path=\"/dashboard/platform\" />\n                            <NavItem icon={ShieldCheck} label=\"Audit Global\" path=\"/dashboard/audit\" />\n                        </>\n                    ) : (\n                        <>\n                            <div className={`nav-header ${isSidebarCollapsed ? 'text-center opacity-30 text-[9px]' : ''}`}>\n                                {isSidebarCollapsed ? '•••' : t('nav_operation')}\n                            </div>\n\n                            {(currentTenant?.features?.includes('DASHBOARD') || !currentTenant) && (\n                                <NavItem icon={SquaresFour} label={t('nav_dashboard')} path=\"/dashboard\" />\n                            )}\n\n                            {currentTenant?.features?.includes('CHAT') && (\n                                <NavItem icon={ChatCircleDots} label={t('nav_chat')} path=\"/dashboard/chat\" badge={unreadChatCount} />\n                            )}\n                            {currentTenant?.features?.includes('REPOSITORY') && (\n                                <NavItem icon={Files} label={t('nav_repository')} path=\"/dashboard/repository\" />\n                            )}\n                            {currentTenant?.features?.includes('WORKFLOWS') && (\n                                <NavItem icon={Kanban} label={t('nav_workflows')} path=\"/dashboard/workflows\" />\n                            )}\n                            {currentTenant?.features?.includes('ANALYTICS') && (\n                                <NavItem icon={ChartPieSlice} label={t('nav_analytics')} path=\"/dashboard/analytics\" />\n                            )}\n                            {currentTenant?.features?.includes('SURVEYS') && (\n                                <NavItem icon={ClipboardText} label={t('nav_surveys')} path=\"/dashboard/surveys\" />\n                            )}\n\n                            {(currentUser.level <= 2) && (\n                                <>\n                                    <div className=\"nav-header\">{currentUser.level === 1 ? t('nav_governance') : t('nav_management')}</div>\n                                    {currentUser.level === 1 && (\n                                        <>\n                                            <NavItem icon={Gear} label={t('nav_admin')} path=\"/dashboard/admin\" />\n                                            <NavItem icon={TreeStructure} label={t('nav_units')} path=\"/dashboard/admin/units\" />\n                                            <NavItem icon={ShieldCheck} label={t('nav_roles')} path=\"/dashboard/admin/roles\" />\n                                            <NavItem icon={UsersThree} label={t('nav_users')} path=\"/dashboard/admin/users\" />\n                                            <NavItem icon={Megaphone} label={t('nav_comms')} path=\"/dashboard/admin/communications\" />\n                                            <NavItem icon={GitPullRequest} label=\"Configuración Técnica\" path=\"/dashboard/admin/settings\" />\n                                            <NavItem icon={CloudArrowUp} label=\"Almacenamiento\" path=\"/dashboard/admin/storage\" />\n                                            <NavItem icon={ChartPieSlice} label=\"Dashboard Storage\" path=\"/dashboard/admin/storage-dashboard\" />\n                                        </>\n                                    )}\n                                    <NavItem icon={UsersThree} label={t('nav_unit')} path=\"/dashboard/unit\" />\n                                </>\n                            )}\n\n                        </>\n                    )}\n                </nav>\n\n                <div className={`user-profile ${isSidebarCollapsed ? 'justify-center p-3' : ''}`} onClick={() => handleNavigation('/dashboard/profile')}>\n                    <div className=\"avatar\" id=\"u-avatar\">{currentUser.initials}</div>\n                    {!isSidebarCollapsed && (\n                        <div style={{ flex: 1, overflow: 'hidden' }} className=\"animate-fadeIn\">\n                            <div id=\"u-name\" style={{ fontWeight: 600, color: 'white' }}>{currentUser.name}</div>\n                            <div id=\"u-role\" style={{ fontSize: 11, opacity: 0.6 }}>{currentUser.role}</div>\n                        </div>\n                    )}\n                    {!isSidebarCollapsed && (\n                        <button className=\"btn btn-ghost\" style={{ color: 'white', padding: 4 }}>\n                            <Gear size={16} />\n                        </button>\n                    )}\n                </div>\n            </aside>\n        </>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1085, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/Topbar.tsx"],"sourcesContent":["'use client';\nimport { useApp } from '@/context/AppContext';\nimport { ChatCircleDots, Moon, SignOut, List } from '@phosphor-icons/react';\nimport { usePathname, useRouter } from 'next/navigation';\n\nexport default function Topbar() {\n    const { currentUser, isSuperAdmin, logout, toggleMobileMenu } = useApp();\n    const router = useRouter();\n    const pathname = usePathname();\n\n    const getTitle = () => {\n        if (pathname === '/dashboard') return isSuperAdmin ? 'GLOBAL DASHBOARD' : 'DASHBOARD';\n        if (pathname.includes('/analytics')) return 'ANALÍTICA';\n        if (pathname.includes('/repository')) return 'REPOSITORIO';\n        if (pathname.includes('/chat')) return 'MENSAJES';\n        if (pathname.includes('/cases')) return 'TRÁMITES';\n        if (pathname.includes('/workflows')) return 'FLUJOS';\n        if (pathname.includes('/surveys')) return 'ENCUESTAS';\n        if (pathname.includes('/admin')) return 'ADMINISTRACIÓN';\n        if (pathname.includes('/profile')) return 'MI PERFIL';\n        return 'DASHBOARD';\n    };\n\n    const toggleDark = () => {\n        document.body.classList.toggle('dark');\n    };\n\n    return (\n        <header className=\"topbar\">\n            <div className=\"flex items-center gap-3\">\n                <button \n                    className=\"btn btn-ghost lg:hidden p-2\" \n                    onClick={toggleMobileMenu}\n                    aria-label=\"Abrir menú\"\n                >\n                    <List size={24} weight=\"bold\" />\n                </button>\n                <h2 id=\"page-title\" className=\"text-base sm:text-lg font-semibold truncate\">{getTitle()}</h2>\n            </div>\n            <div className=\"flex items-center gap-2 sm:gap-4\">\n                {isSuperAdmin && <span className=\"badge bg-super hidden sm:inline-flex\">SUPER ADMIN</span>}\n                {!isSuperAdmin && currentUser?.level === 1 && <span className=\"badge bg-warning hidden sm:inline-flex\">ADMIN</span>}\n\n                <button className=\"btn btn-ghost p-2\" onClick={() => router.push('/dashboard/chat')}>\n                    <ChatCircleDots size={20} />\n                    <span className=\"nav-badge\" style={{ top: 8, right: 6, width: 8, height: 8, padding: 0, display: 'block' }}></span>\n                </button>\n\n                <button className=\"btn btn-ghost p-2 hidden sm:flex\" onClick={toggleDark}>\n                    <Moon size={20} />\n                </button>\n\n                <button className=\"btn btn-ghost p-2\" onClick={logout} title=\"Salir\">\n                    <SignOut size={20} />\n                </button>\n            </div>\n        </header>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;AAHA;;;;AAKe,SAAS;;IACpB,MAAM,EAAE,WAAW,EAAE,YAAY,EAAE,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,mIAAM;IACtE,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAE5B,MAAM,WAAW;QACb,IAAI,aAAa,cAAc,OAAO,eAAe,qBAAqB;QAC1E,IAAI,SAAS,QAAQ,CAAC,eAAe,OAAO;QAC5C,IAAI,SAAS,QAAQ,CAAC,gBAAgB,OAAO;QAC7C,IAAI,SAAS,QAAQ,CAAC,UAAU,OAAO;QACvC,IAAI,SAAS,QAAQ,CAAC,WAAW,OAAO;QACxC,IAAI,SAAS,QAAQ,CAAC,eAAe,OAAO;QAC5C,IAAI,SAAS,QAAQ,CAAC,aAAa,OAAO;QAC1C,IAAI,SAAS,QAAQ,CAAC,WAAW,OAAO;QACxC,IAAI,SAAS,QAAQ,CAAC,aAAa,OAAO;QAC1C,OAAO;IACX;IAEA,MAAM,aAAa;QACf,SAAS,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;IACnC;IAEA,qBACI,6LAAC;QAAO,WAAU;;0BACd,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBACG,WAAU;wBACV,SAAS;wBACT,cAAW;kCAEX,cAAA,6LAAC,oLAAI;4BAAC,MAAM;4BAAI,QAAO;;;;;;;;;;;kCAE3B,6LAAC;wBAAG,IAAG;wBAAa,WAAU;kCAA+C;;;;;;;;;;;;0BAEjF,6LAAC;gBAAI,WAAU;;oBACV,8BAAgB,6LAAC;wBAAK,WAAU;kCAAuC;;;;;;oBACvE,CAAC,gBAAgB,aAAa,UAAU,mBAAK,6LAAC;wBAAK,WAAU;kCAAyC;;;;;;kCAEvG,6LAAC;wBAAO,WAAU;wBAAoB,SAAS,IAAM,OAAO,IAAI,CAAC;;0CAC7D,6LAAC,wMAAc;gCAAC,MAAM;;;;;;0CACtB,6LAAC;gCAAK,WAAU;gCAAY,OAAO;oCAAE,KAAK;oCAAG,OAAO;oCAAG,OAAO;oCAAG,QAAQ;oCAAG,SAAS;oCAAG,SAAS;gCAAQ;;;;;;;;;;;;kCAG7G,6LAAC;wBAAO,WAAU;wBAAmC,SAAS;kCAC1D,cAAA,6LAAC,oLAAI;4BAAC,MAAM;;;;;;;;;;;kCAGhB,6LAAC;wBAAO,WAAU;wBAAoB,SAAS;wBAAQ,OAAM;kCACzD,cAAA,6LAAC,0LAAO;4BAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;AAKnC;GArDwB;;QAC4C,mIAAM;QACvD,kJAAS;QACP,oJAAW;;;KAHR"}},
    {"offset": {"line": 1272, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/SlideOver.tsx"],"sourcesContent":["'use client';\nimport { useUI } from '@/context/UIContext';\nimport { useApp } from '@/context/AppContext';\nimport { DB } from '@/lib/data';\nimport { X, PaperPlaneRight } from '@phosphor-icons/react';\nimport { useState, useEffect, KeyboardEvent } from 'react';\n\ntype ContextChatMessage = { text: string; type: string };\n\nexport default function SlideOver() {\n    const { isSlideOpen, slideType, slideData, closeSlide, openViewer } = useUI();\n    const { currentUser } = useApp();\n    const [activeTab, setActiveTab] = useState<'detail' | 'chat'>('detail');\n    const [chatMsgs, setChatMsgs] = useState<ContextChatMessage[]>([]);\n    const [chatInput, setChatInput] = useState('');\n    const [forceUpdate, setForceUpdate] = useState(0);\n\n    // Reset tab when opening\n    useEffect(() => {\n        if (isSlideOpen) {\n            setActiveTab('detail');\n            if (slideData && slideData.id) {\n                if (!DB.contextChats[slideData.id]) {\n                    DB.contextChats[slideData.id] = [{ text: `Sistema: Contexto ${slideType} creado`, type: 'system' }];\n                }\n                setChatMsgs(DB.contextChats[slideData.id]);\n            }\n        }\n    }, [isSlideOpen, slideData, slideType]);\n\n    const sendContextMessage = () => {\n        if (!chatInput.trim() || !slideData) return;\n\n        const newMsg: ContextChatMessage = { text: chatInput, type: 'self' }; // In real app, user ID\n        DB.contextChats[slideData.id].push(newMsg);\n        setChatMsgs([...DB.contextChats[slideData.id]]);\n        setChatInput('');\n    };\n\n    const handleKey = (e: KeyboardEvent) => {\n        if (e.key === 'Enter') sendContextMessage();\n    };\n\n    const renderDetail = () => {\n        if (!slideData) return null;\n        const { id, title } = slideData;\n\n        if (slideType === 'doc') {\n            const comments = DB.publicComments.filter(c => c.docId === id) || [];\n            return (\n                <div>\n                    <h2>{title}</h2>\n                    <button\n                        className=\"btn btn-primary\"\n                        style={{ width: '100%', margin: '10px 0' }}\n                        onClick={() => openViewer(title)}\n                    >\n                        Visualizar\n                    </button>\n                    <hr style={{ margin: '20px 0', border: 0, borderTop: '1px solid var(--border)' }} />\n                    <h4>Comentarios</h4>\n                    {comments.map((c, i) => (\n                        <div key={i} className=\"comment-item\" style={{ marginBottom: 10 }}>\n                            <strong>{c.authorName}</strong>: {c.content}\n                        </div>\n                    ))}\n                </div>\n            );\n        }\n\n        return (\n            <div>\n                <h2>{title}</h2>\n                <p>Detalle del contenido...</p>\n            </div>\n        );\n    };\n\n    return (\n        <>\n            <div\n                className=\"slide-overlay\"\n                style={{ display: isSlideOpen ? 'block' : 'none' }}\n                onClick={closeSlide}\n            ></div>\n\n            <div className={`slide-over ${isSlideOpen ? 'open' : ''}`} id=\"slide-panel\">\n                <div className=\"card-head\" style={{ background: 'white' }}>\n                    <h3 id=\"slide-title\" style={{ fontSize: 16 }}>\n                        {slideType === 'doc' ? 'Documento' : 'Trámite'}\n                    </h3>\n                    <button className=\"btn btn-ghost\" onClick={closeSlide}>\n                        <X size={20} />\n                    </button>\n                </div>\n\n                <div className=\"tabs\">\n                    <div\n                        className={`tab ${activeTab === 'detail' ? 'active' : ''}`}\n                        onClick={() => setActiveTab('detail')}\n                    >\n                        Info & Social\n                    </div>\n                    <div\n                        className={`tab ${activeTab === 'chat' ? 'active' : ''}`}\n                        onClick={() => setActiveTab('chat')}\n                    >\n                        Chat Privado <span className=\"badge bg-danger\" style={{ fontSize: 9 }}>Context</span>\n                    </div>\n                </div>\n\n                <div className=\"slide-content\" style={{ flex: 1, overflow: 'hidden', display: 'flex', flexDirection: 'column' }}>\n\n                    <div className=\"tab-pane\" style={{ display: activeTab === 'detail' ? 'block' : 'none', flex: 1, padding: 24, overflowY: 'auto' }}>\n                        {renderDetail()}\n                    </div>\n\n                    <div className=\"chat-pane\" style={{ display: activeTab === 'chat' ? 'flex' : 'none', flexDirection: 'column', height: '100%', padding: 0 }}>\n                        <div className=\"messages-area\" style={{ flex: 1, padding: 20 }}>\n                            {chatMsgs.map((m, i) => (\n                                <div key={i} className={`message ${m.type === 'system' ? 'msg-system' : 'msg-self'}`}>\n                                    {m.text}\n                                </div>\n                            ))}\n                        </div>\n                        <div className=\"chat-input\" style={{ padding: 12, borderTop: '1px solid var(--border)' }}>\n                            <input\n                                type=\"text\"\n                                value={chatInput}\n                                onChange={(e) => setChatInput(e.target.value)}\n                                placeholder=\"Escribe un mensaje...\"\n                                onKeyPress={handleKey}\n                            />\n                            <button className=\"btn btn-primary btn-icon\" onClick={sendContextMessage}>\n                                <PaperPlaneRight />\n                            </button>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1653, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/DocViewer.tsx"],"sourcesContent":["'use client';\nimport { useUI } from '@/context/UIContext';\n\nexport default function DocViewer() {\n    const { isViewerOpen, viewerTitle, closeViewer } = useUI();\n\n    return (\n        <div\n            className=\"doc-viewer-overlay\"\n            style={{ display: isViewerOpen ? 'flex' : 'none' }}\n        >\n            <div className=\"doc-viewer-window\">\n                <div className=\"doc-viewer-header\" style={{ background: '#1e293b', color: 'white', height: 50, display: 'flex', alignItems: 'center', justifyContent: 'space-between', padding: '0 20px' }}>\n                    <span style={{ fontWeight: 500 }}>{viewerTitle || 'Documento.pdf'}</span>\n                    <button className=\"btn btn-primary\" onClick={closeViewer}>Cerrar</button>\n                </div>\n                <div className=\"doc-viewer-body\" style={{ background: '#64748b', flex: 1, overflow: 'auto', display: 'flex', justifyContent: 'center', padding: 40 }}>\n                    <div className=\"sim-pdf-page\">\n                        <h1 style={{ textAlign: 'center' }}>{viewerTitle}</h1>\n                        <hr />\n                        <p>Vista previa simulada...</p>\n                        <p className=\"mt-4\">\n                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AADA;;AAGe,SAAS;;IACpB,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,IAAA,iIAAK;IAExD,qBACI,6LAAC;QACG,WAAU;QACV,OAAO;YAAE,SAAS,eAAe,SAAS;QAAO;kBAEjD,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC;oBAAI,WAAU;oBAAoB,OAAO;wBAAE,YAAY;wBAAW,OAAO;wBAAS,QAAQ;wBAAI,SAAS;wBAAQ,YAAY;wBAAU,gBAAgB;wBAAiB,SAAS;oBAAS;;sCACrL,6LAAC;4BAAK,OAAO;gCAAE,YAAY;4BAAI;sCAAI,eAAe;;;;;;sCAClD,6LAAC;4BAAO,WAAU;4BAAkB,SAAS;sCAAa;;;;;;;;;;;;8BAE9D,6LAAC;oBAAI,WAAU;oBAAkB,OAAO;wBAAE,YAAY;wBAAW,MAAM;wBAAG,UAAU;wBAAQ,SAAS;wBAAQ,gBAAgB;wBAAU,SAAS;oBAAG;8BAC/I,cAAA,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,OAAO;oCAAE,WAAW;gCAAS;0CAAI;;;;;;0CACrC,6LAAC;;;;;0CACD,6LAAC;0CAAE;;;;;;0CACH,6LAAC;gCAAE,WAAU;0CAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ5C;GA1BwB;;QAC+B,iIAAK;;;KADpC"}},
    {"offset": {"line": 1792, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/onboarding/UserTour.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { useApp } from '@/context/AppContext';\nimport { createPortal } from 'react-dom';\nimport { X, CaretRight, CaretLeft, Check } from '@phosphor-icons/react';\n\ninterface TourStep {\n    id: string;\n    title: string;\n    content: string;\n    targetId?: string; // If undefined, show centered modal\n    placement?: 'right' | 'left' | 'top' | 'bottom' | 'center';\n}\n\nexport default function UserTour() {\n    const { currentUser, isSuperAdmin, currentTenant } = useApp();\n    const [isVisible, setIsVisible] = useState(false);\n    const [currentStep, setCurrentStep] = useState(0);\n    const [targetRect, setTargetRect] = useState<DOMRect | null>(null);\n\n    // Initial Check\n    useEffect(() => {\n        if (!currentUser) return;\n        const tourKey = `tour_completed_${currentUser.id}_v3`; // v3 versioning\n        const hasCompleted = localStorage.getItem(tourKey);\n\n        if (!hasCompleted) {\n            // Small delay to ensure UI renders\n            const timer = setTimeout(() => {\n                setIsVisible(true);\n            }, 1000);\n            return () => clearTimeout(timer);\n        }\n    }, [currentUser]);\n\n    // Define Steps based on Role\n    const steps: TourStep[] = useMemo(() => {\n        const commonSteps: TourStep[] = [\n            {\n                id: 'welcome',\n                title: `Bienvenido a ${currentTenant?.name || 'la Plataforma'}`,\n                content: 'Te damos la bienvenida a tu nuevo espacio de trabajo. Acompáñanos en un breve recorrido para conocer las herramientas principales.',\n                placement: 'center'\n            }\n        ];\n\n        let roleSteps: TourStep[] = [];\n\n        if (isSuperAdmin) {\n            roleSteps = [\n                {\n                    id: 'nav-platform',\n                    title: 'Gestión Global',\n                    content: 'Aquí tienes acceso total a todos los Tenants, Usuarios y Configuraciones de la plataforma.',\n                    targetId: 'nav-item--dashboard', // Points to Dashboard/Global\n                    placement: 'right'\n                },\n                {\n                    id: 'nav-tenants',\n                    title: 'Tenants',\n                    content: 'Administra las organizaciones y sus suscripciones desde aquí.',\n                    targetId: 'nav-item--dashboard-tenants',\n                    placement: 'right'\n                },\n                {\n                    id: 'nav-users-global',\n                    title: 'Usuarios y Permisos',\n                    content: 'Control de acceso y roles a nivel global.',\n                    targetId: 'nav-item--dashboard-admin-users',\n                    placement: 'right'\n                }\n            ];\n        } else {\n            // --- Tenant User (Admin or Regular) ---\n\n            // 1. Dashboard (Always available if enabled or default)\n            if (currentTenant?.features?.includes('DASHBOARD')) {\n                roleSteps.push({\n                    id: 'nav-dashboard',\n                    title: 'Tu Panel de Control',\n                    content: 'Visualiza indicadores clave y el estado general de tu organización.',\n                    targetId: 'nav-item--dashboard',\n                    placement: 'right'\n                });\n            }\n\n            // 2. Chat\n            if (currentTenant?.features?.includes('CHAT')) {\n                roleSteps.push({\n                    id: 'nav-chat',\n                    title: 'Mensajería y Colaboración',\n                    content: 'Comunícate en tiempo real con tu equipo y crea grupos de trabajo.',\n                    targetId: 'nav-item--dashboard-chat',\n                    placement: 'right'\n                });\n            }\n\n            // 3. Repository\n            if (currentTenant?.features?.includes('REPOSITORY')) {\n                roleSteps.push({\n                    id: 'nav-repo',\n                    title: 'Repositorio Documental',\n                    content: 'Centraliza y gestiona todos los documentos importantes de tu organización.',\n                    targetId: 'nav-item--dashboard-repository',\n                    placement: 'right'\n                });\n            }\n\n            // 4. Workflows / Projects\n            if (currentTenant?.features?.includes('WORKFLOWS')) {\n                roleSteps.push({\n                    id: 'nav-workflows',\n                    title: 'Proyectos y Flujos',\n                    content: 'Organiza tus proyectos, tareas y entregables en un solo lugar.',\n                    targetId: 'nav-item--dashboard-workflows',\n                    placement: 'right'\n                });\n            }\n\n            // 5. Analytics\n            if (currentTenant?.features?.includes('ANALYTICS')) {\n                roleSteps.push({\n                    id: 'nav-analytics',\n                    title: 'Analítica Avanzada',\n                    content: 'Explora datos y reportes detallados para la toma de decisiones.',\n                    targetId: 'nav-item--dashboard-analytics',\n                    placement: 'right'\n                });\n            }\n\n            // 6. Surveys\n            if (currentTenant?.features?.includes('SURVEYS')) {\n                roleSteps.push({\n                    id: 'nav-surveys',\n                    title: 'Encuestas y Evaluaciones',\n                    content: 'Gestiona clima laboral, evaluaciones de madurez y formularios.',\n                    targetId: 'nav-item--dashboard-surveys',\n                    placement: 'right'\n                });\n            }\n\n            // 7. Admin / Manager Steps\n            if (currentUser?.level !== undefined && currentUser.level <= 2) {\n                roleSteps.push({\n                    id: 'nav-admin',\n                    title: 'Administración',\n                    content: 'Configura unidades, roles, usuarios y parámetros de tu Tenant.',\n                    targetId: 'nav-item--dashboard-admin',\n                    placement: 'right'\n                });\n            }\n\n            // 8. Department Management (Manager+)\n            if (currentUser?.level !== undefined && currentUser.level <= 2) {\n                roleSteps.push({\n                    id: 'nav-units',\n                    title: 'Estructura Organizacional',\n                    content: 'Define y gestiona las unidades y jerarquías de tu empresa.',\n                    targetId: 'nav-item--dashboard-admin-units',\n                    placement: 'right'\n                });\n            }\n        }\n\n        const finalSteps: TourStep[] = [\n            ...commonSteps,\n            ...roleSteps,\n            {\n                id: 'profile',\n                title: 'Tu Perfil',\n                content: 'Accede a tus preferencias personales, cambio de contraseña y cierre de sesión.',\n                targetId: 'u-avatar', // Assuming avatar has this ID or class\n                placement: 'top' // Usually at bottom sidebar\n            },\n            {\n                id: 'finish',\n                title: '¡Todo listo!',\n                content: 'Ya estás preparado para comenzar. Si tienes dudas, busca el icono de ayuda.',\n                placement: 'center' // Use explicit center placement\n            }\n        ];\n\n        return finalSteps;\n    }, [currentUser, isSuperAdmin, currentTenant]);\n\n    // Update Rect on Step Change\n    useEffect(() => {\n        if (!isVisible) return;\n\n        const step = steps[currentStep];\n        if (!step) return;\n\n        if (step.targetId) {\n            const el = document.getElementById(step.targetId);\n            if (el) {\n                setTargetRect(el.getBoundingClientRect());\n                // Scroll into view if needed\n                el.scrollIntoView({ behavior: 'smooth', block: 'center' });\n            } else {\n                // Determine fallback behavior if element not found. \n                // For now, let's just default to null rect -> render centered as fallback?\n                // Or try finding it again in a loop?\n                // Actually, if we can't find it, maybe skip?\n                console.warn(`Tour target ${step.targetId} not found, centering.`);\n                setTargetRect(null);\n            }\n        } else {\n            setTargetRect(null);\n        }\n    }, [currentStep, isVisible, steps]);\n\n    // Handle Resize\n    useEffect(() => {\n        const handleResize = () => {\n            const step = steps[currentStep];\n            if (step?.targetId) {\n                const el = document.getElementById(step.targetId);\n                if (el) setTargetRect(el.getBoundingClientRect());\n            }\n        };\n        window.addEventListener('resize', handleResize);\n        window.addEventListener('scroll', handleResize, true);\n        return () => {\n            window.removeEventListener('resize', handleResize);\n            window.removeEventListener('scroll', handleResize, true);\n        };\n    }, [currentStep, steps]);\n\n    const handleNext = () => {\n        if (currentStep < steps.length - 1) {\n            setCurrentStep(prev => prev + 1);\n        } else {\n            finishTour();\n        }\n    };\n\n    const handlePrev = () => {\n        if (currentStep > 0) {\n            setCurrentStep(prev => prev - 1);\n        }\n    };\n\n    const finishTour = () => {\n        if (currentUser) {\n            localStorage.setItem(`tour_completed_${currentUser.id}_v3`, 'true');\n        }\n        setIsVisible(false);\n    };\n\n    if (!isVisible) return null;\n\n    const step = steps[currentStep];\n    if (!step) return null;\n\n    // Helper for Popover Position\n    const getPopoverStyle = () => {\n        if (!targetRect || step.placement === 'center' || !step.targetId) {\n            return {\n                top: '50%',\n                left: '50%',\n                transform: 'translate(-50%, -50%)',\n                maxWidth: '450px',\n                width: '90%'\n            };\n        }\n\n        const gap = 16;\n        const styles: React.CSSProperties = { position: 'absolute', maxWidth: '350px' };\n\n        // Simple positioning logic\n        if (step.placement === 'right') {\n            styles.top = targetRect.top + (targetRect.height / 2) - 100; // Offset up slightly for balance\n            styles.left = targetRect.right + gap;\n        } else if (step.placement === 'bottom') {\n            styles.top = targetRect.bottom + gap;\n            styles.left = targetRect.left + (targetRect.width / 2) - 175;\n        } else if (step.placement === 'top') { // Sidebar profile is at bottom\n            styles.bottom = window.innerHeight - targetRect.top + gap;\n            styles.left = targetRect.left;\n        }\n\n        // Boundary checks would be good here but keeping simple\n        return styles;\n    };\n\n    return createPortal(\n        <div className=\"fixed inset-0 z-[9999] overflow-hidden\">\n            {/* 1. Backdrop with Hole (Box Shadow Method) */}\n            {/* If target exists, we draw a huge shadow around a transparent div placed over the target */}\n            {targetRect && step.placement !== 'center' ? (\n                <div\n                    className=\"absolute bg-transparent transition-all duration-500 ease-in-out box-content border-4 border-blue-500/50 rounded-lg\"\n                    style={{\n                        top: targetRect.top - 4,\n                        left: targetRect.left - 4,\n                        width: targetRect.width,\n                        height: targetRect.height,\n                        boxShadow: '0 0 0 9999px rgba(0, 0, 0, 0.75)'\n                    }}\n                >\n                    {/* Optional Pulse Effect */}\n                    <div className=\"absolute inset-0 rounded-lg animate-ping bg-blue-500/30\"></div>\n                </div>\n            ) : (\n                // Full Backdrop for Center Modal\n                <div className=\"absolute inset-0 bg-black/75 backdrop-blur-sm transition-opacity duration-500\"></div>\n            )}\n\n            {/* 2. Popover Content */}\n            <div\n                className=\"absolute z-[10000] bg-white rounded-2xl shadow-2xl overflow-hidden transition-all duration-500 ease-out border border-white/20\"\n                style={getPopoverStyle() as any}\n            >\n                {/* Header Graphic for Welcome */}\n                {step.placement === 'center' && currentStep === 0 && (\n                    <div className=\"h-32 bg-gradient-to-r from-blue-600 to-indigo-600 flex items-center justify-center relative overflow-hidden\">\n                        <div className=\"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20\"></div>\n                        <div className=\"text-6xl text-white opacity-20 absolute -bottom-4 -right-4 rotate-12\">👋</div>\n                    </div>\n                )}\n\n                <div className=\"p-6\">\n                    <div className=\"flex justify-between items-start mb-4\">\n                        <h3 className=\"text-xl font-bold text-slate-800 leading-tight\">\n                            {currentStep + 1}. {step.title}\n                        </h3>\n                        <button onClick={finishTour} className=\"text-slate-400 hover:text-slate-600 transition-colors\">\n                            <X size={20} />\n                        </button>\n                    </div>\n\n                    <p className=\"text-slate-600 mb-8 leading-relaxed text-sm\">\n                        {step.content}\n                    </p>\n\n                    <div className=\"flex justify-between items-center pt-4 border-t border-slate-100 mt-auto\">\n                        <div className=\"flex gap-1\">\n                            {steps.map((_, i) => (\n                                <div key={i} className={`h-1.5 rounded-full transition-all duration-300 ${i === currentStep ? 'w-6 bg-blue-600' : 'w-1.5 bg-slate-200'}`}></div>\n                            ))}\n                        </div>\n\n                        <div className=\"flex gap-3\">\n                            {currentStep > 0 && (\n                                <button\n                                    onClick={handlePrev}\n                                    className=\"px-4 py-2 text-slate-500 font-bold text-sm hover:text-slate-800 transition-colors\"\n                                >\n                                    Atrás\n                                </button>\n                            )}\n                            <button\n                                onClick={handleNext}\n                                className=\"px-5 py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 hover:shadow-lg hover:shadow-blue-500/30 transition-all flex items-center gap-2\"\n                            >\n                                {currentStep === steps.length - 1 ? 'Finalizar' : 'Siguiente'}\n                                {currentStep === steps.length - 1 ? <Check weight=\"bold\" /> : <CaretRight weight=\"bold\" />}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>,\n        document.body\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2293, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/dashboard/layout.tsx"],"sourcesContent":["'use client';\nimport Sidebar from '@/components/Sidebar';\nimport Topbar from '@/components/Topbar';\nimport SlideOver from '@/components/SlideOver';\nimport DocViewer from '@/components/DocViewer';\nimport { useApp } from '@/context/AppContext';\nimport { useRouter } from 'next/navigation';\nimport { useEffect } from 'react';\nimport { Warning } from '@phosphor-icons/react';\nimport UserTour from '@/components/onboarding/UserTour';\n\nexport default function DashboardLayout({\n    children,\n}: {\n    children: React.ReactNode;\n}) {\n    const { currentUser, originalSession, stopImpersonation, updateUser } = useApp();\n    const router = useRouter();\n\n    useEffect(() => {\n        // Basic protection - if not logged in, go to home\n        // In a real app we'd wait for loading state, but here currentUser is sync after login\n        // However, on refresh, currentUser is wiped because it's in-memory.\n        // For this prototype, we'll redirect if null.\n        if (!currentUser) router.push('/');\n    }, [currentUser, router]);\n\n    if (!currentUser) return null;\n\n    return (\n        <div className=\"flex flex-col h-screen overflow-hidden\">\n            {originalSession && (\n                <div className=\"bg-amber-400 text-amber-900 px-4 py-2 text-xs font-bold flex items-center justify-between shadow-sm z-[100]\">\n                    <div className=\"flex items-center gap-2\">\n                        <Warning weight=\"fill\" size={18} />\n                        <span className=\"uppercase tracking-wide\">Support Mode: Impersonating {currentUser.name}</span>\n                    </div>\n                    <button onClick={stopImpersonation} className=\"bg-white/20 hover:bg-white/40 px-3 py-1 rounded text-[10px] uppercase font-bold transition-colors flex items-center gap-1\">\n                        Exit Support\n                    </button>\n                </div>\n            )}\n            <div className=\"flex flex-1 overflow-hidden\">\n                <Sidebar />\n                <main className=\"flex-1 flex flex-col overflow-hidden relative w-full lg:w-auto\">\n                    <Topbar />\n                    <div className=\"content\">\n                        {children}\n                    </div>\n                </main>\n                <SlideOver />\n                <DocViewer />\n            </div>\n            <UserTour />\n\n            {/* Force Password Change */}\n            {currentUser.mustChangePassword && !originalSession && (\n                <div className=\"fixed inset-0 bg-slate-900/90 z-[200] flex items-center justify-center p-4 backdrop-blur-sm\">\n                    <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden p-8 text-center\">\n                        <div className=\"w-16 h-16 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                            <Warning size={32} weight=\"fill\" />\n                        </div>\n                        <h2 className=\"text-2xl font-bold text-slate-800 mb-2\">Security Update Required</h2>\n                        <p className=\"text-slate-600 mb-6\">For your security, you must update your password before proceeding.</p>\n\n                        <form onSubmit={(e) => {\n                            e.preventDefault();\n                            updateUser({ mustChangePassword: false });\n                            alert('Password updated successfully.');\n                        }} className=\"space-y-4 text-left\">\n                            <div>\n                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">New Password</label>\n                                <input type=\"password\" required className=\"w-full px-4 py-2 border rounded-lg\" placeholder=\"••••••••\" />\n                            </div>\n                            <div>\n                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">Confirm Password</label>\n                                <input type=\"password\" required className=\"w-full px-4 py-2 border rounded-lg\" placeholder=\"••••••••\" />\n                            </div>\n                            <button className=\"btn btn-primary w-full justify-center\">Update Password</button>\n                        </form>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AATA;;;;;;;;;;AAWe,SAAS,gBAAgB,EACpC,QAAQ,EAGX;;IACG,MAAM,EAAE,WAAW,EAAE,eAAe,EAAE,iBAAiB,EAAE,UAAU,EAAE,GAAG,IAAA,mIAAM;IAC9E,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;qCAAC;YACN,kDAAkD;YAClD,sFAAsF;YACtF,oEAAoE;YACpE,8CAA8C;YAC9C,IAAI,CAAC,aAAa,OAAO,IAAI,CAAC;QAClC;oCAAG;QAAC;QAAa;KAAO;IAExB,IAAI,CAAC,aAAa,OAAO;IAEzB,qBACI,6LAAC;QAAI,WAAU;;YACV,iCACG,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,0LAAO;gCAAC,QAAO;gCAAO,MAAM;;;;;;0CAC7B,6LAAC;gCAAK,WAAU;;oCAA0B;oCAA6B,YAAY,IAAI;;;;;;;;;;;;;kCAE3F,6LAAC;wBAAO,SAAS;wBAAmB,WAAU;kCAA4H;;;;;;;;;;;;0BAKlL,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,oIAAO;;;;;kCACR,6LAAC;wBAAK,WAAU;;0CACZ,6LAAC,mIAAM;;;;;0CACP,6LAAC;gCAAI,WAAU;0CACV;;;;;;;;;;;;kCAGT,6LAAC,sIAAS;;;;;kCACV,6LAAC,sIAAS;;;;;;;;;;;0BAEd,6LAAC,mJAAQ;;;;;YAGR,YAAY,kBAAkB,IAAI,CAAC,iCAChC,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC,0LAAO;gCAAC,MAAM;gCAAI,QAAO;;;;;;;;;;;sCAE9B,6LAAC;4BAAG,WAAU;sCAAyC;;;;;;sCACvD,6LAAC;4BAAE,WAAU;sCAAsB;;;;;;sCAEnC,6LAAC;4BAAK,UAAU,CAAC;gCACb,EAAE,cAAc;gCAChB,WAAW;oCAAE,oBAAoB;gCAAM;gCACvC,MAAM;4BACV;4BAAG,WAAU;;8CACT,6LAAC;;sDACG,6LAAC;4CAAM,WAAU;sDAA8C;;;;;;sDAC/D,6LAAC;4CAAM,MAAK;4CAAW,QAAQ;4CAAC,WAAU;4CAAqC,aAAY;;;;;;;;;;;;8CAE/F,6LAAC;;sDACG,6LAAC;4CAAM,WAAU;sDAA8C;;;;;;sDAC/D,6LAAC;4CAAM,MAAK;4CAAW,QAAQ;4CAAC,WAAU;4CAAqC,aAAY;;;;;;;;;;;;8CAE/F,6LAAC;oCAAO,WAAU;8CAAwC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOtF;GA1EwB;;QAKoD,mIAAM;QAC/D,kJAAS;;;KANJ"}}]
}