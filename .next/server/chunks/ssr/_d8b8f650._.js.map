{"version":3,"sources":["../../../../node_modules/%40phosphor-icons/react/dist/csr/MagnifyingGlass.es.js","../../../../node_modules/%40phosphor-icons/react/dist/defs/MagnifyingGlass.es.js","../../../../app/admin/support/page.tsx"],"sourcesContent":["import * as a from \"react\";\nimport i from \"../lib/IconBase.es.js\";\nimport e from \"../defs/MagnifyingGlass.es.js\";\nconst o = a.forwardRef((s, n) => /* @__PURE__ */ a.createElement(i, { ref: n, ...s, weights: e }));\no.displayName = \"MagnifyingGlassIcon\";\nconst f = o;\nexport {\n  f as MagnifyingGlass,\n  o as MagnifyingGlassIcon\n};\n","import * as e from \"react\";\nconst a = /* @__PURE__ */ new Map([\n  [\n    \"bold\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M232.49,215.51,185,168a92.12,92.12,0,1,0-17,17l47.53,47.54a12,12,0,0,0,17-17ZM44,112a68,68,0,1,1,68,68A68.07,68.07,0,0,1,44,112Z\" }))\n  ],\n  [\n    \"duotone\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M192,112a80,80,0,1,1-80-80A80,80,0,0,1,192,112Z\", opacity: \"0.2\" }), /* @__PURE__ */ e.createElement(\"path\", { d: \"M229.66,218.34,179.6,168.28a88.21,88.21,0,1,0-11.32,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z\" }))\n  ],\n  [\n    \"fill\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M168,112a56,56,0,1,1-56-56A56,56,0,0,1,168,112Zm61.66,117.66a8,8,0,0,1-11.32,0l-50.06-50.07a88,88,0,1,1,11.32-11.31l50.06,50.06A8,8,0,0,1,229.66,229.66ZM112,184a72,72,0,1,0-72-72A72.08,72.08,0,0,0,112,184Z\" }))\n  ],\n  [\n    \"light\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M228.24,219.76l-51.38-51.38a86.15,86.15,0,1,0-8.48,8.48l51.38,51.38a6,6,0,0,0,8.48-8.48ZM38,112a74,74,0,1,1,74,74A74.09,74.09,0,0,1,38,112Z\" }))\n  ],\n  [\n    \"regular\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z\" }))\n  ],\n  [\n    \"thin\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M226.83,221.17l-52.7-52.7a84.1,84.1,0,1,0-5.66,5.66l52.7,52.7a4,4,0,0,0,5.66-5.66ZM36,112a76,76,0,1,1,76,76A76.08,76.08,0,0,1,36,112Z\" }))\n  ]\n]);\nexport {\n  a as default\n};\n","'use client';\nimport { useApp } from '@/context/AppContext';\nimport { DB, User } from '@/lib/data';\nimport { MagnifyingGlass, UserSwitch, CaretRight } from '@phosphor-icons/react';\nimport { useState, useMemo } from 'react';\n\nexport default function SupportPage() {\n    const { impersonateUser } = useApp();\n    const [search, setSearch] = useState('');\n    const [selectedUser, setSelectedUser] = useState<User | null>(null);\n    const [reason, setReason] = useState('');\n\n    const results = useMemo(() => {\n        if (!search || search.length < 2) return [];\n        const term = search.toLowerCase();\n        return DB.users.filter(u =>\n            u.name.toLowerCase().includes(term) ||\n            (u.email && u.email.toLowerCase().includes(term)) ||\n            u.id.toLowerCase().includes(term)\n        ).slice(0, 20); // Limit results\n    }, [search]);\n\n    const handleImpersonate = () => {\n        if (selectedUser && reason) {\n            impersonateUser(selectedUser.id, selectedUser.tenantId);\n        }\n    };\n\n    return (\n        <div className=\"p-8 max-w-5xl mx-auto\">\n            <header className=\"mb-8\">\n                <h1 className=\"text-2xl font-bold text-slate-900\">Support Helper</h1>\n                <p className=\"text-slate-500\">Find users and access their accounts securely to troubleshoot issues.</p>\n            </header>\n\n            {/* Search */}\n            <div className=\"bg-white p-6 rounded-xl border border-slate-200 shadow-sm mb-8\">\n                <label className=\"block text-sm font-bold text-slate-700 mb-2\">Find User</label>\n                <div className=\"relative\">\n                    <MagnifyingGlass className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400\" size={24} />\n                    <input\n                        className=\"w-full pl-12 pr-4 py-3 border border-slate-200 rounded-lg text-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all outline-none\"\n                        placeholder=\"Search by name, email, or user ID...\"\n                        value={search}\n                        onChange={e => setSearch(e.target.value)}\n                        autoFocus\n                    />\n                </div>\n                <div className=\"mt-2 text-xs text-slate-400 pl-1\">\n                    Showing top 20 matches.\n                </div>\n            </div>\n\n            {/* Results */}\n            <div className=\"space-y-4\">\n                {results.map(user => {\n                    const tenant = DB.tenants.find(t => t.id === user.tenantId);\n                    return (\n                        <div key={user.id} className=\"bg-white p-4 rounded-xl border border-slate-200 flex items-center justify-between hover:shadow-md transition-shadow\">\n                            <div className=\"flex items-center gap-4\">\n                                <div className=\"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center text-lg font-bold text-slate-500\">\n                                    {user.initials}\n                                </div>\n                                <div>\n                                    <div className=\"font-bold text-slate-900\">{user.name}</div>\n                                    <div className=\"text-sm text-slate-500 flex items-center gap-2\">\n                                        <span className=\"font-mono bg-slate-100 px-1 rounded\">{user.email || 'No Email'}</span>\n                                        <span>•</span>\n                                        <span className=\"text-indigo-600 font-medium\">{tenant?.name || user.tenantId}</span>\n                                        <span>•</span>\n                                        <span className=\"capitalize\">{user.role}</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <button\n                                onClick={() => setSelectedUser(user)}\n                                className=\"bg-indigo-50 text-indigo-700 hover:bg-indigo-100 px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors\"\n                            >\n                                <UserSwitch size={20} /> Access\n                            </button>\n                        </div>\n                    );\n                })}\n\n                {results.length === 0 && search.length >= 2 && (\n                    <div className=\"text-center py-12 text-slate-400 bg-slate-50 rounded-xl border border-dashed border-slate-200\">\n                        No users found matching \"{search}\".\n                    </div>\n                )}\n            </div>\n\n            {/* Impersonation Warning Modal */}\n            {selectedUser && (\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn\">\n                    <div className=\"bg-white max-w-md w-full rounded-2xl shadow-2xl overflow-hidden animate-scaleIn\">\n                        <div className=\"bg-amber-400 p-4 flex items-center justify-center\">\n                            <UserSwitch size={48} className=\"text-amber-900 opacity-50\" />\n                        </div>\n                        <div className=\"p-8\">\n                            <h2 className=\"text-xl font-bold text-slate-900 mb-2 text-center\">Confirm Access</h2>\n                            <p className=\"text-sm text-slate-600 text-center mb-6\">\n                                You are about to log in as <strong>{selectedUser.name}</strong>.\n                                <br />All actions performed will be audited.\n                            </p>\n\n                            <div className=\"mb-6\">\n                                <label className=\"block text-xs font-bold text-slate-500 uppercase mb-1\">Reason for Access (Required)</label>\n                                <textarea\n                                    className=\"w-full border border-slate-200 rounded-lg p-3 text-sm focus:border-indigo-500 outline-none\"\n                                    rows={3}\n                                    placeholder=\"e.g. Ticket #1024 - Unable to upload file\"\n                                    value={reason}\n                                    onChange={e => setReason(e.target.value)}\n                                />\n                            </div>\n\n                            <div className=\"flex gap-3\">\n                                <button\n                                    onClick={() => { setSelectedUser(null); setReason(''); }}\n                                    className=\"flex-1 py-3 font-bold text-slate-500 hover:bg-slate-50 rounded-xl\"\n                                >\n                                    Cancel\n                                </button>\n                                <button\n                                    onClick={handleImpersonate}\n                                    disabled={!reason.trim()}\n                                    className=\"flex-1 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-indigo-500/20\"\n                                >\n                                    Start Session\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    )\n}\n"],"names":[],"mappings":"uCAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCAA,IAAM,EAAoB,EAAhB,EAAoB,IAAI,CAChC,CACE,KAFmB,EAGH,EAAA,aAAe,CAAC,EAAA,QAAU,CAAE,KAAsB,CAAhB,CAAgB,YAAH,CAAkB,CAAC,OAAQ,CAAE,EAAG,kIAAmI,IACnO,CACD,CACE,UACgB,EAAA,aAAe,CAAC,EAAA,QAAU,CAAE,KAAsB,CAAhB,CAAgB,YAAH,CAAkB,CAAC,OAAQ,CAAE,EAAG,kDAAmD,QAAS,KAAM,GAAoB,CAAhB,CAAgB,YAAH,CAAkB,CAAC,OAAQ,CAAE,EAAG,iJAAkJ,IACrW,CACD,CACE,OACgB,EAAA,aAAe,CAAC,EAAA,QAAU,CAAE,KAAsB,CAAhB,CAAgB,YAAH,CAAkB,CAAC,OAAQ,CAAE,EAAG,+MAAgN,IAChT,CACD,CACE,QACgB,EAAA,aAAe,CAAC,EAAA,QAAU,CAAE,KAAsB,CAAhB,CAAgB,YAAH,CAAkB,CAAC,OAAQ,CAAE,EAAG,6IAA8I,IAC9O,CACD,CACE,UACgB,EAAA,aAAe,CAAC,EAAA,QAAU,CAAE,KAAsB,CAAhB,CAAgB,YAAH,CAAkB,CAAC,OAAQ,CAAE,EAAG,iJAAkJ,IAClP,CACD,CACE,OACgB,EAAA,aAAe,CAAC,EAAA,QAAU,CAAE,KAAsB,CAAhB,CAAgB,YAAH,CAAkB,CAAC,OAAQ,CAAE,EAAG,uIAAwI,IACxO,CACF,EDvBK,EAAI,EAAA,UAAY,CAAC,CAAC,EAAG,IAAsB,AAAhB,EAAgB,WAAH,EAAkB,CAAC,EAAA,OAAC,CAAE,CAAE,IAAK,EAAG,GAAG,CAAC,CAAE,QAAS,CAAE,IAC/F,EAAE,WAAW,CAAG,iDACN,mDEJV,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACpB,GAAM,CAAE,iBAAe,CAAE,CAAG,CAAA,EAAA,EAAA,MAAA,AAAM,IAC5B,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/B,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MACxD,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAE/B,EAAU,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KACpB,GAAI,CAAC,GAAU,EAAO,MAAM,CAAG,EAAG,MAAO,EAAE,CAC3C,IAAM,EAAO,EAAO,WAAW,GAC/B,OAAO,EAAA,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,GACnB,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,IAC7B,EAAE,KAAK,EAAI,EAAE,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,IAC3C,EAAE,EAAE,CAAC,WAAW,GAAG,QAAQ,CAAC,IAC9B,KAAK,CAAC,EAAG,GACf,EAAG,AADiB,CAChB,EAAO,EAQX,MACI,CAAA,EAAA,EAVgC,AAUhC,IAAA,EAAC,MAAA,CAAI,UAAU,kCACX,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,iBACd,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6CAAoC,mBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,0BAAiB,6EAIlC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2EACX,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,uDAA8C,cAC/D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAU,0DAA0D,KAAM,KAC3F,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,UAAU,8JACV,YAAY,uCACZ,MAAO,EACP,SAAU,GAAK,EAAU,EAAE,MAAM,CAAC,KAAK,EACvC,SAAS,CAAA,CAAA,OAGjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CAAmC,+BAMtD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACV,EAAQ,GAAG,CAAC,IACT,IAAM,EAAS,EAAA,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,EAAK,QAAQ,EAC1D,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAkB,UAAU,gIACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iHACV,EAAK,QAAQ,GAElB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oCAA4B,EAAK,IAAI,GACpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2DACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+CAAuC,EAAK,KAAK,EAAI,aACrE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,MACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uCAA+B,GAAQ,MAAQ,EAAK,QAAQ,GAC5E,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,MACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAc,EAAK,IAAI,YAInD,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,IAAM,EAAgB,GAC/B,UAAU,8IAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,KAAM,KAAM,eApBtB,EAAK,EAAE,CAwBzB,GAEC,AAAmB,MAAX,MAAM,EAAU,EAAO,MAAM,EAAI,GACtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0GAAgG,4BACjF,EAAO,WAM5C,GACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+GACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4FACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6DACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,KAAM,GAAI,UAAU,gCAEpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6DAAoD,mBAClE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,oDAA0C,8BACxB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAQ,EAAa,IAAI,GAAU,IAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAA,GAAK,4CAGV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACX,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,iEAAwD,iCACzE,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACG,UAAU,6FACV,KAAM,EACN,YAAY,4CACZ,MAAO,EACP,SAAU,GAAK,EAAU,EAAE,MAAM,CAAC,KAAK,OAI/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,KAAQ,EAAgB,MAAO,EAAU,GAAK,EACvD,UAAU,6EACb,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAtGN,CAsGe,IArGjC,GAAgB,GAChB,EAAgB,EAAa,CADL,CACO,CAAE,EAAa,QAAQ,CAE9D,EAmGgC,SAAU,CAAC,EAAO,IAAI,GACtB,UAAU,wKACb,+BAUjC","ignoreList":[0,1]}