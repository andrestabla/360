module.exports=[4615,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(98263),e=a.i(78134),f=a.i(82665);let g=[{id:"dim-procesos",name:"Procesos",description:"Evaluacion de la madurez en gestion de procesos organizacionales",weight:.25,weightAIQ:.2},{id:"dim-personas",name:"Personas",description:"Evaluacion de la madurez en gestion del talento humano",weight:.2,weightAIQ:.15},{id:"dim-tecnologia",name:"Tecnologia",description:"Evaluacion de la madurez en adopcion y uso de tecnologia",weight:.2,weightAIQ:.25},{id:"dim-estrategia",name:"Estrategia",description:"Evaluacion de la madurez en planificacion estrategica",weight:.2,weightAIQ:.25},{id:"dim-cultura",name:"Cultura",description:"Evaluacion de la madurez en cultura organizacional",weight:.15,weightAIQ:.15}],h=[{id:"q-proc-1",dimensionId:"dim-procesos",text:"Los procesos criticos de la organizacion estan documentados y actualizados?",type:"scale",weight:1},{id:"q-proc-2",dimensionId:"dim-procesos",text:"Existen indicadores de gestion para medir el desempeno de los procesos?",type:"scale",weight:1},{id:"q-proc-3",dimensionId:"dim-procesos",text:"Se realizan revisiones periodicas de los procesos para mejora continua?",type:"scale",weight:.8},{id:"q-pers-1",dimensionId:"dim-personas",text:"Los roles y responsabilidades estan claramente definidos?",type:"scale",weight:1},{id:"q-pers-2",dimensionId:"dim-personas",text:"Existe un programa de capacitacion y desarrollo para el personal?",type:"scale",weight:.9},{id:"q-pers-3",dimensionId:"dim-personas",text:"Se realizan evaluaciones de desempeno periodicas?",type:"boolean",weight:.8},{id:"q-tech-1",dimensionId:"dim-tecnologia",text:"Las herramientas tecnologicas soportan adecuadamente los procesos de negocio?",type:"scale",weight:1},{id:"q-tech-2",dimensionId:"dim-tecnologia",text:"Existe una estrategia de transformacion digital definida?",type:"boolean",weight:.9},{id:"q-tech-3",dimensionId:"dim-tecnologia",text:"La informacion esta integrada entre los diferentes sistemas?",type:"scale",weight:.8},{id:"q-est-1",dimensionId:"dim-estrategia",text:"La vision y mision estan claramente comunicadas a toda la organizacion?",type:"scale",weight:1},{id:"q-est-2",dimensionId:"dim-estrategia",text:"Existen objetivos estrategicos medibles y con seguimiento periodico?",type:"scale",weight:1},{id:"q-est-3",dimensionId:"dim-estrategia",text:"La estrategia se revisa y actualiza periodicamente?",type:"boolean",weight:.8},{id:"q-cult-1",dimensionId:"dim-cultura",text:"Existe una cultura de mejora continua en la organizacion?",type:"scale",weight:1},{id:"q-cult-2",dimensionId:"dim-cultura",text:"La colaboracion entre areas es fluida y efectiva?",type:"scale",weight:.9},{id:"q-cult-3",dimensionId:"dim-cultura",text:"Los valores organizacionales se practican en el dia a dia?",type:"scale",weight:.8}];var i=a.i(48061),j=a.i(10158),k=a.i(79759),l=a.i(39577),m=a.i(27488),n=a.i(63144),o=a.i(60144),p=a.i(69478),q=a.i(52657),r=a.i(62676),s=a.i(46727),t=a.i(89184),u=a.i(39321),v=a.i(30112),w=a.i(60217);let x=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M114.32,49.8A19.79,19.79,0,0,0,81.72,57L29.22,201.41A19.82,19.82,0,0,0,47.75,228a20,20,0,0,0,6.84-1.22L199,174.28a19.79,19.79,0,0,0,7.24-32.6ZM104.19,183.21l-31.4-31.4L82.94,123.9l49.16,49.16Zm-52.42,26.4Zm12-32.91L79.3,192.26l-24.45,8.89ZM157,164,92,99l10-27.58L184.57,154ZM128,40V16a12,12,0,0,1,24,0V40a12,12,0,0,1-24,0Zm116.48,83.51a12,12,0,0,1-17,17l-16-16a12,12,0,0,1,17-17Zm-.69-40.13-24,8a12,12,0,0,1-7.59-22.77l24-8a12,12,0,1,1,7.59,22.77ZM156.6,65.93C159.83,47.47,173.39,36,192,36c6.45,0,8.69-2.49,10-4.92a18,18,0,0,0,2-7.22V24a12,12,0,0,1,24,0c0,14.47-9.59,36-36,36-4.94,0-10.21,1.19-11.76,10.06A12,12,0,0,1,168.43,80a12.35,12.35,0,0,1-2.08-.18A12,12,0,0,1,156.6,65.93Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M58.89,154.89l42.22,42.22-50.63,18.4a7.79,7.79,0,0,1-10-10Zm138.82-4.72L105.83,58.29A7.79,7.79,0,0,0,93,61.14l-14.9,41,75.82,75.82,41-14.9A7.79,7.79,0,0,0,197.71,150.17Z",opacity:"0.2"}),c.createElement("path",{d:"M111.49,52.63a15.8,15.8,0,0,0-26,5.77L33,202.78A15.83,15.83,0,0,0,47.76,224a16,16,0,0,0,5.46-1l144.37-52.5a15.8,15.8,0,0,0,5.78-26Zm-8.33,135.21-35-35,13.16-36.21,58.05,58.05Zm-55,20,14-38.41,24.45,24.45ZM156,168.64,87.36,100l13-35.87,91.43,91.43ZM160,72a37.8,37.8,0,0,1,3.84-15.58C169.14,45.83,179.14,40,192,40c6.7,0,11-2.29,13.65-7.21A22,22,0,0,0,208,23.94,8,8,0,0,1,224,24c0,12.86-8.52,32-32,32-6.7,0-11,2.29-13.65,7.21A22,22,0,0,0,176,72.06,8,8,0,0,1,160,72ZM136,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm101.66,82.34a8,8,0,1,1-11.32,11.31l-16-16a8,8,0,0,1,11.32-11.32Zm4.87-42.75-24,8a8,8,0,0,1-5.06-15.18l24-8a8,8,0,0,1,5.06,15.18Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M111.49,52.63a15.8,15.8,0,0,0-26,5.77L33,202.78A15.83,15.83,0,0,0,47.76,224a16,16,0,0,0,5.46-1l144.37-52.5a15.8,15.8,0,0,0,5.78-26ZM65.14,161.13l19.2-52.79,63.32,63.32-52.8,19.2ZM160,72a37.8,37.8,0,0,1,3.84-15.58C169.14,45.83,179.14,40,192,40c6.7,0,11-2.29,13.65-7.21A22,22,0,0,0,208,23.94,8,8,0,0,1,224,24c0,12.86-8.52,32-32,32-6.7,0-11,2.29-13.65,7.21A22,22,0,0,0,176,72.06,8,8,0,0,1,160,72ZM136,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm101.66,82.34a8,8,0,1,1-11.32,11.31l-16-16a8,8,0,0,1,11.32-11.32Zm4.87-42.75-24,8a8,8,0,0,1-5.06-15.18l24-8a8,8,0,0,1,5.06,15.18Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M110.08,54a13.8,13.8,0,0,0-22.73,5.05L34.85,203.47A13.82,13.82,0,0,0,47.76,222a14,14,0,0,0,4.77-.85l144.38-52.5a13.8,13.8,0,0,0,5-22.73ZM48.43,209.87a1.79,1.79,0,0,1-2.3-2.3L61.31,165.8,90.2,194.68Zm54.21-19.71-36.8-36.81L80.51,113,143,175.49ZM194,156.07a1.74,1.74,0,0,1-1.14,1.3L155.44,171,85,100.55,98.63,63.19a1.72,1.72,0,0,1,1.3-1.14,1.58,1.58,0,0,1,.41,0,1.72,1.72,0,0,1,1.25.53l91.88,91.88A1.73,1.73,0,0,1,194,156.07ZM162,72a35.52,35.52,0,0,1,3.63-14.68C170.57,47.44,179.93,42,192,42c7.47,0,12.53-2.74,15.48-8.38A24.18,24.18,0,0,0,210,24,6,6,0,0,1,216,18h0a6,6,0,0,1,6,6c0,10.38-6.27,30-30,30-7.47,0-12.53,2.74-15.48,8.38A24,24,0,0,0,174,72a6,6,0,0,1-6,6h0A6,6,0,0,1,162,72ZM138,40V16a6,6,0,0,1,12,0V40a6,6,0,0,1-12,0Zm98.24,83.76a6,6,0,1,1-8.48,8.48l-16-16a6,6,0,0,1,8.48-8.48Zm5.66-46.07-24,8a6,6,0,1,1-3.8-11.38l24-8a6,6,0,0,1,3.8,11.38Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M111.49,52.63a15.8,15.8,0,0,0-26,5.77L33,202.78A15.83,15.83,0,0,0,47.76,224a16,16,0,0,0,5.46-1l144.37-52.5a15.8,15.8,0,0,0,5.78-26Zm-8.33,135.21-35-35,13.16-36.21,58.05,58.05Zm-55,20,14-38.41,24.45,24.45ZM156,168.64,87.36,100l13-35.87,91.43,91.43ZM160,72a37.8,37.8,0,0,1,3.84-15.58C169.14,45.83,179.14,40,192,40c6.7,0,11-2.29,13.65-7.21A22,22,0,0,0,208,23.94,8,8,0,0,1,224,24c0,12.86-8.52,32-32,32-6.7,0-11,2.29-13.65,7.21A22,22,0,0,0,176,72.06,8,8,0,0,1,160,72ZM136,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm101.66,82.34a8,8,0,1,1-11.32,11.31l-16-16a8,8,0,0,1,11.32-11.32Zm4.87-42.75-24,8a8,8,0,0,1-5.06-15.18l24-8a8,8,0,0,1,5.06,15.18Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M108.66,55.46a11.79,11.79,0,0,0-19.43,4.31L36.73,204.15a11.81,11.81,0,0,0,11,15.85,11.88,11.88,0,0,0,4.08-.73l144.38-52.5a11.79,11.79,0,0,0,4.31-19.43Zm-6.53,137L63.52,153.87l16.19-44.51,66.92,66.93Zm-53,19.28a3.81,3.81,0,0,1-4.87-4.87l16.27-44.72,33.32,33.32Zm146.8-55.25a3.77,3.77,0,0,1-2.42,2.74l-38.56,14L82.72,101.07l14-38.56a3.77,3.77,0,0,1,2.74-2.42,4.32,4.32,0,0,1,.85-.09A3.65,3.65,0,0,1,103,61.12L194.88,153A3.78,3.78,0,0,1,195.91,156.51ZM220,24c0,9.68-5.85,28-28,28-8.31,0-14.18,3.29-17.42,9.79A26.12,26.12,0,0,0,172,72a4,4,0,0,1-8,0,34.06,34.06,0,0,1,3.42-13.79C170.66,51.73,177.56,44,192,44c19.29,0,20-18,20-20a4,4,0,0,1,4-4h0A4,4,0,0,1,220,24ZM140,40V16a4,4,0,0,1,8,0V40a4,4,0,0,1-8,0Zm94.83,85.17a4,4,0,0,1-5.66,5.66l-16-16a4,4,0,0,1,5.66-5.66Zm6.43-49.37-24,8A4,4,0,0,1,216,84a4,4,0,0,1-1.27-7.79l24-8a4,4,0,0,1,2.53,7.59Z"}))]]),y=c.forwardRef((a,b)=>c.createElement(w.default,{ref:b,...a,weights:x}));y.displayName="ConfettiIcon";var z=a.i(9524),A=a.i(4971),B=a.i(73998),C=a.i(88991),D=a.i(78407),E=a.i(33395);let F=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M71.76,148H31.7a12,12,0,1,1,0-24H65.33l12.45-18.66a12,12,0,0,1,20,0l22,33,6-9a12,12,0,0,1,10-5.34h24a12,12,0,1,1,0,24h-17.6l-12.46,18.66a12,12,0,0,1-20,0l-22-33-6,9A12,12,0,0,1,71.76,148ZM177.91,36c-20.12,0-38,7.93-50.07,21.56C115.74,43.93,97.89,36,77.76,36A66,66,0,0,0,12.07,94.68,12,12,0,0,0,36,97.32,42,42,0,0,1,77.76,60c17.83,0,32.75,9.4,38.95,24.54a12,12,0,0,0,22.25,0C145.16,69.4,160.08,60,177.91,60A42.08,42.08,0,0,1,220,102c0,29.42-25.86,57.77-47.56,76.36a329,329,0,0,1-44.58,31.81c-10.87-6.45-35.37-22-56.51-42.73a12,12,0,1,0-16.84,17.12c30.39,29.81,66.15,49.2,67.66,50a12.06,12.06,0,0,0,11.39,0C138,232.14,244,174.34,244,102A66.12,66.12,0,0,0,177.91,36Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M232,102c0,66-104,122-104,122S24,168,24,102A54,54,0,0,1,78,48c22.59,0,41.94,12.31,50,32,8.06-19.69,27.41-32,50-32A54,54,0,0,1,232,102Z",opacity:"0.2"}),c.createElement("path",{d:"M72,144H32a8,8,0,0,1,0-16H67.72l13.62-20.44a8,8,0,0,1,13.32,0l25.34,38,9.34-14A8,8,0,0,1,136,128h24a8,8,0,0,1,0,16H140.28l-13.62,20.44a8,8,0,0,1-13.32,0L88,126.42l-9.34,14A8,8,0,0,1,72,144ZM178,40c-20.65,0-38.73,8.88-50,23.89C116.73,48.88,98.65,40,78,40a62.07,62.07,0,0,0-62,62c0,.75,0,1.5,0,2.25a8,8,0,1,0,16-.5c0-.58,0-1.17,0-1.75A46.06,46.06,0,0,1,78,56c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46c0,53.61-77.76,102.15-96,112.8-10.83-6.31-42.63-26-66.68-52.21a8,8,0,1,0-11.8,10.82c31.17,34,72.93,56.68,74.69,57.63a8,8,0,0,0,7.58,0C136.21,228.66,240,172,240,102A62.07,62.07,0,0,0,178,40Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M240,102c0,70-103.79,126.66-108.21,129a8,8,0,0,1-7.58,0c-3.35-1.8-63.55-34.69-92.68-80.89A4,4,0,0,1,34.92,144H72a8,8,0,0,0,6.66-3.56l9.34-14,25.34,38a8,8,0,0,0,9.16,3.16,8.23,8.23,0,0,0,4.28-3.34L140.28,144H160a8,8,0,0,0,8-8.53,8.18,8.18,0,0,0-8.25-7.47H136a8,8,0,0,0-6.66,3.56l-9.34,14-25.34-38a8,8,0,0,0-9.17-3.16,8.25,8.25,0,0,0-4.27,3.34L67.72,128H23.53a4,4,0,0,1-3.83-2.81A76.93,76.93,0,0,1,16,102,62.07,62.07,0,0,1,78,40c20.65,0,38.73,8.88,50,23.89C139.27,48.88,157.35,40,178,40A62.07,62.07,0,0,1,240,102Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M72,142H32a6,6,0,0,1,0-12H68.79L83,108.67a6,6,0,0,1,10,0l27,40.51,11-16.51a6,6,0,0,1,5-2.67h24a6,6,0,0,1,0,12H139.21L125,163.33a6,6,0,0,1-10,0L88,122.82,77,139.33A6,6,0,0,1,72,142ZM178,42c-21,0-39.26,9.47-50,25.34C117.26,51.47,99,42,78,42a60.07,60.07,0,0,0-60,60q0,1.09,0,2.19a6,6,0,0,0,12-.38c0-.6,0-1.21,0-1.81A48.05,48.05,0,0,1,78,54c20.28,0,37.31,10.83,44.45,28.27a6,6,0,0,0,11.1,0C140.69,64.83,157.72,54,178,54a48.05,48.05,0,0,1,48,48c0,55.73-81.61,105.65-98,115.11-9.84-5.66-43.09-25.82-68.16-53.16a6,6,0,1,0-8.84,8.1c30.94,33.77,72.41,56.29,74.16,57.23a6,6,0,0,0,5.68,0,334.68,334.68,0,0,0,53.06-37C219.8,161.59,238,131.2,238,102A60.07,60.07,0,0,0,178,42Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M72,144H32a8,8,0,0,1,0-16H67.72l13.62-20.44a8,8,0,0,1,13.32,0l25.34,38,9.34-14A8,8,0,0,1,136,128h24a8,8,0,0,1,0,16H140.28l-13.62,20.44a8,8,0,0,1-13.32,0L88,126.42l-9.34,14A8,8,0,0,1,72,144ZM178,40c-20.65,0-38.73,8.88-50,23.89C116.73,48.88,98.65,40,78,40a62.07,62.07,0,0,0-62,62c0,.75,0,1.5,0,2.25a8,8,0,1,0,16-.5c0-.58,0-1.17,0-1.75A46.06,46.06,0,0,1,78,56c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46c0,53.61-77.76,102.15-96,112.8-10.83-6.31-42.63-26-66.68-52.21a8,8,0,1,0-11.8,10.82c31.17,34,72.93,56.68,74.69,57.63a8,8,0,0,0,7.58,0C136.21,228.66,240,172,240,102A62.07,62.07,0,0,0,178,40Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M72,140H32a4,4,0,0,1,0-8H69.86l14.81-22.22a4,4,0,0,1,6.66,0l28.67,43,12.67-19A4,4,0,0,1,136,132h24a4,4,0,0,1,0,8H138.14l-14.81,22.22a4,4,0,0,1-6.66,0L88,119.21l-12.67,19A4,4,0,0,1,72,140ZM178,44c-21.44,0-39.92,10.19-50,27.07C117.92,54.19,99.44,44,78,44a58.07,58.07,0,0,0-58,58q0,1.06,0,2.13a4,4,0,1,0,8-.26c0-.62,0-1.24,0-1.87A50.06,50.06,0,0,1,78,52c21.11,0,38.85,11.31,46.3,29.51a4,4,0,0,0,7.4,0C139.15,63.31,156.89,52,178,52a50.06,50.06,0,0,1,50,50c0,58-86,109.46-100,117.42-8.47-4.82-43.5-25.61-69.63-54.12a4,4,0,0,0-5.9,5.4c30.72,33.52,71.9,55.89,73.63,56.82a4,4,0,0,0,3.8,0,333.81,333.81,0,0,0,52.7-36.73C218,160.47,236,130.59,236,102A58.07,58.07,0,0,0,178,44Z"}))]]),G=c.forwardRef((a,b)=>c.createElement(w.default,{ref:b,...a,weights:F}));G.displayName="HeartbeatIcon";var H=a.i(61275),I=a.i(71174),J=a.i(82499),K=a.i(11701),L=a.i(56497),M=a.i(69540),N=a.i(5710),O=a.i(80587);let P=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M229.26,90.4a108,108,0,0,1-177.63,114A108,108,0,0,1,195.41,43.63l20.1-20.11a12,12,0,0,1,17,17l-96,96a12,12,0,1,1-17-17l24-24a36,36,0,1,0,19.76,39.65,12,12,0,0,1,23.53,4.74,60,60,0,1,1-25.73-62L178.3,60.74a84,84,0,1,0,28.46,38,12,12,0,1,1,22.5-8.35Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M176,128a48,48,0,1,1-48-48A48,48,0,0,1,176,128Z",opacity:"0.2"}),c.createElement("path",{d:"M221.87,83.16A104.1,104.1,0,1,1,195.67,49l22.67-22.68a8,8,0,0,1,11.32,11.32l-96,96a8,8,0,0,1-11.32-11.32l27.72-27.72a40,40,0,1,0,17.87,31.09,8,8,0,1,1,16-.9,56,56,0,1,1-22.38-41.65L184.3,60.39a87.88,87.88,0,1,0,23.13,29.67,8,8,0,0,1,14.44-6.9Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M221.87,83.16A104.1,104.1,0,1,1,195.67,49l22.67-22.68a8,8,0,0,1,11.32,11.32L167.6,99.71h0l-37.71,37.71-23.95,23.95a40,40,0,0,0,62-35.67,8,8,0,1,1,16-.9,56,56,0,0,1-95.5,42.79h0a56,56,0,0,1,73.13-84.43L184.3,60.39a87.88,87.88,0,1,0,23.13,29.67,8,8,0,0,1,14.44-6.9Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M220.06,84a102.06,102.06,0,1,1-24.31-32.27l24-24a6,6,0,0,1,8.48,8.49l-96,96a6,6,0,1,1-8.48-8.49l29.39-29.4a42,42,0,1,0,16.78,31.24,6,6,0,1,1,12-.68A54,54,0,1,1,161.7,85.83l25.54-25.55a89.91,89.91,0,1,0,22,28.93A6,6,0,1,1,220.06,84Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M221.87,83.16A104.1,104.1,0,1,1,195.67,49l22.67-22.68a8,8,0,0,1,11.32,11.32l-96,96a8,8,0,0,1-11.32-11.32l27.72-27.72a40,40,0,1,0,17.87,31.09,8,8,0,1,1,16-.9,56,56,0,1,1-22.38-41.65L184.3,60.39a87.88,87.88,0,1,0,23.13,29.67,8,8,0,0,1,14.44-6.9Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M218.26,84.89a100.16,100.16,0,1,1-22.44-30.37l25.35-25.35a4,4,0,1,1,5.66,5.66l-96,96a4,4,0,0,1-5.66-5.66l31-31a44,44,0,1,0,15.78,31.3,4,4,0,0,1,8-.46,52,52,0,1,1-18.1-36.51l28.34-28.33A92,92,0,0,0,63,193.05,92,92,0,0,0,211,88.33a4,4,0,1,1,7.22-3.44Z"}))]]),Q=c.forwardRef((a,b)=>c.createElement(w.default,{ref:b,...a,weights:P}));Q.displayName="TargetIcon";let R=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M244,56v64a12,12,0,0,1-24,0V85l-75.51,75.52a12,12,0,0,1-17,0L96,129,32.49,192.49a12,12,0,0,1-17-17l72-72a12,12,0,0,1,17,0L136,135l67-67H168a12,12,0,0,1,0-24h64A12,12,0,0,1,244,56Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M232,56v64L168,56Z",opacity:"0.2"}),c.createElement("path",{d:"M232,48H168a8,8,0,0,0-5.66,13.66L188.69,88,136,140.69l-34.34-34.35a8,8,0,0,0-11.32,0l-72,72a8,8,0,0,0,11.32,11.32L96,123.31l34.34,34.35a8,8,0,0,0,11.32,0L200,99.31l26.34,26.35A8,8,0,0,0,240,120V56A8,8,0,0,0,232,48Zm-8,52.69L187.31,64H224Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M240,56v64a8,8,0,0,1-13.66,5.66L200,99.31l-58.34,58.35a8,8,0,0,1-11.32,0L96,123.31,29.66,189.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0L136,140.69,188.69,88,162.34,61.66A8,8,0,0,1,168,48h64A8,8,0,0,1,240,56Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M238,56v64a6,6,0,0,1-12,0V70.48l-85.76,85.76a6,6,0,0,1-8.48,0L96,120.49,28.24,188.24a6,6,0,0,1-8.48-8.48l72-72a6,6,0,0,1,8.48,0L136,143.51,217.52,62H168a6,6,0,0,1,0-12h64A6,6,0,0,1,238,56Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M240,56v64a8,8,0,0,1-16,0V75.31l-82.34,82.35a8,8,0,0,1-11.32,0L96,123.31,29.66,189.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0L136,140.69,212.69,64H168a8,8,0,0,1,0-16h64A8,8,0,0,1,240,56Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M236,56v64a4,4,0,0,1-8,0V65.66l-89.17,89.17a4,4,0,0,1-5.66,0L96,117.66,26.83,186.83a4,4,0,0,1-5.66-5.66l72-72a4,4,0,0,1,5.66,0L136,146.34,222.34,60H168a4,4,0,0,1,0-8h64A4,4,0,0,1,236,56Z"}))]]),S=c.forwardRef((a,b)=>c.createElement(w.default,{ref:b,...a,weights:R}));S.displayName="TrendUpIcon";let T=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M244,128v64a12,12,0,0,1-12,12H168a12,12,0,0,1,0-24h35l-67-67-31.51,31.52a12,12,0,0,1-17,0l-72-72a12,12,0,0,1,17-17L96,119l31.51-31.52a12,12,0,0,1,17,0L220,163V128a12,12,0,0,1,24,0Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M232,128v64H168Z",opacity:"0.2"}),c.createElement("path",{d:"M235.06,120.61a8,8,0,0,0-8.72,1.73L200,148.69,141.66,90.34a8,8,0,0,0-11.32,0L96,124.69,29.66,58.34A8,8,0,0,0,18.34,69.66l72,72a8,8,0,0,0,11.32,0L136,107.31,188.69,160l-26.35,26.34A8,8,0,0,0,168,200h64a8,8,0,0,0,8-8V128A8,8,0,0,0,235.06,120.61ZM224,184H187.31L224,147.31Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M240,128v64a8,8,0,0,1-8,8H168a8,8,0,0,1-5.66-13.66L188.69,160,136,107.31l-34.34,34.35a8,8,0,0,1-11.32,0l-72-72A8,8,0,0,1,29.66,58.34L96,124.69l34.34-34.35a8,8,0,0,1,11.32,0L200,148.69l26.34-26.35A8,8,0,0,1,240,128Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M238,128v64a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h49.52L136,104.49l-35.76,35.75a6,6,0,0,1-8.48,0l-72-72a6,6,0,0,1,8.48-8.48L96,127.51l35.76-35.75a6,6,0,0,1,8.48,0L226,177.52V128a6,6,0,0,1,12,0Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M240,128v64a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h44.69L136,107.31l-34.34,34.35a8,8,0,0,1-11.32,0l-72-72A8,8,0,0,1,29.66,58.34L96,124.69l34.34-34.35a8,8,0,0,1,11.32,0L224,172.69V128a8,8,0,0,1,16,0Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M236,128v64a4,4,0,0,1-4,4H168a4,4,0,0,1,0-8h54.34L136,101.66,98.83,138.83a4,4,0,0,1-5.66,0l-72-72a4,4,0,0,1,5.66-5.66L96,130.34l37.17-37.17a4,4,0,0,1,5.66,0L228,182.34V128a4,4,0,0,1,8,0Z"}))]]),U=c.forwardRef((a,b)=>c.createElement(w.default,{ref:b,...a,weights:T}));U.displayName="TrendDownIcon";var V=a.i(73856),W=a.i(61320),X=a.i(24241),Y=a.i(33986),Z=a.i(26616);let $=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M243.78,156.53l-12-96A28,28,0,0,0,204,36H32A20,20,0,0,0,12,56v88a20,20,0,0,0,20,20H72.58l36.69,73.37A12,12,0,0,0,120,244a44.05,44.05,0,0,0,44-44V188h52a28,28,0,0,0,27.78-31.47ZM68,140H36V60H68Zm151,22.65a4,4,0,0,1-3,1.35H152a12,12,0,0,0-12,12v24a20,20,0,0,1-13.18,18.8L92,149.17V60H204a4,4,0,0,1,4,3.5l12,96A4,4,0,0,1,219,162.65Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M80,48V152H32a8,8,0,0,1-8-8V56a8,8,0,0,1,8-8Z",opacity:"0.2"}),c.createElement("path",{d:"M239.82,157l-12-96A24,24,0,0,0,204,40H32A16,16,0,0,0,16,56v88a16,16,0,0,0,16,16H75.06l37.78,75.58A8,8,0,0,0,120,240a40,40,0,0,0,40-40V184h56a24,24,0,0,0,23.82-27ZM72,144H32V56H72Zm150,21.29a7.88,7.88,0,0,1-6,2.71H152a8,8,0,0,0-8,8v24a24,24,0,0,1-19.29,23.54L88,150.11V56H204a8,8,0,0,1,7.94,7l12,96A7.87,7.87,0,0,1,222,165.29Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M239.82,157l-12-96A24,24,0,0,0,204,40H32A16,16,0,0,0,16,56v88a16,16,0,0,0,16,16H75.06l37.78,75.58A8,8,0,0,0,120,240a40,40,0,0,0,40-40V184h56a24,24,0,0,0,23.82-27ZM72,144H32V56H72Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M237.83,157.27l-12-96A22,22,0,0,0,204,42H32A14,14,0,0,0,18,56v88a14,14,0,0,0,14,14H76.29l38.34,76.68A6,6,0,0,0,120,238a38,38,0,0,0,38-38V182h58a22,22,0,0,0,21.83-24.73ZM74,146H32a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H74Zm149.5,20.62A9.89,9.89,0,0,1,216,170H152a6,6,0,0,0-6,6v24a26,26,0,0,1-22.42,25.75L86,150.58V54H204a10,10,0,0,1,9.92,8.76l12,96A9.89,9.89,0,0,1,223.5,166.62Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M239.82,157l-12-96A24,24,0,0,0,204,40H32A16,16,0,0,0,16,56v88a16,16,0,0,0,16,16H75.06l37.78,75.58A8,8,0,0,0,120,240a40,40,0,0,0,40-40V184h56a24,24,0,0,0,23.82-27ZM72,144H32V56H72Zm150,21.29a7.88,7.88,0,0,1-6,2.71H152a8,8,0,0,0-8,8v24a24,24,0,0,1-19.29,23.54L88,150.11V56H204a8,8,0,0,1,7.94,7l12,96A7.87,7.87,0,0,1,222,165.29Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M235.85,157.52l-12-96A20,20,0,0,0,204,44H32A12,12,0,0,0,20,56v88a12,12,0,0,0,12,12H77.53l38.89,77.79A4,4,0,0,0,120,236a36,36,0,0,0,36-36V180h60a20,20,0,0,0,19.85-22.48ZM76,148H32a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H76Zm149,19.94a12,12,0,0,1-9,4.06H152a4,4,0,0,0-4,4v24a28,28,0,0,1-25.58,27.9L84,151.06V52H204a12,12,0,0,1,11.91,10.51l12,96A12,12,0,0,1,225,167.94Z"}))]]),_=c.forwardRef((a,b)=>c.createElement(w.default,{ref:b,...a,weights:$}));_.displayName="ThumbsDownIcon";let aa=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M228,128a12,12,0,0,1-12,12H116a12,12,0,0,1,0-24H216A12,12,0,0,1,228,128ZM116,76H216a12,12,0,0,0,0-24H116a12,12,0,0,0,0,24ZM216,180H116a12,12,0,0,0,0,24H216a12,12,0,0,0,0-24ZM44,59.31V104a12,12,0,0,0,24,0V40A12,12,0,0,0,50.64,29.27l-16,8a12,12,0,0,0,9.36,22Zm39.73,96.86a27.7,27.7,0,0,0-11.2-18.63A28.89,28.89,0,0,0,32.9,143a27.71,27.71,0,0,0-4.17,7.54,12,12,0,0,0,22.55,8.21,4,4,0,0,1,.58-1,4.78,4.78,0,0,1,6.5-.82,3.82,3.82,0,0,1,1.61,2.6,3.63,3.63,0,0,1-.77,2.77l-.13.17L30.39,200.82A12,12,0,0,0,40,220H72a12,12,0,0,0,0-24H64l14.28-19.11A27.48,27.48,0,0,0,83.73,156.17Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216,64V192H104V64Z",opacity:"0.2"}),c.createElement("path",{d:"M224,128a8,8,0,0,1-8,8H104a8,8,0,0,1,0-16H216A8,8,0,0,1,224,128ZM104,72H216a8,8,0,0,0,0-16H104a8,8,0,0,0,0,16ZM216,184H104a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16ZM43.58,55.16,48,52.94V104a8,8,0,0,0,16,0V40a8,8,0,0,0-11.58-7.16l-16,8a8,8,0,0,0,7.16,14.32ZM79.77,156.72a23.73,23.73,0,0,0-9.6-15.95,24.86,24.86,0,0,0-34.11,4.7,23.63,23.63,0,0,0-3.57,6.46,8,8,0,1,0,15,5.47,7.84,7.84,0,0,1,1.18-2.13,8.76,8.76,0,0,1,12-1.59A7.91,7.91,0,0,1,63.93,159a7.64,7.64,0,0,1-1.57,5.78,1,1,0,0,0-.08.11L33.59,203.21A8,8,0,0,0,40,216H72a8,8,0,0,0,0-16H56l19.08-25.53A23.47,23.47,0,0,0,79.77,156.72Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM56.84,75.58a8,8,0,0,1,3.58-10.74l16-8A8,8,0,0,1,88,64v48a8,8,0,0,1-16,0V76.94l-4.42,2.22A8,8,0,0,1,56.84,75.58ZM92,180a8,8,0,0,1,0,16H68a8,8,0,0,1-6.4-12.8l21.67-28.89A3.92,3.92,0,0,0,84,152a4,4,0,0,0-7.77-1.33,8,8,0,0,1-15.09-5.34,20,20,0,1,1,35,18.53L84,180Zm100,4H120a8,8,0,0,1,0-16h72a8,8,0,0,1,0,16Zm0-48H120a8,8,0,0,1,0-16h72a8,8,0,0,1,0,16Zm0-48H120a8,8,0,0,1,0-16h72a8,8,0,0,1,0,16Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M222,128a6,6,0,0,1-6,6H104a6,6,0,0,1,0-12H216A6,6,0,0,1,222,128ZM104,70H216a6,6,0,0,0,0-12H104a6,6,0,0,0,0,12ZM216,186H104a6,6,0,0,0,0,12H216a6,6,0,0,0,0-12ZM42.68,53.37,50,49.71V104a6,6,0,0,0,12,0V40a6,6,0,0,0-8.68-5.37l-16,8a6,6,0,0,0,5.36,10.74ZM72,202H52l21.48-28.74A21.5,21.5,0,0,0,77.79,157,21.75,21.75,0,0,0,69,142.38a22.86,22.86,0,0,0-31.35,4.31,22.18,22.18,0,0,0-3.28,5.92,6,6,0,0,0,11.28,4.11,9.87,9.87,0,0,1,1.48-2.67,10.78,10.78,0,0,1,14.78-2,9.89,9.89,0,0,1,4,6.61,9.64,9.64,0,0,1-2,7.28l-.06.09L35.2,204.41A6,6,0,0,0,40,214H72a6,6,0,0,0,0-12Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M224,128a8,8,0,0,1-8,8H104a8,8,0,0,1,0-16H216A8,8,0,0,1,224,128ZM104,72H216a8,8,0,0,0,0-16H104a8,8,0,0,0,0,16ZM216,184H104a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16ZM43.58,55.16,48,52.94V104a8,8,0,0,0,16,0V40a8,8,0,0,0-11.58-7.16l-16,8a8,8,0,0,0,7.16,14.32ZM79.77,156.72a23.73,23.73,0,0,0-9.6-15.95,24.86,24.86,0,0,0-34.11,4.7,23.63,23.63,0,0,0-3.57,6.46,8,8,0,1,0,15,5.47,7.84,7.84,0,0,1,1.18-2.13,8.76,8.76,0,0,1,12-1.59A7.91,7.91,0,0,1,63.93,159a7.64,7.64,0,0,1-1.57,5.78,1,1,0,0,0-.08.11L33.59,203.21A8,8,0,0,0,40,216H72a8,8,0,0,0,0-16H56l19.08-25.53A23.47,23.47,0,0,0,79.77,156.72Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M220,128a4,4,0,0,1-4,4H104a4,4,0,0,1,0-8H216A4,4,0,0,1,220,128ZM104,68H216a4,4,0,0,0,0-8H104a4,4,0,0,0,0,8ZM216,188H104a4,4,0,0,0,0,8H216a4,4,0,0,0,0-8ZM41.79,51.58,52,46.47V104a4,4,0,0,0,8,0V40a4,4,0,0,0-5.79-3.58l-16,8a4,4,0,1,0,3.58,7.16ZM72,204H48l23.85-31.92a19.54,19.54,0,0,0,4-14.8,19.76,19.76,0,0,0-8-13.28,20.84,20.84,0,0,0-28.59,3.92,19.85,19.85,0,0,0-3,5.38A4,4,0,0,0,43.76,156a12.1,12.1,0,0,1,1.78-3.22,12.78,12.78,0,0,1,17.54-2.37,11.85,11.85,0,0,1,4.81,7.94,11.65,11.65,0,0,1-2.41,8.85L36.8,205.61A4,4,0,0,0,40,212H72a4,4,0,0,0,0-8Z"}))]]),ab=c.forwardRef((a,b)=>c.createElement(w.default,{ref:b,...a,weights:aa}));ab.displayName="ListNumbersIcon";let ac=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M208,136H48a20,20,0,0,0-20,20v36a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V156A20,20,0,0,0,208,136Zm-4,52H52V160H204Zm4-144H48A20,20,0,0,0,28,64v36a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V64A20,20,0,0,0,208,44Zm-4,52H52V68H204Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216,152v40a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152a8,8,0,0,1,8-8H208A8,8,0,0,1,216,152Zm-8-96H48a8,8,0,0,0-8,8v40a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V64A8,8,0,0,0,208,56Z",opacity:"0.2"}),c.createElement("path",{d:"M208,136H48a16,16,0,0,0-16,16v40a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V152A16,16,0,0,0,208,136Zm0,56H48V152H208v40Zm0-144H48A16,16,0,0,0,32,64v40a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V64A16,16,0,0,0,208,48Zm0,56H48V64H208v40Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M224,152v40a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V152a16,16,0,0,1,16-16H208A16,16,0,0,1,224,152ZM208,48H48A16,16,0,0,0,32,64v40a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V64A16,16,0,0,0,208,48Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M208,138H48a14,14,0,0,0-14,14v40a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V152A14,14,0,0,0,208,138Zm2,54a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V152a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM208,50H48A14,14,0,0,0,34,64v40a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V64A14,14,0,0,0,208,50Zm2,54a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V64a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M208,136H48a16,16,0,0,0-16,16v40a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V152A16,16,0,0,0,208,136Zm0,56H48V152H208v40Zm0-144H48A16,16,0,0,0,32,64v40a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V64A16,16,0,0,0,208,48Zm0,56H48V64H208v40Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M208,140H48a12,12,0,0,0-12,12v40a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V152A12,12,0,0,0,208,140Zm4,52a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V152a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM208,52H48A12,12,0,0,0,36,64v40a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V64A12,12,0,0,0,208,52Zm4,52a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V64a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4Z"}))]]),ad=c.forwardRef((a,b)=>c.createElement(w.default,{ref:b,...a,weights:ac}));ad.displayName="RowsIcon";var ae=a.i(56536);function af(){let{currentUser:a,currentTenantId:i}=(0,d.useApp)(),{t:l}=(0,e.useTranslation)(),[m,n]=(0,c.useState)("LIST"),[q,w]=(0,c.useState)("OPEN"),[x,y]=(0,c.useState)(()=>f.DB.surveys||[]),[z,A]=(0,c.useState)(()=>f.DB.surveyResponses||[]);(0,c.useEffect)(()=>{f.DB.surveys=x,f.DB.surveyResponses=z,localStorage.setItem("db_surveys",JSON.stringify(x)),localStorage.setItem("db_responses",JSON.stringify(z))},[x,z]);let[B,C]=(0,c.useState)(null),[F,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)("ALL"),[M,N]=(0,c.useState)("ALL"),[O,P]=(0,c.useState)(""),Q=b=>{let c=[],d="Nueva Encuesta",e="";if("DIAGNOSTIC"===b){d="Diagnóstico de Madurez Digital e IA",e="Evaluación integral de 6 dimensiones (180 preguntas) para medir el nivel de madurez.";let a=0;g.forEach(b=>{(h[b.id]||[]).forEach(d=>{a++,c.push({id:`q-${b.id}-${a}`,section:b.id,type:"LIKERT",title:d,required:!0,scale:5})})})}else"CLIMA"===b?(d="Clima Organizacional Q3",e="Pulso de clima laboral, liderazgo y bienestar.",c=[{id:"c1",section:"liderazgo",type:"LIKERT",title:"Confío en las decisiones de liderazgo.",required:!0,scale:5},{id:"c2",section:"liderazgo",type:"LIKERT",title:"Recibo orientación clara sobre prioridades.",required:!0,scale:5},{id:"c3",section:"bienestar",type:"LIKERT",title:"Mi carga de trabajo es manejable.",required:!0,scale:5},{id:"c4",section:"comunicacion",type:"LIKERT",title:"La información importante llega a tiempo.",required:!0,scale:5},{id:"c5",type:"TEXT",title:"¿Qué deberíamos mejorar prioritariamente?",required:!1}]):"NPS"===b?(d="Encuesta de Satisfacción (NPS)",e="Evaluación de lealtad y satisfacción del cliente interno.",c=[{id:"n1",type:"NPS",title:"¿Qué tan probable es que recomiendes este servicio a un colega?",required:!0},{id:"n2",type:"LIKERT",title:"¿Qué tan satisfecho estás con el servicio recibido?",required:!0,scale:5},{id:"n3",type:"TEXT",title:"¿Qué fue lo mejor del servicio?",required:!1}]):c=[];C({id:`S-${Date.now()}`,tenantId:i||"T1",ownerId:a?.id||"u1",title:d,description:e,isAnonymous:"CLIMA"===b,status:"DRAFT",audience:"TENANT",questions:c,createdAt:new Date().toISOString().split("T")[0],responsesCount:0,unit:void 0,process:void 0}),n("BUILDER")},R=a=>{y(a),f.DB.surveys=a},S=3>(a?.level||6),T=(0,c.useMemo)(()=>{let a=new Set;return x.forEach(b=>{b.unit&&a.add(b.unit)}),Array.from(a).sort()},[x]),U=(0,c.useMemo)(()=>{let a=new Set;return x.forEach(b=>{b.process&&("ALL"===K||b.unit===K)&&a.add(b.process)}),Array.from(a).sort()},[x,K]);(0,c.useEffect)(()=>{N("ALL")},[K]);let V=(0,c.useMemo)(()=>x.filter(b=>{if(!("OPEN"===q?"OPEN"===b.status||"SCHEDULED"===b.status:"DRAFT"===q?"DRAFT"===b.status:"CLOSED"===b.status||"ARCHIVED"===b.status))return!1;if(O){let a=O.toLowerCase(),c=b.title.toLowerCase().includes(a),d=b.description?.toLowerCase().includes(a);if(!c&&!d)return!1}if("ALL"!==K&&b.unit!==K||"ALL"!==M&&b.process!==M)return!1;if(S)return!0;let c="TENANT"===b.audience&&!b.targetUserId;"UNIT"===b.audience&&b.targetUnitId&&a?.unit&&(f.DB.units.find(a=>a.id===b.targetUnitId)?.name,a.unit);let d=f.DB.units.find(a=>a.id===b.targetUnitId),e="UNIT"===b.audience&&d?.name===a?.unit,g=!!a?.id&&b.targetUserId?.includes(a.id);return c||e||g}),[x,q,O,K,M,S,a]);return"TEMPLATE_SELECT"===m?(0,b.jsx)("div",{className:"p-8 h-full bg-slate-50 flex flex-col items-center justify-center animate-fadeIn",children:(0,b.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:l("surveys_template_title")}),(0,b.jsx)("p",{className:"text-slate-500",children:l("surveys_template_subtitle")})]}),(0,b.jsx)("button",{onClick:()=>n("LIST"),className:"text-slate-400 hover:text-slate-600 font-medium",children:l("surveys_cancel")})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("button",{onClick:()=>Q("DIAGNOSTIC"),className:"bg-white p-6 rounded-xl border border-slate-200 hover:border-blue-500 hover:shadow-lg transition-all text-left flex gap-4 group",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-50 text-blue-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,b.jsx)(D.PresentationChart,{size:28,weight:"fill"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-slate-800 text-lg group-hover:text-blue-600",children:"Diagnóstico MD-IA"}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Evaluación completa de 180 preguntas en 6 dimensiones. Incluye radar y scoring avanzado."})]})]}),(0,b.jsxs)("button",{onClick:()=>Q("CLIMA"),className:"bg-white p-6 rounded-xl border border-slate-200 hover:border-blue-500 hover:shadow-lg transition-all text-left flex gap-4 group",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-green-50 text-green-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,b.jsx)(G,{size:28,weight:"fill"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-slate-800 text-lg group-hover:text-green-600",children:"Clima Organizacional"}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Pulso rápido de bienestar, liderazgo y cultura. Recomendado anónimo."})]})]}),(0,b.jsxs)("button",{onClick:()=>Q("NPS"),className:"bg-white p-6 rounded-xl border border-slate-200 hover:border-blue-500 hover:shadow-lg transition-all text-left flex gap-4 group",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-purple-50 text-purple-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,b.jsx)(v.Smiley,{size:28,weight:"fill"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-slate-800 text-lg group-hover:text-purple-600",children:"NPS / Satisfacción"}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Mide lealtad y satisfacción del servicio con NPS, escalas y preguntas abiertas."})]})]}),(0,b.jsxs)("button",{onClick:()=>Q("BLANK"),className:"bg-slate-100 p-6 rounded-xl border border-slate-200 hover:border-slate-400 hover:bg-slate-200 transition-all text-left flex gap-4 group",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-white text-slate-400 rounded-lg flex items-center justify-center",children:(0,b.jsx)(j.Plus,{size:28})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-slate-600 text-lg",children:"En Blanco"}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Comienza desde cero y construye tus propias preguntas."})]})]})]})]})}):"BUILDER"===m&&B?(0,b.jsx)(al,{survey:B,onSave:a=>{R(x.find(b=>b.id===a.id)?x.map(b=>b.id===a.id?a:b):[a,...x]),n("LIST"),C(null)},onCancel:()=>{n("LIST"),C(null)}}):"RESPOND"===m&&F?(0,b.jsx)(ak,{survey:F,currentUser:a,onSubmit:a=>{A(b=>[...b,a]),R(x.map(b=>b.id===a.surveyId?{...b,responsesCount:(b.responsesCount||0)+1}:b)),n("LIST"),H(null)},onCancel:()=>{n("LIST"),H(null)}}):"RESULTS"===m&&I?(0,b.jsx)(aj,{survey:I,onBack:()=>{n("LIST"),J(null)}}):(0,b.jsxs)("div",{className:"p-8 h-full bg-slate-50 flex flex-col",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,b.jsx)(k.ClipboardText,{className:"text-blue-600",weight:"duotone"}),l("surveys_title")]}),(0,b.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:l("surveys_desc")})]}),S&&(0,b.jsxs)("button",{onClick:()=>n("TEMPLATE_SELECT"),className:"btn bg-blue-600 text-white shadow-lg shadow-blue-500/20 hover:bg-blue-700 font-medium px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,b.jsx)(j.Plus,{weight:"bold"})," ",l("surveys_create_btn")]})]}),(0,b.jsx)("div",{className:"flex gap-6 border-b border-slate-200 mb-6",children:["OPEN","DRAFT","CLOSED"].map(a=>S||"OPEN"===a?(0,b.jsxs)("button",{onClick:()=>w(a),className:`pb-3 font-semibold text-sm transition-all border-b-2 px-2 flex items-center gap-2 ${q===a?"text-blue-600 border-blue-600":"text-slate-500 border-transparent hover:text-slate-700"}`,children:["OPEN"===a&&l("surveys_tab_active"),"DRAFT"===a&&l("surveys_tab_drafts"),"CLOSED"===a&&l("surveys_tab_closed"),(S||"OPEN"===a)&&(0,b.jsx)("span",{className:"bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded text-xs ml-1",children:x.filter(b=>"OPEN"===a?"OPEN"===b.status||"SCHEDULED"===b.status:"DRAFT"===a?"DRAFT"===b.status:"CLOSED"===b.status||"ARCHIVED"===b.status).length})]},a):null)}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-4 mb-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",placeholder:"Buscar encuestas...",value:O,onChange:a=>P(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg text-sm outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all"}),(0,b.jsx)(k.ClipboardText,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("select",{value:K,onChange:a=>L(a.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all bg-white",children:[(0,b.jsx)("option",{value:"ALL",children:"Todas las Unidades"}),T.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("select",{value:M,onChange:a=>N(a.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all bg-white disabled:bg-slate-50 disabled:text-slate-400",disabled:0===U.length,children:[(0,b.jsx)("option",{value:"ALL",children:"Todos los Procesos"}),U.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})})]}),(O||"ALL"!==K||"ALL"!==M)&&(0,b.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-xs",children:[(0,b.jsx)("span",{className:"text-slate-500 font-medium",children:"Filtros activos:"}),O&&(0,b.jsxs)("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 rounded-md border border-purple-200 flex items-center gap-1",children:['"',O,'"',(0,b.jsx)("button",{onClick:()=>P(""),className:"hover:text-purple-900",children:(0,b.jsx)(u.X,{size:12,weight:"bold"})})]}),"ALL"!==K&&(0,b.jsxs)("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 rounded-md border border-purple-200 flex items-center gap-1",children:[K,(0,b.jsx)("button",{onClick:()=>L("ALL"),className:"hover:text-purple-900",children:(0,b.jsx)(u.X,{size:12,weight:"bold"})})]}),"ALL"!==M&&(0,b.jsxs)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-md border border-blue-200 flex items-center gap-1",children:[M,(0,b.jsx)("button",{onClick:()=>N("ALL"),className:"hover:text-blue-900",children:(0,b.jsx)(u.X,{size:12,weight:"bold"})})]}),(0,b.jsx)("button",{onClick:()=>{P(""),L("ALL"),N("ALL")},className:"ml-auto text-slate-500 hover:text-slate-700 font-medium",children:"Limpiar todo"})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[V.map(c=>{let d=f.DB.surveyResponses.some(b=>b.surveyId===c.id&&b.respondentId===a?.id);return(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-xl p-5 hover:shadow-lg transition-all group relative flex flex-col",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,b.jsx)("div",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider ${"OPEN"===c.status?"bg-green-100 text-green-700":"DRAFT"===c.status?"bg-yellow-100 text-yellow-700":"bg-slate-100 text-slate-500"}`,children:c.status}),S&&(0,b.jsx)("button",{onClick:()=>{C(c),n("BUILDER")},className:"text-slate-400 hover:text-blue-600 p-1",children:(0,b.jsx)(r.Gear,{size:18})})]}),(0,b.jsx)("h3",{className:"font-bold text-slate-800 mb-1 line-clamp-1",children:c.title}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mb-4 line-clamp-2 min-h-[2.5em]",children:c.description||"Sin descripción"}),(c.unit||c.process||!c.unit&&!c.process)&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[c.unit&&(0,b.jsx)("span",{className:"px-2 py-0.5 bg-purple-50 border border-purple-200 text-purple-700 rounded text-[10px] font-semibold uppercase tracking-wide",children:c.unit}),c.process&&(0,b.jsx)("span",{className:"px-2 py-0.5 bg-blue-50 border border-blue-200 text-blue-700 rounded text-[10px] font-semibold",children:c.process}),!c.unit&&!c.process&&(0,b.jsx)("span",{className:"px-2 py-0.5 bg-slate-50 border border-slate-200 text-slate-500 rounded text-[10px] font-bold uppercase",children:"GLOBAL"})]}),c.questions.length>20&&(0,b.jsx)("div",{className:"absolute top-14 right-5 text-[10px] px-2 py-0.5 bg-blue-50 text-blue-600 rounded-full font-bold border border-blue-100",children:"Diagnóstico"}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-500 border-t border-slate-50 pt-3 mt-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(p.Users,{size:14})," ","TENANT"===c.audience?l("survey_audience_global"):l("survey_audience_unit")]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(E.ListChecks,{size:14})," ",c.questions.length," ",l("survey_questions_count")]})]}),"OPEN"===c.status?(0,b.jsx)("div",{className:"mt-4",children:d?(0,b.jsxs)("button",{disabled:!0,className:"w-full bg-green-50 text-green-600 border border-green-200 rounded-lg py-2 text-sm font-bold flex items-center justify-center gap-2 cursor-default mb-3",children:[(0,b.jsx)(o.CheckCircle,{weight:"fill",size:16})," ",l("survey_completed_btn")]}):(0,b.jsx)("button",{onClick:()=>{H(c),n("RESPOND")},className:"w-full bg-blue-600 text-white rounded-lg py-2 text-sm font-bold hover:bg-blue-700 transition-colors shadow-blue-500/20 shadow-lg mb-3",children:l("survey_respond_btn")})}):(0,b.jsx)("div",{className:"mt-4 mb-3",children:(0,b.jsxs)("div",{className:"bg-slate-50 rounded-lg p-2 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-xs text-slate-500 font-medium",children:[c.responsesCount," respuestas"]}),(0,b.jsx)("span",{className:"text-xs font-bold text-slate-400 capitalize",children:"DRAFT"===c.status?"Borrador":"Cerrada"})]})}),S&&(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>{H(c),n("RESPOND")},className:"flex-1 px-3 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 font-bold text-xs flex items-center justify-center gap-2 transition-colors",title:"Ver cómo ven los usuarios la encuesta",children:[(0,b.jsx)(t.PaperPlaneRight,{size:16,weight:"bold"}),"Vista Previa"]}),(0,b.jsxs)("button",{onClick:()=>{C(c),n("BUILDER")},className:"flex-1 px-3 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 font-bold text-xs flex items-center justify-center gap-2 transition-colors",title:"Editar contenido y configuración",children:[(0,b.jsx)(r.Gear,{size:16,weight:"bold"}),"Editar"]}),(0,b.jsx)("button",{onClick:()=>{J(c),n("RESULTS")},className:"px-3 py-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 flex items-center justify-center transition-colors",title:l("survey_view_results"),children:(0,b.jsx)(s.ChartBar,{size:18})})]}),!S&&c.ownerId===a?.id&&(0,b.jsxs)("button",{onClick:()=>{J(c),n("RESULTS")},className:"w-full mt-2 px-3 py-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 flex items-center justify-center gap-2 text-xs font-bold",title:l("survey_view_results"),children:[(0,b.jsx)(s.ChartBar,{size:16})," Ver Resultados"]})]},c.id)}),0===V.length&&(0,b.jsxs)("div",{className:"col-span-full py-12 text-center text-slate-400 bg-white border border-dashed border-slate-300 rounded-xl",children:[(0,b.jsx)(k.ClipboardText,{size:48,className:"mx-auto mb-3 opacity-30"}),(0,b.jsx)("p",{children:l("survey_empty_title")}),S&&(0,b.jsx)("button",{onClick:()=>n("TEMPLATE_SELECT"),className:"text-blue-600 text-sm font-bold mt-2 hover:underline",children:l("survey_empty_create_first")})]})]})})]})}function ag({value:a,max:c=100,color:d="bg-blue-600",height:e="h-2"}){let f=Math.min(100,Math.max(0,a/c*100));return(0,b.jsx)("div",{className:`w-full bg-slate-100 rounded-full overflow-hidden ${e}`,children:(0,b.jsx)("div",{className:`h-full ${d} transition-all duration-500`,style:{width:`${f}%`}})})}function ah({value:a,p25:c=45,p75:d=75}){return(0,b.jsxs)("div",{className:"relative h-6 w-full mt-2",children:[(0,b.jsx)("div",{className:"absolute top-1/2 left-0 w-full h-1.5 bg-slate-100 rounded-full -translate-y-1/2"}),(0,b.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-slate-300 rounded-full border-2 border-white shadow-sm z-10",style:{left:`${c}%`},title:`P25: ${c}`}),(0,b.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-slate-300 rounded-full border-2 border-white shadow-sm z-10",style:{left:`${d}%`},title:`P75: ${d}`}),(0,b.jsx)("div",{className:`absolute top-1/2 -translate-y-1/2 w-4 h-4 rounded-full border-2 border-white shadow-md z-20 transition-all duration-500 flex items-center justify-center ${a>=d?"bg-green-500":a>=c?"bg-blue-500":"bg-red-500"}`,style:{left:`${a}%`},title:`T\xfa: ${a}`,children:(0,b.jsx)("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),(0,b.jsxs)("div",{className:"absolute top-5 w-full flex justify-between text-[9px] text-slate-400 font-mono",children:[(0,b.jsxs)("span",{style:{left:`${c}%`,position:"absolute",transform:"translateX(-50%)"},children:["P25:",c]}),(0,b.jsxs)("span",{style:{left:`${a}%`,position:"absolute",transform:"translateX(-50%)",fontWeight:"bold",color:"#334155"},children:["Tú:",a]}),(0,b.jsxs)("span",{style:{left:`${d}%`,position:"absolute",transform:"translateX(-50%)"},children:["P75:",d]})]})]})}function ai({score:a}){let{t:c}=(0,e.useTranslation)();return a>=75?(0,b.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 border border-green-200",children:c("badge_high")}):a>=50?(0,b.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-yellow-100 text-yellow-700 border border-yellow-200",children:c("badge_medium")}):(0,b.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 border border-red-200",children:c("badge_low")})}function aj({survey:a,onBack:d}){let{t:h}=(0,e.useTranslation)(),[k,l]=(0,c.useState)(f.DB.surveyResponses.filter(b=>b.surveyId===a.id));(0,c.useEffect)(()=>{let b=setInterval(()=>{let b=f.DB.surveyResponses.filter(b=>b.surveyId===a.id);b.length!==k.length&&l(b)},2e3);return()=>clearInterval(b)},[a.id,k.length]);let[m,o]=(0,c.useState)("ALL"),[p,r]=(0,c.useState)("ALL"),[t,u]=(0,c.useState)("ALL"),[v,w]=(0,c.useState)("ALL"),x=(0,c.useMemo)(()=>{let b=f.DB.users.filter(b=>b.tenantId===a.tenantId||"global"===b.tenantId);return"UNIT"===a.audience&&a.targetUnitId&&(b=b.filter(b=>b.unit===a.targetUnitId)),b},[a]),y=(0,c.useMemo)(()=>k.map(a=>{let b=f.DB.users.find(b=>b.id===a.respondentId),c=b?.location||(Math.random()>.5?"Sede Central":"Sucursal Norte"),d=(b?.name||"").endsWith("a")?"Femenino":"Masculino",e=b?.unit||"General";return{...a,user:b,meta:{location:c,unit:e,gender:d}}}),[k]),C=(0,c.useMemo)(()=>y.filter(a=>("ALL"===m||a.meta.location===m)&&("ALL"===p||a.meta.unit===p)&&("ALL"===t||a.meta.gender===t)&&("ALL"===v||a.respondentId===v)),[y,m,p,t,v]),D=C.length,E=(0,c.useMemo)(()=>x.filter(a=>(a.location,a.unit,(a.name||"").endsWith("a"),("ALL"===m||a.location===m)&&("ALL"===p||a.unit===p)&&("ALL"===t||(a.name.endsWith("a")?"Femenino":"Masculino")===t)&&("ALL"===v||a.id===v))),[x,m,p,t,v]).length||1,F=Array.from(new Set(x.map(a=>a.location||"Sede Central"))).filter(Boolean),G=Array.from(new Set(x.map(a=>a.unit))).filter(Boolean),I=["Masculino","Femenino"],L=a.questions.length>50,P=f.DB.tenants.find(b=>b.id===a.tenantId),R=P?.sector||"Consultoría Empresarial",T=i.SECTOR_BENCHMARKS_LIST.find(a=>a.sector===R)||i.SECTOR_BENCHMARKS_LIST[0],X=a=>{if(0===D)return null;let b=C.map(b=>b.answers[a.id]).filter(a=>void 0!==a);if("LIKERT"===a.type||"NPS"===a.type||"RATING"===a.type){let a=b.reduce((a,b)=>(a||0)+Number(b||0),0)/b.length,c={1:0,2:0,3:0,4:0,5:0};return b.forEach(a=>{let b=Math.round(Number(a));void 0!==c[b]&&c[b]++}),{type:"AVG",value:a.toFixed(1),rawValue:a,distribution:c,count:b.length}}if("MULTI"===a.type||"CHECKBOX"===a.type||"DROPDOWN"===a.type||"YESNO"===a.type){let a={};return b.forEach(b=>{Array.isArray(b)?b.forEach(b=>{a[String(b)]=(a[String(b)]||0)+1}):a[String(b)]=(a[String(b)]||0)+1}),{type:"COUNT",counts:a,total:b.length}}return{type:"TEXT",lastAnswers:b.filter(a=>"string"==typeof a).slice(-5)}},Y=({distribution:a,total:c})=>{if(!c)return null;let d=["bg-red-500","bg-orange-500","bg-yellow-400","bg-lime-500","bg-green-600"];return(0,b.jsxs)("div",{className:"w-full mt-2",children:[(0,b.jsx)("div",{className:"flex h-3 w-full rounded-full overflow-hidden bg-slate-100",children:[1,2,3,4,5].map((e,f)=>{let g=a[e]||0,h=g/c*100;return 0===h?null:(0,b.jsx)("div",{className:`h-full ${d[f]}`,style:{width:`${h}%`},title:`Opci\xf3n ${e}: ${g} votos (${Math.round(h)}%)`},e)})}),(0,b.jsx)("div",{className:"flex justify-between mt-1 px-1",children:[1,2,3,4,5].map((d,e)=>{let f=Math.round((a[d]||0)/c*100);return(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("span",{className:`text-[8px] font-bold ${f>0?"text-slate-600":"text-slate-300"}`,children:d}),(0,b.jsxs)("span",{className:`text-[8px] ${f>0?"text-slate-500":"text-transparent"}`,children:[f,"%"]})]},d)})})]})},Z=(0,c.useMemo)(()=>{if(!L||0===D)return null;let b={},c=0,d=0,e=0;g.forEach(f=>{let g=a.questions.filter(a=>a.section===f.id);if(0===g.length)return;let h=0,i=0;g.forEach(a=>{let b=X(a);if(b&&"AVG"===b.type){let a=(Number(b.value)-1)*25;h+=a,i++}});let j=i>0?h/i:0;b[f.id]=Math.round(j),c+=j,d+=j*(f.weightAIQ||f.weight),e+=f.weightAIQ||f.weight});let f=g.map(a=>({...a,score:b[a.id]||0})).sort((a,b)=>b.score-a.score);return{dq:Math.round(c/g.length),aiq:Math.round(d/e),dimensions:b,sortedDims:f}},[a,k,L,D]),[$,_]=(0,c.useState)(g[0].id),aa=g.find(a=>a.id===$)||g[0],ab=(0,c.useMemo)(()=>{let b=a.questions.filter(a=>a.section===aa.id);if(0===b.length)return[];let c={estrategia:["Alineación Estratégica","Hoja de Ruta IA","Planificación de Inversiones","Cultura de Innovación","Gestión del Cambio"],infra:["Arquitectura Cloud","Gobierno de Datos","Ciberseguridad","Integración de Sistemas","Calidad de Datos"],talento:["Capacidades Digitales","Upskilling/Reskilling","Atracción de Talento","Formas de Trabajo (Agile)","Liderazgo Digital"],gob:["Comités y Roles","Políticas de Uso","Gestión de Riesgos","Ética de IA","Medición de Valor"],procesos:["Automatización (RPA)","Optimización de Procesos","Integración de Flujos","Monitoreo en Tiempo Real","Adopción de Herramientas"],cx:["Customer Journey","Personalización","Omnicanalidad","Feedback Loop","Privacidad del Cliente"]}[aa.id]||["Sub-dim 1","Sub-dim 2","Sub-dim 3","Sub-dim 4","Sub-dim 5"],d=Math.ceil(b.length/c.length);return c.map((a,c)=>{let e=b.slice(c*d,(c+1)*d),f=0;e.forEach(a=>{let b=X(a);b&&"AVG"===b.type&&(f+=(Number(b.value)-1)*25)});let g=e.length>0?Math.round(f/e.length):0;return{name:a,score:g,benchmark:Math.min(100,Math.max(0,g+(20*Math.random()-10)))}})},[aa,a,k]),[ac,ad]=(0,c.useState)("GENERAL");return(0,b.jsxs)("div",{className:"h-full flex flex-col bg-slate-50",children:[(0,b.jsxs)("div",{className:"bg-white border-b border-slate-200 px-8 py-5 flex justify-between items-center shadow-sm z-10 sticky top-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:d,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors",children:(0,b.jsx)(B.ArrowLeft,{size:20,weight:"bold"})}),(0,b.jsx)("div",{children:(0,b.jsxs)("h1",{className:"font-bold text-slate-900 text-xl flex items-center gap-2",children:[a.title,L&&(0,b.jsxs)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-md uppercase tracking-wider font-bold border border-blue-200",children:["Sector: ",R]})]})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 font-bold rounded-lg hover:bg-blue-100 transition-colors border border-blue-200 text-sm",children:[(0,b.jsx)(A.DownloadSimple,{size:18,weight:"bold"})," PDF"]}),(0,b.jsx)("button",{className:"p-2 bg-slate-50 text-slate-500 rounded-lg hover:bg-slate-100 border border-slate-200",children:(0,b.jsx)(O.ArrowClockwise,{size:20})})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-wrap gap-4 items-center animate-fadeIn",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-xs uppercase tracking-wider",children:[(0,b.jsx)(Q,{})," Filtros:"]}),(0,b.jsxs)("select",{value:m,onChange:a=>o(a.target.value),className:"bg-slate-50 border border-slate-200 text-slate-700 text-sm rounded-lg p-2 outline-none focus:ring-2 focus:ring-blue-100",children:[(0,b.jsx)("option",{value:"ALL",children:"Todas las Sedes"}),F.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsxs)("select",{value:p,onChange:a=>r(a.target.value),className:"bg-slate-50 border border-slate-200 text-slate-700 text-sm rounded-lg p-2 outline-none focus:ring-2 focus:ring-blue-100",children:[(0,b.jsx)("option",{value:"ALL",children:"Todas las Unidades"}),G.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsxs)("select",{value:t,onChange:a=>u(a.target.value),className:"bg-slate-50 border border-slate-200 text-slate-700 text-sm rounded-lg p-2 outline-none focus:ring-2 focus:ring-blue-100",children:[(0,b.jsx)("option",{value:"ALL",children:"Todos los Géneros"}),I.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),!a.isAnonymous&&(0,b.jsxs)("select",{value:v,onChange:a=>w(a.target.value),className:"bg-slate-50 border border-slate-200 text-slate-700 text-sm rounded-lg p-2 outline-none focus:ring-2 focus:ring-blue-100",children:[(0,b.jsx)("option",{value:"ALL",children:"Todos los Usuarios"}),x.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),("ALL"!==m||"ALL"!==p||"ALL"!==t||"ALL"!==v)&&(0,b.jsx)("button",{onClick:()=>{o("ALL"),r("ALL"),u("ALL"),w("ALL")},className:"text-red-500 text-xs font-bold hover:underline ml-auto",children:"Borrar Filtros"})]}),(0,b.jsxs)("div",{className:"flex p-1 bg-slate-200/60 rounded-xl w-fit mb-6",children:[(0,b.jsxs)("button",{onClick:()=>ad("GENERAL"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${"GENERAL"===ac?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[(0,b.jsx)(z.ChartPieSlice,{size:18,weight:"GENERAL"===ac?"fill":"regular"}),h("results_tab_general")]}),L&&(0,b.jsxs)("button",{onClick:()=>ad("DIMENSIONS"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${"DIMENSIONS"===ac?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[(0,b.jsx)(s.ChartBar,{size:18,weight:"DIMENSIONS"===ac?"fill":"regular"}),h("results_tab_dimensions")]}),(0,b.jsxs)("button",{onClick:()=>ad("ANALYTICS"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${"ANALYTICS"===ac?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[(0,b.jsx)(N.UsersThree,{size:18,weight:"ANALYTICS"===ac?"fill":"regular"}),h("results_tab_analytics")]}),L&&(0,b.jsxs)("button",{onClick:()=>ad("ACTIONS"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${"ACTIONS"===ac?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[(0,b.jsx)(K.Lightning,{size:18,weight:"ACTIONS"===ac?"fill":"regular"}),h("results_tab_actions")]})]}),"GENERAL"===ac&&(0,b.jsx)(b.Fragment,{children:L&&Z&&T?(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"space-y-8 animate-fadeIn",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-blue-50/50 p-6 rounded-2xl border border-blue-100 flex flex-col justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-bold text-slate-500 mb-1",children:h("results_dq")}),(0,b.jsxs)("div",{className:"flex items-end gap-3",children:[(0,b.jsxs)("div",{className:"text-6xl font-black text-blue-600 tracking-tighter",children:[Z.dq.toFixed(1),"%"]}),(0,b.jsx)(ai,{score:Z.dq})]})]}),(0,b.jsx)("div",{className:"text-xs text-slate-400 mt-4 font-medium",children:h("results_dq_desc")})]}),(0,b.jsxs)("div",{className:"bg-teal-50/50 p-6 rounded-2xl border border-teal-100 flex flex-col justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-bold text-slate-500 mb-1",children:h("results_aiq")}),(0,b.jsxs)("div",{className:"flex items-end gap-3",children:[(0,b.jsxs)("div",{className:"text-6xl font-black text-teal-600 tracking-tighter",children:[Z.aiq.toFixed(1),"%"]}),(0,b.jsx)(ai,{score:Z.aiq})]})]}),(0,b.jsx)("div",{className:"text-xs text-slate-400 mt-4 font-medium",children:h("results_aiq_desc")})]})]}),(0,b.jsxs)("div",{className:"bg-white p-8 rounded-2xl border border-slate-200 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)(Q,{size:24,className:"text-orange-500",weight:"duotone"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-slate-800 text-lg",children:h("results_benchmark_title")}),(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:[h("results_benchmark_sector"),": ",R," | ",h("results_benchmark_expected"),": ",(0,b.jsxs)("span",{className:"font-bold text-slate-700",children:[((T.maturity?.metric??T.averageMaturity/5)*100).toFixed(0),"%"]})]})]})]}),(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsx)("div",{className:"grid grid-cols-12 gap-x-4 gap-y-6",children:Z.sortedDims.map(a=>{let c=(T.maturity?.metric??T.averageMaturity/5)*100,d=a.name.length%5*3,e=c-10-d,f=c+10+d,g=a.score-c,h=a.score>=f,i=a.score<=e;return(0,b.jsxs)("div",{className:"col-span-12 bg-slate-50/50 rounded-xl p-4 border border-slate-100",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${h?"bg-green-500":i?"bg-orange-500":"bg-blue-500"}`}),(0,b.jsx)("span",{className:"font-bold text-slate-700 text-sm",children:a.name})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[h&&(0,b.jsx)("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-[10px] font-bold rounded border border-green-200",children:"Top 75%"}),i&&(0,b.jsx)("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-[10px] font-bold rounded border border-red-200",children:"Bottom 25%"}),(0,b.jsxs)("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded border ${g>=0?"bg-slate-100 text-slate-600 border-slate-200":"bg-red-50 text-red-600 border-red-100"}`,children:[g>0?"+":"",Math.round(g)]})]})]}),(0,b.jsx)(ah,{value:a.score,p25:Math.round(e),p75:Math.round(f)})]},a.id)})})})]})]})}):(0,b.jsx)("div",{className:"space-y-6 animate-fadeIn",children:(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[(0,b.jsx)("h3",{className:"font-bold text-slate-800 text-lg mb-4",children:"Resultados de la Encuesta"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.questions.map((a,c)=>{let d=X(a);return d?(0,b.jsxs)("div",{className:"p-4 rounded-xl bg-slate-50 border border-slate-100",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2 gap-4",children:[(0,b.jsxs)("span",{className:"font-bold text-slate-700 text-sm",children:[c+1,". ",a.title]}),"AVG"===d.type&&(0,b.jsx)("span",{className:"font-black text-blue-600 text-lg",children:d.value})]}),"AVG"===d.type&&(0,b.jsx)(Y,{distribution:d.distribution||{},total:d.count||0}),"COUNT"===d.type&&(0,b.jsx)("div",{className:"mt-3 space-y-2",children:Object.entries(d.counts||{}).map(([a,c])=>{let e=Math.round(c/(d.total||1)*100);return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex justify-between text-[10px] font-bold text-slate-500",children:[(0,b.jsx)("span",{children:a}),(0,b.jsxs)("span",{children:[c," (",e,"%)"]})]}),(0,b.jsx)("div",{className:"w-full h-1.5 bg-slate-100 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-blue-500",style:{width:`${e}%`}})})]},a)})}),"TEXT"===d.type&&d.lastAnswers&&d.lastAnswers.length>0&&(0,b.jsxs)("div",{className:"bg-white p-3 rounded text-sm text-slate-600 italic mt-2 border border-slate-200",children:['"',d.lastAnswers[0],'" ',(0,b.jsxs)("span",{className:"text-xs text-slate-400 not-italic ml-2",children:["(+ ",Math.max(0,d.lastAnswers.length-1)," más)"]})]})]},a.id):null})})]})})}),"DIMENSIONS"===ac&&(0,b.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-center gap-6",children:[(0,b.jsxs)("div",{className:"flex-1 w-full",children:[(0,b.jsx)("h3",{className:"font-bold text-slate-800 mb-1",children:"Análisis por Dimensión"}),(0,b.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,b.jsx)("select",{value:$,onChange:a=>_(a.target.value),className:"w-full appearance-none bg-slate-50 border border-slate-200 text-slate-700 font-bold text-sm rounded-lg p-3 pr-8 outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-400 transition-all cursor-pointer",children:g.map((a,c)=>(0,b.jsxs)("option",{value:a.id,children:["D",c+1,": ",a.name]},a.id))}),(0,b.jsx)(J.CaretDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 pointer-events-none",weight:"bold"})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-8 bg-slate-50 px-6 py-3 rounded-xl border border-slate-100",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"text-4xl font-black text-blue-600",children:[Z?.dimensions?.[$]||0,"%"]}),(0,b.jsx)(ai,{score:Z?.dimensions?.[$]||0})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-slate-50 px-6 py-3 border-b border-slate-100 text-xs font-bold text-slate-500 uppercase",children:"Subdimensiones"}),(0,b.jsx)("div",{className:"divide-y divide-slate-100",children:ab.map((a,c)=>(0,b.jsxs)("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,b.jsx)("h5",{className:"font-bold text-slate-700",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"text-lg font-bold text-slate-800",children:[a.score,"%"]}),(0,b.jsxs)("span",{className:"text-xs text-slate-400 font-mono",children:["(Bm: ",Math.round(a.benchmark),"%)"]}),(0,b.jsx)(ai,{score:a.score})]})]}),(0,b.jsx)(ag,{value:a.score,color:a.score>=75?"bg-green-500":a.score>=50?"bg-blue-500":"bg-orange-400",height:"h-2"})]},c))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-green-50/50 rounded-2xl border border-green-100 p-6",children:[(0,b.jsxs)("h4",{className:"flex items-center gap-2 font-bold text-green-800 mb-4",children:[(0,b.jsx)(S,{})," Dimensiones más Fuertes"]}),(0,b.jsx)("ul",{className:"space-y-3",children:(Z?.sortedDims||[]).slice(0,3).map((a,c)=>(0,b.jsxs)("li",{className:"flex justify-between items-center bg-white p-3 rounded-lg border border-green-100 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"font-black text-green-200 text-xl",children:c+1}),(0,b.jsx)("span",{className:"font-bold text-slate-700 text-sm",children:a.name})]}),(0,b.jsxs)("span",{className:"font-bold text-green-600",children:[a.score,"%"]})]},c))})]}),(0,b.jsxs)("div",{className:"bg-red-50/50 rounded-2xl border border-red-100 p-6",children:[(0,b.jsxs)("h4",{className:"flex items-center gap-2 font-bold text-red-800 mb-4",children:[(0,b.jsx)(U,{})," Áreas de Mejora"]}),(0,b.jsx)("ul",{className:"space-y-3",children:[...Z?.sortedDims||[]].reverse().slice(0,3).map((a,c)=>(0,b.jsxs)("li",{className:"flex justify-between items-center bg-white p-3 rounded-lg border border-red-100 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"font-black text-red-200 text-xl",children:c+1}),(0,b.jsx)("span",{className:"font-bold text-slate-700 text-sm",children:a.name})]}),(0,b.jsxs)("span",{className:"font-bold text-red-600",children:[a.score,"%"]})]},c))})]})]})]}),"ANALYTICS"===ac&&(0,b.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-100 p-6 rounded-2xl flex items-start gap-4",children:[(0,b.jsx)(V.Buildings,{size:32,className:"text-blue-600",weight:"duotone"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-blue-900 text-lg",children:"Analítica de Participación y Resultados"}),(0,b.jsx)("p",{className:"text-blue-700/80 text-sm",children:"Desglose de datos demográficos y respuestas."})]})]}),(0,b.jsxs)("div",{className:"bg-white p-8 rounded-2xl border border-slate-200 shadow-sm",children:[(0,b.jsxs)("h4",{className:"font-bold text-slate-800 mb-6 flex items-center gap-2",children:[(0,b.jsx)(z.ChartPieSlice,{className:"text-indigo-500"})," Participación General"]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-around gap-8",children:[(0,b.jsxs)("div",{className:"relative w-48 h-48 flex items-center justify-center",children:[(0,b.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[(0,b.jsx)("circle",{cx:"96",cy:"96",r:"88",stroke:"currentColor",strokeWidth:"12",fill:"transparent",className:"text-slate-100"}),(0,b.jsx)("circle",{cx:"96",cy:"96",r:"88",stroke:"currentColor",strokeWidth:"12",fill:"transparent",strokeDasharray:2*Math.PI*88,strokeDashoffset:2*Math.PI*88*(1-D/E),className:"text-blue-600 transition-all duration-1000 ease-out",strokeLinecap:"round"})]}),(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,b.jsxs)("span",{className:"text-4xl font-black text-slate-800",children:[Math.round(D/E*100),"%"]}),(0,b.jsx)("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Respuesta"})]})]}),(0,b.jsxs)("div",{className:"flex-1 w-full max-w-md space-y-4",children:[(0,b.jsxs)("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600",children:"Usuarios Invitados"}),(0,b.jsx)("span",{className:"text-xl font-black text-slate-800",children:E})]}),(0,b.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-slate-400 w-full"})})]}),(0,b.jsxs)("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-bold text-green-700",children:"Respuestas Completadas"}),(0,b.jsx)("span",{className:"text-xl font-black text-green-600",children:D})]}),(0,b.jsx)("div",{className:"w-full bg-green-200 rounded-full h-2 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-green-500",style:{width:`${D/E*100}%`}})})]}),(0,b.jsxs)("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-100",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-bold text-orange-700",children:"En Progreso / Pendientes"}),(0,b.jsx)("span",{className:"text-xl font-black text-orange-600",children:E-D})]}),(0,b.jsx)("div",{className:"w-full bg-orange-200 rounded-full h-2 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-orange-500",style:{width:`${(E-D)/E*100}%`}})})]})]})]})]}),[{title:"Resultados por Sede",key:"location",icon:V.Buildings,options:F},{title:"Resultados por Unidad",key:"unit",icon:M.Briefcase,options:G},{title:"Resultados por Género",key:"gender",icon:H.User,options:I}].map(c=>(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[(0,b.jsxs)("h4",{className:"font-bold text-slate-800 mb-6 flex items-center gap-2",children:[(0,b.jsx)(c.icon,{className:"text-slate-400",size:20})," ",c.title]}),(0,b.jsxs)("div",{className:"space-y-4",children:[c.options.map(d=>{let e=C.filter(a=>a.meta[c.key]===d),f=e.length;if(0===f)return null;let g=0,h=0,i=a.questions.filter(a=>["LIKERT","RATING","NPS"].includes(a.type));i.length>0&&e.forEach(a=>{i.forEach(b=>{let c=a.answers[b.id];void 0!==c&&(g+=(Number(c)-1)*25,h++)})});let j=h>0?Math.round(g/h):0,k=Math.round(f/D*100);return(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"font-bold text-slate-700",children:d}),(0,b.jsxs)("div",{className:"flex gap-4 text-xs",children:[(0,b.jsxs)("span",{className:"text-slate-500",children:[f," respuestas"]}),(0,b.jsxs)("span",{className:"font-bold text-slate-800",children:[j,"% Score"]})]})]}),(0,b.jsx)("div",{className:"w-full bg-slate-100 rounded-full h-2 mb-1 overflow-hidden flex",children:(0,b.jsx)("div",{className:`h-full ${j>=75?"bg-green-500":j>=50?"bg-blue-500":"bg-orange-500"}`,style:{width:`${j}%`}})}),(0,b.jsx)("div",{className:"w-full bg-slate-50 rounded-full h-1 overflow-hidden",title:"Participación relativa",children:(0,b.jsx)("div",{className:"h-full bg-slate-300",style:{width:`${k}%`}})})]},d)}),0===C.length&&(0,b.jsx)("div",{className:"text-slate-400 italic text-sm text-center py-4",children:"Sin datos para mostrar con los filtros actuales."})]})]},c.key))]}),"ACTIONS"===ac&&(0,b.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)(K.Lightning,{size:24,className:"text-orange-500",weight:"fill"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-slate-800 text-lg",children:"Líneas de Acción"}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Recomendaciones priorizadas basadas en sus dimensiones más débiles"})]})]}),(0,b.jsx)("div",{className:"space-y-6",children:Z?.sortedDims&&[...Z.sortedDims].reverse().slice(0,3).map((a,c)=>{let d=T?Math.round((T.maturity?.metric??T.averageMaturity/5)*100):0;return(0,b.jsxs)("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-slate-50 px-6 py-4 flex justify-between items-center border-b border-slate-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold shadow-sm ${0===c?"bg-red-500":"bg-orange-500"}`,children:["D",g.findIndex(b=>b.id===a.id)+1]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-slate-800",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:["Puntaje: ",(0,b.jsxs)("span",{className:"font-bold text-red-500",children:[a.score,"%"]})," | Bm: ",d,"%"]})]})]}),(0,b.jsxs)("span",{className:"px-3 py-1 bg-red-100 text-red-700 text-xs font-bold rounded-full",children:["Prioridad ",c+1]})]}),(0,b.jsx)("div",{className:"p-6 bg-white space-y-3",children:[1,2,3,4].map(c=>(0,b.jsxs)("div",{className:"flex gap-3 p-3 rounded-lg bg-blue-50/30",children:[(0,b.jsx)(n.CaretRight,{size:16,className:"text-blue-500 mt-0.5",weight:"bold"}),(0,b.jsxs)("span",{className:"text-sm text-slate-700",children:["Acción recomendada específica para ",a.name.toLowerCase()," #",c,"..."]})]},c))})]},a.id)})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[(0,b.jsxs)("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[(0,b.jsx)(S,{className:"text-green-500"})," Mejores Prácticas del Sector"]}),(0,b.jsx)("ul",{className:"space-y-3",children:(T.practices||[]).slice(0,5).map((a,c)=>(0,b.jsxs)("li",{className:"text-sm text-slate-600 flex gap-2",children:[(0,b.jsx)(j.Plus,{size:14,className:"text-green-500 mt-1 flex-shrink-0",weight:"bold"}),a]},c))})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[(0,b.jsxs)("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[(0,b.jsx)(q.Globe,{className:"text-blue-500"})," Prioridades del Sector"]}),(0,b.jsx)("ol",{className:"list-decimal pl-4 space-y-3 text-sm text-slate-600 marker:font-bold marker:text-blue-500",children:(T.priorities||[]).map((a,c)=>(0,b.jsx)("li",{children:a},c))})]})]}),(0,b.jsxs)("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200",children:[(0,b.jsxs)("h4",{className:"font-bold text-slate-700 text-sm mb-3 flex items-center gap-2",children:[(0,b.jsx)(W.Lightbulb,{className:"text-yellow-500",weight:"fill"})," Líderes del Sector"]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:(T.leaders||[]).map((a,c)=>(0,b.jsx)("span",{className:"px-3 py-1 bg-white border border-slate-200 rounded-lg text-xs font-bold text-slate-600 shadow-sm",children:a},c))})]})]})]})})]})}function ak({survey:a,currentUser:d,onSubmit:f,onCancel:h}){let{t:i}=(0,e.useTranslation)(),[j,k]=(0,c.useState)(()=>({})),[l,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,v]=(0,c.useState)(null),w=(0,c.useMemo)(()=>Array.from(new Set(a.questions.map(a=>a.section).filter(Boolean))),[a]),x=w.length>0,[z,A]=(0,c.useState)(x?w[0]:""),[B,C]=(0,c.useState)(0);(0,c.useEffect)(()=>{let b=setTimeout(()=>{Object.keys(j).length>0&&!O&&(r(!0),localStorage.setItem(`survey_progress_${a.id}`,JSON.stringify(j)),setTimeout(()=>{r(!1),v(new Date)},800))},1500);return()=>clearTimeout(b)},[j,a.id]),(0,c.useEffect)(()=>{C(0),window.scrollTo({top:0,behavior:"smooth"})},[z]);let D=(0,c.useMemo)(()=>x?a.questions.filter(a=>a.section===z):a.questions,[a,x,z]),E=(0,c.useMemo)(()=>{let a=5*B;return D.slice(a,a+5)},[D,B]),F=Math.ceil(D.length/5),G=0===B,H=B>=F-1,J=w.indexOf(z)===w.length-1,K=(a,b)=>{k(c=>({...c,[a]:b}))},L=()=>{if(window.scrollTo({top:0,behavior:"smooth"}),H)if(J)M();else{let a=w.indexOf(z)+1;A(w[a])}else C(a=>a+1)},M=()=>{let b=a.questions.filter(a=>a.required&&!j[a.id]);if(b.length>0){let a=new Set(b.map(a=>a.id));if(E.some(b=>a.has(b.id)))alert("Por favor responde las preguntas obligatorias de esta página.");else{if(!confirm(`A\xfan tienes ${b.length} preguntas sin responder en otras secciones. \xbfDeseas enviar de todos modos?`))return;N()}return}N()},N=()=>{if(O)return void p(!0);let b={id:`R-${Date.now()}`,surveyId:a.id,tenantId:a.tenantId||d?.tenantId||"",userId:d?.id||"anonymous-user",respondentId:d?.id||"anonymous-user",answers:j,submittedAt:new Date().toISOString()};p(!0),localStorage.removeItem(`survey_progress_${a.id}`),setTimeout(()=>f(b),2e3)};if(l)return(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center bg-white animate-fadeIn",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-6 animate-bounce",children:(0,b.jsx)(y,{size:40,weight:"fill"})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:i("survey_thank_you_title")}),(0,b.jsx)("p",{className:"text-slate-500",children:i("survey_thank_you_desc")})]});let O=a.previewMode,P=a=>{let b=g.find(b=>b.id===a);return b?b.name:a.charAt(0).toUpperCase()+a.slice(1)},Q=D.length,R=D.filter(a=>j[a.id]).length,S=Q>0?Math.round(R/Q*100):0,T=a.questions.length,U=Math.round(Object.keys(j).length/T*100);return(0,b.jsxs)("div",{className:"h-full flex flex-col bg-slate-50 overflow-hidden relative",children:[(0,b.jsxs)("div",{className:"bg-white border-b border-slate-200 z-10",children:[O&&(0,b.jsx)("div",{className:"bg-orange-100 text-orange-800 text-xs font-bold text-center py-1 border-b border-orange-200",children:"VISTA PREVIA - LAS RESPUESTAS NO SE GUARDARÁN"}),(0,b.jsxs)("div",{className:"px-6 py-3 flex justify-between items-center",children:[(0,b.jsxs)("button",{onClick:h,className:"text-slate-400 hover:text-slate-600 flex items-center gap-1 text-sm font-medium",children:[(0,b.jsx)(u.X,{size:18})," ",i("survey_exit")]}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:i("survey_global_progress")}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-32 h-2 bg-slate-100 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-slate-800",style:{width:`${U}%`}})}),(0,b.jsxs)("span",{className:"text-xs font-bold text-slate-700",children:[U,"%"]})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-400 w-24 justify-end",children:q?(0,b.jsxs)("span",{className:"flex items-center gap-1 text-blue-500 animate-pulse",children:[(0,b.jsx)(m.Clock,{size:14})," ",i("survey_saving")]}):s?(0,b.jsxs)("span",{className:"flex items-center gap-1 text-green-600",children:[(0,b.jsx)(o.CheckCircle,{size:14,weight:"fill"})," ",i("survey_saved")]}):(0,b.jsx)("span",{className:"opacity-0",children:"."})})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[x&&(0,b.jsxs)("div",{className:"hidden md:flex flex-col w-64 bg-white border-r border-slate-200 overflow-y-auto",children:[(0,b.jsx)("div",{className:"p-4 bg-slate-50 border-b border-slate-100",children:(0,b.jsx)("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:i("survey_sections")})}),(0,b.jsx)("div",{className:"flex-1 py-2",children:w.map((c,d)=>{let e=a.questions.filter(a=>a.section===c),f=e.length,g=e.filter(a=>j[a.id]).length,h=g===f,i=z===c;return(0,b.jsxs)("button",{onClick:()=>{A(c),C(0)},className:`w-full text-left px-5 py-3 text-sm border-l-4 transition-all hover:bg-slate-50 relative group ${i?"border-blue-600 bg-blue-50/50":"border-transparent"}`,children:[(0,b.jsx)("div",{className:`font-bold mb-1 ${i?"text-blue-700":"text-slate-700"}`,children:P(c)}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[(0,b.jsxs)("span",{children:[g,"/",f]}),h&&(0,b.jsx)(o.CheckCircle,{weight:"fill",className:"text-green-500",size:14})]}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-slate-100",children:(0,b.jsx)("div",{className:`h-full ${h?"bg-green-500":i?"bg-blue-500":"bg-slate-300"}`,style:{width:`${g/f*100}%`}})})]},c)})})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto bg-slate-50 relative",children:[(0,b.jsx)("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-md border-b border-slate-200 px-6 py-4 shadow-sm",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:P(z)}),(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:[i("survey_page_info")," ",B+1," ",i("survey_page_of")," ",F]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("span",{className:"text-2xl font-black text-blue-600",children:[S,"%"]}),(0,b.jsx)("span",{className:"text-xs text-slate-400 font-bold ml-1",children:i("survey_completed")})]})]}),(0,b.jsx)("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-700 ease-out",style:{width:`${S}%`}})})]})}),(0,b.jsx)("div",{className:"max-w-3xl mx-auto p-6 space-y-6 pb-32",children:E.map((a,c)=>(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4 animate-fadeIn",style:{animationDelay:`${50*c}ms`},children:[(0,b.jsxs)("h3",{className:"font-bold text-slate-800 text-base leading-snug flex gap-2",children:[(0,b.jsxs)("span",{className:"text-slate-300 select-none",children:[5*B+c+1,"."]}),(0,b.jsxs)("span",{children:[a.title,a.required&&(0,b.jsx)("span",{className:"text-red-500 text-sm ml-1",title:i("survey_required"),children:"*"})]})]}),(0,b.jsxs)("div",{className:"pl-6",children:["LIKERT"===a.type&&(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.from({length:a.scale||5},(a,b)=>b+1).map(c=>(0,b.jsx)("button",{onClick:()=>K(a.id,c),className:`w-12 h-12 rounded-xl border-2 flex items-center justify-center font-bold text-lg transition-all ${j[a.id]===c?"bg-blue-600 text-white border-blue-600 shadow-lg shadow-blue-500/30 scale-105":"bg-white text-slate-500 border-slate-100 hover:border-blue-300 hover:bg-blue-50"}`,children:c},c))}),(0,b.jsxs)("div",{className:"flex justify-between w-full max-w-[300px] text-xs font-bold text-slate-400 uppercase tracking-wide",children:[(0,b.jsx)("span",{children:i("survey_likert_disagree")}),(0,b.jsx)("span",{children:i("survey_likert_agree")})]})]}),"NPS"===a.type&&(0,b.jsxs)("div",{className:"overflow-x-auto pb-2",children:[(0,b.jsx)("div",{className:"flex gap-1 min-w-max",children:Array.from({length:11},(a,b)=>b).map(c=>(0,b.jsx)("button",{onClick:()=>K(a.id,c),className:`w-10 h-10 rounded-lg border-2 font-bold text-sm transition-all ${j[a.id]===c?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-slate-500 border-slate-200 hover:border-indigo-300 hover:bg-indigo-50"}`,children:c},c))}),(0,b.jsxs)("div",{className:"flex justify-between w-full min-w-max text-xs font-bold text-slate-400 px-1 mt-2",children:[(0,b.jsx)("span",{children:i("survey_nps_unlikely")}),(0,b.jsx)("span",{children:i("survey_nps_likely")})]})]}),"TEXT"===a.type&&(0,b.jsx)("textarea",{className:"w-full border-2 border-slate-200 rounded-xl p-4 outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all min-h-[100px] text-slate-700",placeholder:i("survey_text_placeholder"),value:j[a.id]||"",onChange:b=>K(a.id,b.target.value)}),"YESNO"===a.type&&(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("button",{onClick:()=>K(a.id,"YES"),className:`flex-1 py-4 px-6 rounded-xl border-2 font-bold text-lg transition-all flex items-center justify-center gap-3 ${"YES"===j[a.id]?"bg-green-600 text-white border-green-600 shadow-lg shadow-green-500/20 scale-[1.02]":"bg-white text-slate-600 border-slate-100 hover:border-green-300 hover:bg-green-50"}`,children:[(0,b.jsx)(Z.ThumbsUp,{weight:"YES"===j[a.id]?"fill":"bold"})," ",i("survey_yes")]}),(0,b.jsxs)("button",{onClick:()=>K(a.id,"NO"),className:`flex-1 py-4 px-6 rounded-xl border-2 font-bold text-lg transition-all flex items-center justify-center gap-3 ${"NO"===j[a.id]?"bg-red-600 text-white border-red-600 shadow-lg shadow-red-500/20 scale-[1.02]":"bg-white text-slate-600 border-slate-100 hover:border-red-300 hover:bg-red-50"}`,children:[(0,b.jsx)(_,{weight:"NO"===j[a.id]?"fill":"bold"})," ",i("survey_no")]})]}),"RATING"===a.type&&(0,b.jsx)("div",{className:"flex gap-2",children:Array.from({length:5}).map((c,d)=>{let e=d+1,f=e<=(j[a.id]||0);return(0,b.jsx)("button",{onClick:()=>K(a.id,e),className:`transition-all duration-200 ${f?"scale-110":"hover:scale-105"}`,children:(0,b.jsx)(X.Star,{size:42,weight:f?"fill":"bold",className:f?"text-yellow-400 drop-shadow-sm":"text-slate-200 hover:text-yellow-200"})},e)})}),"DATE"===a.type&&(0,b.jsx)("input",{type:"date",className:"w-full max-w-sm border-2 border-slate-200 rounded-xl p-4 outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all text-slate-700",value:j[a.id]||"",onChange:b=>K(a.id,b.target.value)}),"DROPDOWN"===a.type&&(0,b.jsxs)("select",{className:"w-full max-w-sm border-2 border-slate-200 rounded-xl p-4 outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all text-slate-700 bg-white",value:j[a.id]||"",onChange:b=>K(a.id,b.target.value),children:[(0,b.jsx)("option",{value:"",children:i("survey_dropdown_placeholder")}),a.options?.map((a,c)=>(0,b.jsx)("option",{value:a,children:a},c))]}),("MULTI"===a.type||"CHECKBOX"===a.type)&&(0,b.jsx)("div",{className:"space-y-2",children:a.options?.map((c,d)=>{let e="MULTI"===a.type?j[a.id]===c:(j[a.id]||[]).includes(c);return(0,b.jsxs)("button",{onClick:()=>{if("MULTI"===a.type)K(a.id,c);else{let b=j[a.id]||[],d=b.includes(c)?b.filter(a=>a!==c):[...b,c];K(a.id,d)}},className:`w-full text-left p-4 border-2 rounded-xl transition-all flex items-center justify-between group ${e?"border-indigo-600 bg-indigo-50/50 shadow-sm":"border-slate-100 hover:border-indigo-300"}`,children:[(0,b.jsx)("span",{className:`font-medium ${e?"text-indigo-900":"text-slate-600"}`,children:c}),(0,b.jsx)("div",{className:`w-5 h-5 flex items-center justify-center border-2 transition-all ${"MULTI"===a.type?"rounded-full":"rounded"} ${e?"bg-indigo-600 border-indigo-600 shadow-inner":"border-slate-300 group-hover:border-indigo-400"}`,children:e&&(0,b.jsx)(I.Check,{size:12,weight:"bold",className:"text-white"})})]},d)})}),"RANKING"===a.type&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400 italic mb-2",children:"Ordena los elementos según tu preferencia (simulación)"}),(j[a.id]||a.options||[]).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg shadow-sm",children:[(0,b.jsx)("div",{className:"w-6 h-6 bg-slate-100 flex items-center justify-center rounded text-xs font-bold text-slate-500",children:c+1}),(0,b.jsx)("span",{className:"flex-1 text-sm text-slate-700",children:a}),(0,b.jsx)(ad,{size:16,className:"text-slate-300 cursor-grab"})]},c)),(0,b.jsx)("p",{className:"text-[10px] text-slate-400 mt-2",children:"* Funcionalidad de arrastrar y soltar habilitada en producción."})]}),"FILE"===a.type&&(0,b.jsx)("div",{className:"w-full",children:j[a.id]?(0,b.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(o.CheckCircle,{weight:"fill",className:"text-green-600",size:24}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-bold text-green-800",children:"Archivo adjunto"}),(0,b.jsx)("div",{className:"text-xs text-green-600 uppercase font-mono",children:j[a.id].name||"documento.pdf"})]})]}),(0,b.jsx)("button",{onClick:()=>K(a.id,null),className:"text-slate-400 hover:text-red-500 p-2",children:(0,b.jsx)(u.X,{size:18})})]}):(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",onChange:b=>{let c=b.target.files?.[0];c&&K(a.id,{name:c.name,size:c.size})}}),(0,b.jsxs)("div",{className:"p-8 border-2 border-dashed border-slate-200 rounded-2xl flex flex-col items-center justify-center text-slate-400 group-hover:border-blue-400 group-hover:bg-blue-50 transition-all",children:[(0,b.jsx)(ae.UploadSimple,{size:32,className:"mb-3 group-hover:scale-110 transition-transform"}),(0,b.jsx)("div",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:"Haz clic o arrastra para subir"}),(0,b.jsx)("div",{className:"text-xs mt-1",children:"PDF, Imágenes o Excel (Máx. 10MB)"})]})]})})]})]},a.id))}),(0,b.jsx)("div",{className:"fixed bottom-0 left-0 md:left-64 right-0 bg-white border-t border-slate-200 p-4 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-20",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto flex justify-between items-center",children:[(0,b.jsx)("button",{onClick:()=>{if(G){if(w.indexOf(z)>0){let a=w.indexOf(z)-1;A(w[a])}}else C(a=>a-1),window.scrollTo({top:0,behavior:"smooth"})},disabled:G&&0===w.indexOf(z),className:"px-6 py-2.5 rounded-lg font-bold text-slate-500 hover:bg-slate-100 disabled:opacity-30 disabled:hover:bg-transparent transition-colors",children:i("survey_prev_btn")}),H?J?(0,b.jsxs)("button",{onClick:M,className:"px-8 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 shadow-lg shadow-green-600/20 transform hover:-translate-y-1 transition-all flex items-center gap-2",children:[(0,b.jsx)(t.PaperPlaneRight,{weight:"bold",size:20}),i("survey_finish_btn")]}):(0,b.jsxs)("button",{onClick:L,className:"px-8 py-3 bg-slate-800 text-white rounded-xl font-bold hover:bg-slate-900 shadow-lg shadow-slate-800/20 transform hover:-translate-y-1 transition-all flex items-center gap-2",children:[i("survey_next_dim_btn")," ",(0,b.jsx)(n.CaretRight,{weight:"bold"})]}):(0,b.jsx)("button",{onClick:L,className:"px-8 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 shadow-lg shadow-blue-600/20 transform hover:-translate-y-1 transition-all",children:i("survey_next_btn")})]})})]})]})]})}function al({survey:a,onSave:d,onCancel:g}){let{t:h}=(0,e.useTranslation)(),[i,m]=(0,c.useState)({...a}),[n,s]=(0,c.useState)("DESIGN"),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),F=async()=>{"SPECIFIC"!==w||y.trim()?(B(!0),await new Promise(a=>setTimeout(a,1500)),B(!1),x(null),z(""),alert("Invitaciones enviadas correctamente a los destinatarios seleccionados.")):alert(h("Debes ingresar al menos un correo"))},G=a.questions.length>50,K=(0,c.useCallback)(a=>{m(b=>({...b,...a}))},[]),M=a=>{let b={id:`q-${Date.now()}`,type:a,title:h("builder_new_question"),required:!1,scale:"LIKERT"===a?5:void 0,options:"MULTI"===a||"CHECKBOX"===a?["Opción 1","Opción 2"]:void 0};K({questions:[...i.questions,b]})},N=(a,b)=>{K({questions:i.questions.map(c=>c.id===a?{...c,...b}:c)})},P=f.DB.units.filter(b=>b.tenantId===a.tenantId),Q=f.DB.users.filter(b=>b.tenantId===a.tenantId);return(0,b.jsxs)("div",{className:"h-full flex flex-col bg-slate-50",children:[(0,b.jsxs)("div",{className:"bg-white px-6 py-3 border-b border-slate-200 flex justify-between items-center shadow-sm z-20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:g,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600 transition-colors",children:(0,b.jsx)(u.X,{size:20,weight:"bold"})}),(0,b.jsx)("div",{className:"h-8 w-px bg-slate-200"}),(0,b.jsxs)("div",{className:"flex bg-slate-100 rounded-lg p-1",children:[(0,b.jsx)("button",{onClick:()=>s("DESIGN"),className:`px-4 py-1.5 rounded-md text-sm font-bold transition-all ${"DESIGN"===n?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:h("builder_tab_design")}),(0,b.jsx)("button",{onClick:()=>s("SETTINGS"),className:`px-4 py-1.5 rounded-md text-sm font-bold transition-all ${"SETTINGS"===n?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:h("builder_tab_settings")})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"text-xs font-medium text-slate-400",children:[i.questions.length," ",h("survey_questions_count")]}),i.unit&&!i.process?(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsxs)("button",{disabled:!0,className:"px-5 py-2 bg-slate-300 text-slate-500 rounded-lg font-bold cursor-not-allowed flex items-center gap-2 text-sm",children:[(0,b.jsx)(L.WarningCircle,{size:16,weight:"fill"})," No se puede publicar"]}),(0,b.jsxs)("div",{className:"absolute bottom-full right-0 mb-2 hidden group-hover:block w-64 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-lg z-50",children:["Debes seleccionar un ",(0,b.jsx)("strong",{children:"Proceso"})," en la pestaña SETTINGS antes de publicar esta encuesta."]})]}):(0,b.jsxs)("button",{onClick:()=>d({...i,status:"OPEN"}),className:"px-5 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 shadow-lg shadow-blue-500/20 flex items-center gap-2 text-sm",children:[(0,b.jsx)(t.PaperPlaneRight,{size:16,weight:"bold"})," ",h("builder_publish")]})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-hidden flex",children:["DESIGN"===n&&!G&&(0,b.jsxs)("div",{className:"w-64 bg-white border-r border-slate-200 p-4 flex flex-col gap-4 overflow-y-auto",children:[(0,b.jsx)("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:h("builder_question_types")}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,b.jsxs)("button",{onClick:()=>M("TEXT"),className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-100 rounded text-slate-600 group-hover:bg-blue-200 group-hover:text-blue-700",children:(0,b.jsx)(k.ClipboardText,{size:18})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:h("builder_type_free_text")})]}),(0,b.jsxs)("button",{onClick:()=>M("LIKERT"),className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-100 rounded text-slate-600 group-hover:bg-blue-200 group-hover:text-blue-700",children:(0,b.jsx)(E.ListChecks,{size:18})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:h("builder_type_likert")})]}),(0,b.jsxs)("button",{onClick:()=>M("NPS"),className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-100 rounded text-slate-600 group-hover:bg-blue-200 group-hover:text-blue-700",children:(0,b.jsx)(v.Smiley,{size:18})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:h("builder_type_nps_full")})]}),(0,b.jsxs)("button",{onClick:()=>M("MULTI"),className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-100 rounded text-slate-600 group-hover:bg-blue-200 group-hover:text-blue-700",children:(0,b.jsx)(C.SquaresFour,{size:18})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:h("builder_type_multi")})]}),(0,b.jsxs)("button",{onClick:()=>M("CHECKBOX"),className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-100 rounded text-slate-600 group-hover:bg-blue-200 group-hover:text-blue-700",children:(0,b.jsx)(o.CheckCircle,{size:18})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:h("builder_type_check")})]}),(0,b.jsxs)("button",{onClick:()=>M("YESNO"),className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-100 rounded text-slate-600 group-hover:bg-blue-200 group-hover:text-blue-700",children:(0,b.jsx)(Z.ThumbsUp,{size:18})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:h("builder_type_yesno")})]}),(0,b.jsxs)("button",{onClick:()=>M("RATING"),className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-100 rounded text-slate-600 group-hover:bg-blue-200 group-hover:text-blue-700",children:(0,b.jsx)(X.Star,{size:18})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:h("builder_type_rating")})]}),(0,b.jsxs)("button",{onClick:()=>M("DROPDOWN"),className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-100 rounded text-slate-600 group-hover:bg-blue-200 group-hover:text-blue-700",children:(0,b.jsx)(J.CaretDown,{size:18})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:h("builder_type_dropdown")})]}),(0,b.jsxs)("button",{onClick:()=>M("RANKING"),className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-100 rounded text-slate-600 group-hover:bg-blue-200 group-hover:text-blue-700",children:(0,b.jsx)(ab,{size:18})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:h("builder_type_ranking")})]}),(0,b.jsxs)("button",{onClick:()=>M("DATE"),className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-100 rounded text-slate-600 group-hover:bg-blue-200 group-hover:text-blue-700",children:(0,b.jsx)(Y.Calendar,{size:18})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:h("builder_type_date")})]}),(0,b.jsxs)("button",{onClick:()=>M("FILE"),className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-100 rounded text-slate-600 group-hover:bg-blue-200 group-hover:text-blue-700",children:(0,b.jsx)(ae.UploadSimple,{size:18})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-600 group-hover:text-blue-700",children:h("builder_type_file")})]})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto bg-slate-50 p-8",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:["DESIGN"===n&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm group hover:border-blue-300 transition-colors cursor-text",children:[(0,b.jsx)("input",{className:"w-full text-2xl font-bold text-slate-800 border-none px-0 focus:ring-0 placeholder:text-slate-300",placeholder:h("builder_ph_title"),value:i.title,onChange:a=>K({title:a.target.value})}),(0,b.jsx)("textarea",{className:"w-full mt-2 text-slate-500 border-none px-0 focus:ring-0 resize-none placeholder:text-slate-300",rows:2,placeholder:h("builder_ph_desc"),value:i.description,onChange:a=>K({description:a.target.value})})]}),G&&(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 p-4 rounded-lg flex items-start gap-3",children:[(0,b.jsx)(D.PresentationChart,{size:24,weight:"fill",className:"flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"font-bold block",children:"Plantilla de Diagnóstico Activada"}),"Esta es una encuesta estandarizada con 180 preguntas científicamente validadas. No se pueden agregar ni eliminar preguntas para mantener la integridad del benchmark."]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[i.questions.map((a,c)=>(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative group hover:border-blue-400 transition-all",children:[(0,b.jsx)("div",{className:"absolute top-4 left-0 w-1 h-8 bg-slate-200 rounded-r opacity-0 group-hover:opacity-100 transition-opacity peer-checked:bg-blue-500"}),(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{className:"flex-1 flex gap-3",children:[(0,b.jsxs)("span",{className:"font-bold text-slate-300 select-none pt-2",children:[c+1,"."]}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{className:"w-full font-bold text-slate-700 border-none p-2 rounded hover:bg-slate-50 focus:bg-white focus:ring-2 focus:ring-blue-100 transition-colors",value:a.title,onChange:b=>N(a.id,{title:b.target.value}),placeholder:h("builder_q_ph"),readOnly:G})})]}),!G&&(0,b.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsxs)("label",{className:"flex items-center gap-1 text-xs font-bold text-slate-400 cursor-pointer hover:text-blue-600",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.required,onChange:b=>N(a.id,{required:b.target.checked}),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),h("builder_required")]}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void K({questions:i.questions.filter(a=>a.id!==b)})},className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded",title:h("builder_delete_q"),children:(0,b.jsx)(l.Trash,{size:16})})]})]}),(0,b.jsxs)("div",{className:"pl-8",children:["TEXT"===a.type&&(0,b.jsx)("div",{className:"p-3 bg-slate-50 border border-slate-200 border-dashed rounded-lg text-slate-400 text-sm italic",children:h("builder_text_help")}),("MULTI"===a.type||"CHECKBOX"===a.type)&&(0,b.jsxs)("div",{className:"space-y-2",children:[a.options?.map((c,d)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-4 h-4 border border-slate-300 ${"MULTI"===a.type?"rounded-full":"rounded"}`}),(0,b.jsx)("input",{className:"flex-1 text-sm text-slate-600 border-none p-1 hover:bg-slate-50 focus:bg-white focus:ring-1 focus:ring-blue-200 rounded",value:c,readOnly:G,onChange:b=>{let c=[...a.options||[]];c[d]=b.target.value,N(a.id,{options:c})}}),!G&&(0,b.jsx)("button",{onClick:()=>{let b=a.options?.filter((a,b)=>b!==d);N(a.id,{options:b})},className:"text-slate-300 hover:text-red-500 p-1",children:(0,b.jsx)(u.X,{size:12})})]},d)),!G&&(0,b.jsxs)("button",{onClick:()=>N(a.id,{options:[...a.options||[],`Opci\xf3n ${(a.options?.length||0)+1}`]}),className:"text-xs font-bold text-blue-600 hover:underline flex items-center gap-1 mt-2",children:[(0,b.jsx)(j.Plus,{size:12})," ",h("builder_add_option")]})]}),"LIKERT"===a.type&&(0,b.jsx)("div",{className:"flex gap-2",children:Array.from({length:5}).map((a,c)=>(0,b.jsx)("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center text-xs font-bold text-slate-300 bg-slate-50",children:c+1},c))}),"NPS"===a.type&&(0,b.jsx)("div",{className:"flex gap-1 overflow-hidden opacity-50",children:Array.from({length:11}).map((a,c)=>(0,b.jsx)("div",{className:"h-8 flex-1 border border-slate-200 flex items-center justify-center text-[10px] font-bold text-slate-400 bg-slate-50 first:rounded-l last:rounded-r",children:c},c))}),"YESNO"===a.type&&(0,b.jsxs)("div",{className:"flex gap-4 opacity-50",children:[(0,b.jsx)("div",{className:"px-4 py-2 rounded-lg border border-slate-200 bg-slate-50 text-sm font-bold text-slate-400",children:"SÍ"}),(0,b.jsx)("div",{className:"px-4 py-2 rounded-lg border border-slate-200 bg-slate-50 text-sm font-bold text-slate-400",children:"NO"})]}),"RATING"===a.type&&(0,b.jsx)("div",{className:"flex gap-1 opacity-50",children:Array.from({length:5}).map((a,c)=>(0,b.jsx)(X.Star,{size:24,weight:"bold",className:"text-slate-200"},c))}),"DATE"===a.type&&(0,b.jsx)("div",{className:"w-full max-w-[200px] h-10 bg-slate-50 border border-slate-200 border-dashed rounded-lg flex items-center px-3 text-slate-300 text-sm",children:"dd/mm/aaaa"}),"DROPDOWN"===a.type&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-50 border border-slate-200 rounded text-xs text-slate-400 italic",children:"Vista previa del menú desplegable"}),a.options?.map((c,d)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"text-xs text-slate-400",children:[d+1,"."]}),(0,b.jsx)("input",{className:"flex-1 text-sm text-slate-600 border-none p-1 hover:bg-slate-50 focus:bg-white focus:ring-1 focus:ring-blue-200 rounded",value:c,onChange:b=>{let c=[...a.options||[]];c[d]=b.target.value,N(a.id,{options:c})}}),(0,b.jsx)("button",{onClick:()=>N(a.id,{options:a.options?.filter((a,b)=>b!==d)}),className:"text-slate-300 hover:text-red-500 p-1",children:(0,b.jsx)(u.X,{size:12})})]},d)),(0,b.jsxs)("button",{onClick:()=>N(a.id,{options:[...a.options||[],`Opci\xf3n ${(a.options?.length||0)+1}`]}),className:"text-xs font-bold text-blue-600 hover:underline flex items-center gap-1 mt-2",children:[(0,b.jsx)(j.Plus,{size:12})," Añadir opción"]})]}),"RANKING"===a.type&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"p-2 bg-slate-50 border border-slate-200 rounded text-xs text-slate-400 italic",children:"Arrastra para ordenar (en respuesta)"}),a.options?.map((c,d)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ad,{size:14,className:"text-slate-300"}),(0,b.jsx)("input",{className:"flex-1 text-sm text-slate-600 border-none p-1 hover:bg-slate-50 focus:bg-white focus:ring-1 focus:ring-blue-200 rounded",value:c,onChange:b=>{let c=[...a.options||[]];c[d]=b.target.value,N(a.id,{options:c})}}),(0,b.jsx)("button",{onClick:()=>N(a.id,{options:a.options?.filter((a,b)=>b!==d)}),className:"text-slate-300 hover:text-red-500 p-1",children:(0,b.jsx)(u.X,{size:12})})]},d)),(0,b.jsxs)("button",{onClick:()=>N(a.id,{options:[...a.options||[],`Elemento ${(a.options?.length||0)+1}`]}),className:"text-xs font-bold text-blue-600 hover:underline flex items-center gap-1 mt-2",children:[(0,b.jsx)(j.Plus,{size:12})," Añadir elemento"]})]}),"FILE"===a.type&&(0,b.jsxs)("div",{className:"p-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl flex flex-col items-center justify-center text-slate-400 animate-pulse",children:[(0,b.jsx)(ae.UploadSimple,{size:24,className:"mb-2"}),(0,b.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Subida de archivos"})]})]})]},a.id)),!G&&0===i.questions.length&&(0,b.jsxs)("div",{className:"text-center py-12 text-slate-400 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50/50",children:[(0,b.jsx)("p",{children:h("builder_no_questions")}),(0,b.jsx)("p",{className:"text-sm",children:h("builder_select_type")})]})]})]}),"SETTINGS"===n&&(0,b.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[(0,b.jsxs)("h3",{className:"font-bold text-slate-800 text-lg mb-4 flex items-center gap-2",children:[(0,b.jsx)(p.Users,{className:"text-blue-600"})," ",h("builder_settings_header")]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:h("builder_audience_label")}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("button",{onClick:()=>K({audience:"TENANT",targetUnitId:void 0,targetUserId:void 0}),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${"TENANT"===i.audience&&!i.targetUserId?"border-blue-500 bg-blue-50 text-blue-700":"border-slate-200 hover:border-slate-300"}`,children:[(0,b.jsx)(q.Globe,{size:24}),(0,b.jsx)("span",{className:"font-bold text-sm",children:h("builder_audience_global_btn")})]}),(0,b.jsxs)("button",{onClick:()=>K({audience:"UNIT",targetUnitId:P[0]?.id||"",targetUserId:void 0}),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${"UNIT"===i.audience?"border-blue-500 bg-blue-50 text-blue-700":"border-slate-200 hover:border-slate-300"}`,children:[(0,b.jsx)(p.Users,{size:24}),(0,b.jsx)("span",{className:"font-bold text-sm",children:h("builder_audience_unit_btn")})]}),(0,b.jsxs)("button",{onClick:()=>K({targetUserId:[]}),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${i.targetUserId?"border-blue-500 bg-blue-50 text-blue-700":"border-slate-200 hover:border-slate-300"}`,children:[(0,b.jsx)(H.User,{size:24}),(0,b.jsx)("span",{className:"font-bold text-sm",children:"Usuarios Específicos"})]})]})]}),"UNIT"===i.audience&&(0,b.jsxs)("div",{className:"animate-fadeIn",children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Seleccionar Unidad"}),(0,b.jsx)("select",{className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",value:i.targetUnitId,onChange:a=>K({targetUnitId:a.target.value}),children:P.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Solo los miembros de esta unidad verán esta encuesta."})]}),void 0!==i.targetUserId&&(0,b.jsxs)("div",{className:"animate-fadeIn",children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Seleccionar Usuarios"}),(0,b.jsx)("div",{className:"border border-slate-200 rounded-lg max-h-60 overflow-y-auto p-2 space-y-1",children:Q.map(a=>{let c=i.targetUserId?.includes(a.id);return(0,b.jsxs)("button",{onClick:()=>{let b=Array.isArray(i.targetUserId)?i.targetUserId:[];K({targetUserId:b.includes(a.id)?b.filter(b=>b!==a.id):[...b,a.id]})},className:`w-full flex items-center gap-3 p-2 rounded-lg transition-colors ${c?"bg-blue-50 border-blue-100":"hover:bg-slate-50"}`,children:[(0,b.jsx)("div",{className:`w-5 h-5 rounded border flex items-center justify-center ${c?"bg-blue-600 border-blue-600 text-white":"border-slate-300 bg-white"}`,children:c&&(0,b.jsx)(I.Check,{size:12,weight:"bold"})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("div",{className:"text-sm font-bold text-slate-700",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:[a.jobTitle," - ",a.unit]})]})]},a.id)})}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mt-2",children:[i.targetUserId?.length||0," usuarios seleccionados."]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[(0,b.jsxs)("h3",{className:"font-bold text-slate-800 text-lg mb-4 flex items-center gap-2",children:[(0,b.jsx)(V.Buildings,{className:"text-purple-600"})," Estructura Organizacional"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Área"}),(0,b.jsxs)("select",{className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all",value:i.unit||"GLOBAL",onChange:a=>{K({unit:"GLOBAL"===a.target.value?void 0:a.target.value,process:void 0})},children:[(0,b.jsx)("option",{value:"GLOBAL",children:"Global (Toda la Organización)"}),f.DB.units.filter(b=>b.tenantId===a.tenantId&&"UNIT"===b.type&&(1===b.depth||2===b.depth)).map(a=>(0,b.jsx)("option",{value:a.name,children:2===a.depth?`  ↳ ${a.name}`:a.name},a.id))]}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Selecciona el área o subárea organizacional"})]}),i.unit&&"GLOBAL"!==i.unit&&(0,b.jsxs)("div",{className:"animate-fadeIn",children:[(0,b.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Proceso ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all",value:i.process||"",onChange:a=>K({process:a.target.value||void 0}),children:[(0,b.jsx)("option",{value:"",children:"-- Seleccionar Proceso --"}),f.DB.units.filter(b=>{let c=f.DB.units.find(b=>b.tenantId===a.tenantId&&b.name===i.unit);return b.tenantId===a.tenantId&&"PROCESS"===b.type&&c&&b.parentId===c.id}).map(a=>(0,b.jsx)("option",{value:a.name,children:a.name},a.id))]}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Selecciona el proceso específico para ",i.unit]})]}),i.unit&&!i.process&&(0,b.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2",children:[(0,b.jsx)(L.WarningCircle,{size:20,className:"text-amber-600 flex-shrink-0 mt-0.5",weight:"fill"}),(0,b.jsxs)("div",{className:"text-xs text-amber-700",children:[(0,b.jsx)("strong",{children:"Proceso requerido:"})," Debes seleccionar un proceso antes de publicar esta encuesta."]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[(0,b.jsxs)("h3",{className:"font-bold text-slate-800 text-lg mb-4 flex items-center gap-2",children:[(0,b.jsx)(r.Gear,{className:"text-slate-400"})," Preferencias"]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("input",{type:"checkbox",id:"anon",checked:i.isAnonymous,onChange:a=>K({isAnonymous:a.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),(0,b.jsxs)("label",{htmlFor:"anon",className:"cursor-pointer",children:[(0,b.jsx)("div",{className:"font-bold text-slate-700 text-sm",children:"Respuestas Anónimas"}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:"No se registrará la identidad del encuestado (recomendado para Clima Laboral)."})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Estado de la Encuesta"}),(0,b.jsxs)("select",{className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-all",value:i.status,onChange:a=>K({status:a.target.value}),children:[(0,b.jsx)("option",{value:"DRAFT",children:"Borrador"}),(0,b.jsx)("option",{value:"OPEN",children:"Activa"}),(0,b.jsx)("option",{value:"CLOSED",children:"Cerrada"})]}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["DRAFT"===i.status&&"La encuesta no es visible para los usuarios","OPEN"===i.status&&"La encuesta está disponible para responder","CLOSED"===i.status&&"La encuesta ya no acepta respuestas"]})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[(0,b.jsxs)("h3",{className:"font-bold text-slate-800 text-lg mb-4 flex items-center gap-2",children:[(0,b.jsx)(t.PaperPlaneRight,{className:"text-slate-400"})," Enviar Invitaciones"]}),w?(0,b.jsxs)("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 animate-fadeIn",children:[(0,b.jsxs)("h4",{className:"font-bold text-slate-700 mb-2 flex items-center gap-2",children:["ALL"===w?(0,b.jsx)(p.Users,{}):(0,b.jsx)(H.User,{}),"ALL"===w?"Invitar a toda la unidad":"Invitar usuarios específicos"]}),"ALL"===w?(0,b.jsxs)("p",{className:"text-sm text-slate-600 mb-4",children:["Se enviará un correo a todos los miembros registrados en ",(0,b.jsx)("strong",{children:i.unit||"la organización"}),"."]}):(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Correos electrónicos"}),(0,b.jsx)("textarea",{value:y,onChange:a=>z(a.target.value),placeholder:"usuario@ejemplo.com, otro@ejemplo.com",className:"w-full p-3 rounded-lg border border-slate-200 text-sm h-24 focus:ring-2 focus:ring-blue-500 outline-none"}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Separa los correos con comas."})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>x(null),className:"px-4 py-2 text-slate-500 font-bold text-sm hover:text-slate-700 hover:bg-slate-200 rounded-lg transition-all",disabled:A,children:"Cancelar"}),(0,b.jsxs)("button",{onClick:F,disabled:A||"SPECIFIC"===w&&!y,className:"px-6 py-2 bg-blue-600 text-white font-bold text-sm rounded-lg hover:bg-blue-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[A?(0,b.jsx)(O.ArrowClockwise,{className:"animate-spin",size:18}):(0,b.jsx)(t.PaperPlaneRight,{size:18}),A?"Enviando...":"Enviar Invitaciones"]})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Envía una notificación por correo a los participantes seleccionados."}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>x("ALL"),className:"flex-1 py-3 px-4 bg-blue-50 text-blue-700 font-bold rounded-lg border border-blue-100 hover:bg-blue-100 transition-all flex items-center justify-center gap-2",children:[(0,b.jsx)(p.Users,{size:20}),"Invitar a Todos"]}),(0,b.jsxs)("button",{onClick:()=>x("SPECIFIC"),className:"flex-1 py-3 px-4 bg-slate-50 text-slate-700 font-bold rounded-lg border border-slate-100 hover:bg-slate-100 transition-all flex items-center justify-center gap-2",children:[(0,b.jsx)(H.User,{size:20}),"Usuarios Específicos"]})]})]})]})]})]})})]})]})}a.s(["default",()=>af],4615)}];

//# sourceMappingURL=app_dashboard_surveys_page_tsx_552cf2e5._.js.map