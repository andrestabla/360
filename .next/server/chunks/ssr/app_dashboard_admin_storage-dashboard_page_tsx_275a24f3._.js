module.exports=[62848,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(98263),e=a.i(82665),f=a.i(3916),g=a.i(60144),h=a.i(86743),i=a.i(60217);let j=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm12,24.87A84,84,0,0,1,194,76.07L140,107.22ZM50,159.17a83.94,83.94,0,0,1,66-114.3v76.2ZM128,212a83.88,83.88,0,0,1-65.95-32.07L206,96.83A84,84,0,0,1,128,212Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,32v96L44.86,176h0A96,96,0,0,1,128,32Z",opacity:"0.2"}),c.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm71.87,53.27L136,114.14V40.37A88,88,0,0,1,199.87,77.27ZM120,40.37v83l-71.89,41.5A88,88,0,0,1,120,40.37ZM128,216a88,88,0,0,1-71.87-37.27L207.89,91.12A88,88,0,0,1,128,216Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,16a88,88,0,0,1,71.87,37.27L128,118.76Zm0,176a88,88,0,0,1-71.87-37.27L207.89,91.12A88,88,0,0,1,128,216Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm74.74,51.92L134,117.61V38.2A90,90,0,0,1,202.74,77.92ZM122,38.2v86.34L47.24,167.7A90,90,0,0,1,122,38.2ZM128,218a90,90,0,0,1-74.74-39.92L208.76,88.3A90,90,0,0,1,128,218Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm71.87,53.27L136,114.14V40.37A88,88,0,0,1,199.87,77.27ZM120,40.37v83l-71.89,41.5A88,88,0,0,1,120,40.37ZM128,216a88,88,0,0,1-71.87-37.27L207.89,91.12A88,88,0,0,1,128,216Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm77.58,50.59L132,121.07v-85A92.07,92.07,0,0,1,205.58,78.59ZM124,36.09v89.6L46.42,170.48A92,92,0,0,1,124,36.09ZM128,220a92,92,0,0,1-77.58-42.59L209.58,85.52A92,92,0,0,1,128,220Z"}))]]),k=c.forwardRef((a,b)=>c.createElement(i.default,{ref:b,...a,weights:j}));k.displayName="ChartPieIcon";let l=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216.49,184.49l-32,32a12,12,0,0,1-17-17L179,188H48a12,12,0,0,1,0-24H179l-11.52-11.51a12,12,0,0,1,17-17l32,32A12,12,0,0,1,216.49,184.49Zm-145-64a12,12,0,0,0,17-17L77,92H208a12,12,0,0,0,0-24H77L88.49,56.49a12,12,0,0,0-17-17l-32,32a12,12,0,0,0,0,17Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M208,80v96H48V80Z",opacity:"0.2"}),c.createElement("path",{d:"M213.66,181.66l-32,32a8,8,0,0,1-11.32-11.32L188.69,184H48a8,8,0,0,1,0-16H188.69l-18.35-18.34a8,8,0,0,1,11.32-11.32l32,32A8,8,0,0,1,213.66,181.66Zm-139.32-64a8,8,0,0,0,11.32-11.32L67.31,88H208a8,8,0,0,0,0-16H67.31L85.66,53.66A8,8,0,0,0,74.34,42.34l-32,32a8,8,0,0,0,0,11.32Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M42.34,85.66a8,8,0,0,1,0-11.32l32-32A8,8,0,0,1,88,48V72H208a8,8,0,0,1,0,16H88v24a8,8,0,0,1-13.66,5.66Zm171.32,84.68-32-32A8,8,0,0,0,168,144v24H48a8,8,0,0,0,0,16H168v24a8,8,0,0,0,13.66,5.66l32-32A8,8,0,0,0,213.66,170.34Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M212.24,171.76a6,6,0,0,1,0,8.48l-32,32a6,6,0,0,1-8.48-8.48L193.51,182H48a6,6,0,0,1,0-12H193.51l-21.75-21.76a6,6,0,0,1,8.48-8.48ZM75.76,116.24a6,6,0,0,0,8.48-8.48L62.49,86H208a6,6,0,0,0,0-12H62.49L84.24,52.24a6,6,0,0,0-8.48-8.48l-32,32a6,6,0,0,0,0,8.48Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M213.66,181.66l-32,32a8,8,0,0,1-11.32-11.32L188.69,184H48a8,8,0,0,1,0-16H188.69l-18.35-18.34a8,8,0,0,1,11.32-11.32l32,32A8,8,0,0,1,213.66,181.66Zm-139.32-64a8,8,0,0,0,11.32-11.32L67.31,88H208a8,8,0,0,0,0-16H67.31L85.66,53.66A8,8,0,0,0,74.34,42.34l-32,32a8,8,0,0,0,0,11.32Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M210.83,173.17a4,4,0,0,1,0,5.66l-32,32a4,4,0,0,1-5.66-5.66L198.34,180H48a4,4,0,0,1,0-8H198.34l-25.17-25.17a4,4,0,0,1,5.66-5.66ZM77.17,114.83a4,4,0,0,0,5.66-5.66L57.66,84H208a4,4,0,0,0,0-8H57.66L82.83,50.83a4,4,0,0,0-5.66-5.66l-32,32a4,4,0,0,0,0,5.66Z"}))]]),m=c.forwardRef((a,b)=>c.createElement(i.default,{ref:b,...a,weights:l}));m.displayName="ArrowsLeftRightIcon";var n=a.i(70054),o=a.i(1739),p=a.i(57764),q=a.i(45150);function r(){let{currentTenantId:a}=(0,d.useApp)(),i=e.DB.tenants.find(b=>b.id===a),[j,l]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)("LOCAL"),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(0);(0,c.useEffect)(()=>{B()},[a]);let B=async()=>{if(i?.storageConfig&&a){s(!0);try{let b,c=(b=e.DB.storageConfigs[a],{upload:async(a,c,d)=>{if(!b?.enabled)return{success:!1,error:"Almacenamiento no configurado"};let e=`file-${Date.now()}`;return{success:!0,url:`/storage/${a}/${e}/${c.name}`}},download:async(a,c)=>b?.enabled?{success:!0,blob:new Blob}:{success:!1,error:"Almacenamiento no configurado"},delete:async(a,c)=>b?.enabled?{success:!0}:{success:!1,error:"Almacenamiento no configurado"},list:async(a,c)=>b?.enabled?{success:!0,files:e.DB.docs.filter(b=>b.tenantId===a).map(a=>({id:a.id,name:a.title,size:1024*parseFloat(a.size)*1024,type:a.type,path:a.folderId||"/",createdAt:a.date||new Date().toISOString(),modifiedAt:a.date||new Date().toISOString()}))}:{success:!1,error:"Almacenamiento no configurado"},getStats:async a=>{let b=e.DB.docs.filter(b=>b.tenantId===a),c=0,d={};return b.forEach(a=>{let b=a.size.match(/(\d+\.?\d*)/),e=(b?parseFloat(b[1]):0)*(a.size.includes("GB")?1024:a.size.includes("KB")?1/1024:1);c+=e;let f=a.type.toLowerCase();d[f]=(d[f]||0)+e}),{success:!0,stats:{totalSize:10240,usedSize:c,availableSize:10240-c,fileCount:b.length,byType:d}}}});if(c){let b=await c.getStats(a);b.success&&b.stats&&l(b.stats)}}catch(a){console.error("Error loading stats:",a)}finally{s(!1)}}},C=async()=>{y(!0),A(0);for(let a=0;a<=100;a+=10)await new Promise(a=>setTimeout(a,500)),A(a);y(!1),u(!1),alert("Migración completada exitosamente")},D=a=>{if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,b)*100)/100+" "+["Bytes","KB","MB","GB","TB"][b]};if(!i?.storageConfig)return(0,b.jsx)("div",{className:"p-8",children:(0,b.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 flex items-start gap-4",children:[(0,b.jsx)(n.Warning,{size:32,className:"text-amber-600 flex-shrink-0",weight:"fill"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-amber-900 text-lg mb-2",children:"Almacenamiento No Configurado"}),(0,b.jsx)("p",{className:"text-amber-800 mb-4",children:"No has configurado un proveedor de almacenamiento. Por favor, ve a la página de configuración para seleccionar y configurar un proveedor."}),(0,b.jsxs)("a",{href:"/dashboard/admin/storage",className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg font-bold hover:bg-amber-700",children:[(0,b.jsx)(f.CloudArrowUp,{size:20}),"Configurar Almacenamiento"]})]})]})});let E={GOOGLE_DRIVE:"Google Drive",DROPBOX:"Dropbox",ONEDRIVE:"OneDrive",SHAREPOINT:"SharePoint",S3:"Amazon S3",LOCAL:"Almacenamiento Local"};return(0,b.jsxs)("div",{className:"p-8 max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-slate-800 mb-2 flex items-center gap-3",children:[(0,b.jsx)(h.Database,{size:36,className:"text-blue-600"}),"Dashboard de Almacenamiento"]}),(0,b.jsx)("p",{className:"text-slate-600",children:"Monitorea el uso de almacenamiento y gestiona tus archivos."})]}),(0,b.jsx)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 mb-6 text-white",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-blue-100 text-sm font-medium mb-1",children:"Proveedor Actual"}),(0,b.jsx)("div",{className:"text-2xl font-bold",children:E[i.storageConfig.provider]}),i.storageConfig.lastTested&&(0,b.jsxs)("div",{className:"text-blue-100 text-sm mt-2",children:["Última prueba: ",new Date(i.storageConfig.lastTested).toLocaleString("es-ES")]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:"success"===i.storageConfig.testStatus?(0,b.jsx)(g.CheckCircle,{size:48,weight:"fill",className:"text-green-300"}):(0,b.jsx)(n.Warning,{size:48,weight:"fill",className:"text-yellow-300"})})]})}),r?(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-600",children:"Cargando estadísticas..."})]}):j?(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,b.jsx)(h.Database,{size:24,className:"text-purple-600",weight:"fill"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-slate-500 font-medium",children:"Espacio Utilizado"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-slate-800",children:D(j.totalSize)})]})]}),j.limit&&(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:["de ",D(j.limit)," disponibles"]})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,b.jsx)(k,{size:24,className:"text-blue-600",weight:"fill"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-slate-500 font-medium",children:"Total de Archivos"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-slate-800",children:j.fileCount.toLocaleString()})]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,b.jsx)(f.CloudArrowUp,{size:24,className:"text-green-600",weight:"fill"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-slate-500 font-medium",children:"Uso del Almacenamiento"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-slate-800",children:[(j.usedPercentage??0).toFixed(1),"%"]})]})]}),(0,b.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2",children:(0,b.jsx)("div",{className:`h-2 rounded-full transition-all ${(j.usedPercentage??0)>80?"bg-red-500":(j.usedPercentage??0)>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(j.usedPercentage??0,100)}%`}})})]})]}):(0,b.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 mb-6",children:(0,b.jsx)("p",{className:"text-slate-600 text-center",children:"No se pudieron cargar las estadísticas"})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[(0,b.jsx)(m,{size:24,className:"text-blue-600"}),"Herramienta de Migración"]}),(0,b.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:"Migra todos tus archivos a un nuevo proveedor de almacenamiento"})]}),(0,b.jsx)("button",{onClick:()=>u(!t),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-colors",children:t?"Cancelar":"Iniciar Migración"})]}),t&&(0,b.jsxs)("div",{className:"border-t border-slate-200 pt-6",children:[(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 flex items-start gap-3",children:[(0,b.jsx)(o.Info,{size:24,className:"text-blue-600 flex-shrink-0",weight:"fill"}),(0,b.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,b.jsx)("p",{className:"font-bold mb-1",children:"Importante:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,b.jsx)("li",{children:"La migración puede tardar varios minutos dependiendo del tamaño de tus archivos"}),(0,b.jsx)("li",{children:"Los archivos permanecerán en el proveedor actual hasta que la migración se complete"}),(0,b.jsx)("li",{children:"Se recomienda realizar esta operación fuera del horario laboral"})]})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Proveedor de Destino"}),(0,b.jsx)("select",{value:v,onChange:a=>w(a.target.value),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",disabled:x,children:Object.entries(E).filter(([a])=>a!==i.storageConfig?.provider).map(([a,c])=>(0,b.jsx)("option",{value:a,children:c},a))})]}),x&&(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Progreso de Migración"}),(0,b.jsxs)("span",{className:"text-sm font-bold text-blue-600",children:[z,"%"]})]}),(0,b.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-3",children:(0,b.jsx)("div",{className:"h-3 bg-blue-600 rounded-full transition-all duration-500",style:{width:`${z}%`}})}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Migrando archivos... Por favor no cierres esta página."})]}),(0,b.jsx)("div",{className:"flex gap-4",children:(0,b.jsx)("button",{onClick:C,disabled:x,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Migrando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m,{size:20,weight:"bold"}),"Iniciar Migración"]})})})]})]}),!t&&(0,b.jsxs)("div",{className:"mt-6 bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3",children:[(0,b.jsx)(n.Warning,{size:24,className:"text-amber-600 flex-shrink-0",weight:"fill"}),(0,b.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,b.jsx)("p",{className:"font-bold mb-1",children:"Antes de migrar:"}),(0,b.jsx)("p",{children:"Asegúrate de haber configurado y probado la conexión con el nuevo proveedor de almacenamiento en la página de configuración."})]})]}),(0,b.jsx)(p.default,{...q.storageDashboardGuide})]})}a.s(["default",()=>r],62848)}];

//# sourceMappingURL=app_dashboard_admin_storage-dashboard_page_tsx_275a24f3._.js.map