module.exports=[87879,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(98263),e=a.i(82665),f=a.i(3916),g=a.i(60144),h=a.i(90823),i=a.i(70054),j=a.i(45384),k=a.i(43740),l=a.i(49545),m=a.i(86130),n=a.i(34903),o=a.i(31815),p=a.i(76617),q=a.i(88281);function r(){let{currentTenantId:a}=(0,d.useApp)(),r=e.DB.tenants.find(b=>b.id===a),[s,t]=(0,c.useState)(r?.storageConfig?.provider||"LOCAL"),[u,v]=(0,c.useState)(r?.storageConfig?.config||{}),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1),E=[{id:"GOOGLE_DRIVE",name:"Google Drive",icon:j.GoogleDriveLogo,color:"text-blue-600",bgColor:"bg-blue-50"},{id:"DROPBOX",name:"Dropbox",icon:k.DropboxLogo,color:"text-blue-700",bgColor:"bg-blue-50"},{id:"ONEDRIVE",name:"OneDrive",icon:l.MicrosoftOutlookLogo,color:"text-blue-500",bgColor:"bg-blue-50"},{id:"SHAREPOINT",name:"SharePoint",icon:l.MicrosoftOutlookLogo,color:"text-green-600",bgColor:"bg-green-50"},{id:"S3",name:"Amazon S3",icon:m.AmazonLogo,color:"text-orange-600",bgColor:"bg-orange-50"},{id:"LOCAL",name:"Almacenamiento Local",icon:n.HardDrives,color:"text-slate-600",bgColor:"bg-slate-50"}],F=async()=>{z(!0),B(null),await new Promise(a=>setTimeout(a,2e3)),G()?B({status:"success",message:"Conexión exitosa. El proveedor está configurado correctamente."}):B({status:"failed",message:"Error de conexión. Verifica las credenciales."}),z(!1)},G=()=>{switch(s){case"GOOGLE_DRIVE":case"ONEDRIVE":return!!(u.clientId&&u.clientSecret&&u.refreshToken);case"DROPBOX":return!!u.accessToken;case"SHAREPOINT":return!!(u.siteUrl&&u.clientId&&u.clientSecret&&u.tenantId);case"S3":return!!(u.accessKeyId&&u.secretAccessKey&&u.region&&u.bucket);case"LOCAL":return!!u.basePath;default:return!1}};return(0,b.jsxs)("div",{className:"p-8 max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-slate-800 mb-2 flex items-center gap-3",children:[(0,b.jsx)(f.CloudArrowUp,{size:36,className:"text-blue-600"}),"Configuración de Almacenamiento"]}),(0,b.jsx)("p",{className:"text-slate-600",children:"Configura el proveedor de almacenamiento en la nube donde se guardarán todos los documentos del sistema."})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Seleccionar Proveedor"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:E.map(a=>{let c=a.icon,d=s===a.id;return(0,b.jsx)("button",{onClick:()=>{t(a.id),v({}),B(null)},className:`p-4 rounded-lg border-2 transition-all ${d?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300 bg-white"}`,children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,b.jsx)("div",{className:`p-3 rounded-lg ${a.bgColor}`,children:(0,b.jsx)(c,{size:32,className:a.color,weight:"fill"})}),(0,b.jsx)("span",{className:"text-sm font-bold text-slate-700",children:a.name}),d&&(0,b.jsx)(g.CheckCircle,{size:20,className:"text-blue-600",weight:"fill"})]})},a.id)})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 mb-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:["Configuración de ",E.find(a=>a.id===s)?.name]}),(()=>{switch(s){case"GOOGLE_DRIVE":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Client ID"}),(0,b.jsx)("input",{type:"text",value:u.clientId||"",onChange:a=>v({...u,clientId:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"123456789-abcdefg.apps.googleusercontent.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Client Secret"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:w?"text":"password",value:u.clientSecret||"",onChange:a=>v({...u,clientSecret:a.target.value}),className:"w-full p-3 pr-12 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"GOCSPX-xxxxxxxxxxxxxxxxxxxxx"}),(0,b.jsx)("button",{onClick:()=>x(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:w?(0,b.jsx)(q.EyeSlash,{size:20}):(0,b.jsx)(p.Eye,{size:20})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Refresh Token"}),(0,b.jsx)("input",{type:w?"text":"password",value:u.refreshToken||"",onChange:a=>v({...u,refreshToken:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"1//xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Folder ID (Opcional)"}),(0,b.jsx)("input",{type:"text",value:u.folderId||"",onChange:a=>v({...u,folderId:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"1AbCdEfGhIjKlMnOpQrStUvWxYz"}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"ID de la carpeta raíz donde se almacenarán todos los documentos"})]})]});case"DROPBOX":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Access Token"}),(0,b.jsx)("input",{type:w?"text":"password",value:u.accessToken||"",onChange:a=>v({...u,accessToken:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"sl.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Root Path (Opcional)"}),(0,b.jsx)("input",{type:"text",value:u.rootPath||"",onChange:a=>v({...u,rootPath:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"/Maturity360"}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Ruta raíz donde se almacenarán todos los documentos"})]})]});case"ONEDRIVE":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Client ID (Application ID)"}),(0,b.jsx)("input",{type:"text",value:u.clientId||"",onChange:a=>v({...u,clientId:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"12345678-1234-1234-1234-123456789abc"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Client Secret"}),(0,b.jsx)("input",{type:w?"text":"password",value:u.clientSecret||"",onChange:a=>v({...u,clientSecret:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Refresh Token"}),(0,b.jsx)("input",{type:w?"text":"password",value:u.refreshToken||"",onChange:a=>v({...u,refreshToken:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"M.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Tenant ID (Opcional)"}),(0,b.jsx)("input",{type:"text",value:u.tenantId||"",onChange:a=>v({...u,tenantId:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"12345678-1234-1234-1234-123456789abc"})]})]});case"SHAREPOINT":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Site URL"}),(0,b.jsx)("input",{type:"text",value:u.siteUrl||"",onChange:a=>v({...u,siteUrl:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"https://yourcompany.sharepoint.com/sites/yoursite"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Client ID"}),(0,b.jsx)("input",{type:"text",value:u.clientId||"",onChange:a=>v({...u,clientId:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"12345678-1234-1234-1234-123456789abc"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Client Secret"}),(0,b.jsx)("input",{type:w?"text":"password",value:u.clientSecret||"",onChange:a=>v({...u,clientSecret:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Tenant ID"}),(0,b.jsx)("input",{type:"text",value:u.tenantId||"",onChange:a=>v({...u,tenantId:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"12345678-1234-1234-1234-123456789abc"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Library Name (Opcional)"}),(0,b.jsx)("input",{type:"text",value:u.libraryName||"",onChange:a=>v({...u,libraryName:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"Documents"})]})]});case"S3":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Access Key ID"}),(0,b.jsx)("input",{type:"text",value:u.accessKeyId||"",onChange:a=>v({...u,accessKeyId:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"AKIAIOSFODNN7EXAMPLE"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Secret Access Key"}),(0,b.jsx)("input",{type:w?"text":"password",value:u.secretAccessKey||"",onChange:a=>v({...u,secretAccessKey:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Region"}),(0,b.jsx)("input",{type:"text",value:u.region||"",onChange:a=>v({...u,region:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"us-east-1"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Bucket Name"}),(0,b.jsx)("input",{type:"text",value:u.bucket||"",onChange:a=>v({...u,bucket:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"my-maturity360-bucket"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Endpoint (Opcional)"}),(0,b.jsx)("input",{type:"text",value:u.endpoint||"",onChange:a=>v({...u,endpoint:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"https://s3.amazonaws.com"}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Para servicios compatibles con S3 (MinIO, DigitalOcean Spaces, etc.)"})]})]});case"LOCAL":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Ruta Base"}),(0,b.jsx)("input",{type:"text",value:u.basePath||"",onChange:a=>v({...u,basePath:a.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"/var/www/maturity360/storage"}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Ruta absoluta en el servidor donde se almacenarán los archivos"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Límite de Almacenamiento (GB)"}),(0,b.jsx)("input",{type:"number",value:u.maxSizeGB||"",onChange:a=>v({...u,maxSizeGB:parseInt(a.target.value)||void 0}),className:"w-full p-3 border border-slate-200 rounded-lg outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"100"})]})]});default:return null}})()]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Probar Conexión"}),(0,b.jsx)("button",{onClick:F,disabled:y||!G(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:y?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Probando conexión..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.CloudArrowUp,{size:20,weight:"bold"}),"Probar Conexión"]})}),A&&(0,b.jsxs)("div",{className:`mt-4 p-4 rounded-lg flex items-start gap-3 ${"success"===A.status?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:["success"===A.status?(0,b.jsx)(g.CheckCircle,{size:24,className:"text-green-600 flex-shrink-0",weight:"fill"}):(0,b.jsx)(h.XCircle,{size:24,className:"text-red-600 flex-shrink-0",weight:"fill"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:`font-bold ${"success"===A.status?"text-green-800":"text-red-800"}`,children:"success"===A.status?"Conexión Exitosa":"Error de Conexión"}),(0,b.jsx)("p",{className:`text-sm ${"success"===A.status?"text-green-700":"text-red-700"}`,children:A.message})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end gap-4",children:(0,b.jsxs)("button",{onClick:()=>{r&&(r.storageConfig={provider:s,enabled:!0,config:u,lastTested:A?.status==="success"?new Date().toISOString():void 0,testStatus:A?.status,testMessage:A?.message},D(!0),setTimeout(()=>D(!1),3e3))},disabled:!G()||A?.status!=="success",className:"px-8 py-3 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[(0,b.jsx)(o.FloppyDisk,{size:20,weight:"bold"}),"Guardar Configuración"]})}),C&&(0,b.jsxs)("div",{className:"fixed bottom-8 right-8 bg-green-600 text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3 animate-fadeIn",children:[(0,b.jsx)(g.CheckCircle,{size:24,weight:"fill"}),(0,b.jsx)("span",{className:"font-bold",children:"Configuración guardada exitosamente"})]}),r?.storageConfig&&(0,b.jsxs)("div",{className:"mt-6 bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3",children:[(0,b.jsx)(i.Warning,{size:24,className:"text-amber-600 flex-shrink-0",weight:"fill"}),(0,b.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,b.jsx)("p",{className:"font-bold mb-1",children:"Importante:"}),(0,b.jsx)("p",{children:"Cambiar el proveedor de almacenamiento no migrará automáticamente los archivos existentes. Asegúrate de realizar una migración manual si es necesario."})]})]})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=app_admin_storage_page_tsx_eeb8ceb1._.js.map