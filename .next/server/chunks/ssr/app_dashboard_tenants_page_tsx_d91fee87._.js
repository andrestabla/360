module.exports=[6512,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(98263),e=a.i(10158),f=a.i(39577),g=a.i(60217);let h=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M116,128V48a12,12,0,0,1,24,0v80a12,12,0,0,1-24,0Zm66.55-82a12,12,0,0,0-13.1,20.1C191.41,80.37,204,103,204,128a76,76,0,0,1-152,0c0-25,12.59-47.63,34.55-61.95A12,12,0,0,0,73.45,46C44.56,64.78,28,94.69,28,128a100,100,0,0,0,200,0C228,94.69,211.44,64.78,182.55,46Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z",opacity:"0.2"}),c.createElement("path",{d:"M120,128V48a8,8,0,0,1,16,0v80a8,8,0,0,1-16,0Zm60.37-78.7a8,8,0,0,0-8.74,13.4C194.74,77.77,208,101.57,208,128a80,80,0,0,1-160,0c0-26.43,13.26-50.23,36.37-65.3a8,8,0,0,0-8.74-13.4C47.9,67.38,32,96.06,32,128a96,96,0,0,0,192,0C224,96.06,208.1,67.38,180.37,49.3Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104,104,0,0,0,128,24Zm-8,40a8,8,0,0,1,16,0v64a8,8,0,0,1-16,0Zm8,144A80,80,0,0,1,83.55,61.48a8,8,0,1,1,8.9,13.29,64,64,0,1,0,71.1,0,8,8,0,1,1,8.9-13.29A80,80,0,0,1,128,208Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M122,128V48a6,6,0,0,1,12,0v80a6,6,0,0,1-12,0Zm57.28-77A6,6,0,0,0,172.72,61C196.41,76.47,210,100.88,210,128a82,82,0,0,1-164,0c0-27.12,13.59-51.53,37.28-67A6,6,0,0,0,76.72,51C49.57,68.68,34,96.75,34,128a94,94,0,0,0,188,0C222,96.75,206.43,68.68,179.28,51Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M120,128V48a8,8,0,0,1,16,0v80a8,8,0,0,1-16,0Zm60.37-78.7a8,8,0,0,0-8.74,13.4C194.74,77.77,208,101.57,208,128a80,80,0,0,1-160,0c0-26.43,13.26-50.23,36.37-65.3a8,8,0,0,0-8.74-13.4C47.9,67.38,32,96.06,32,128a96,96,0,0,0,192,0C224,96.06,208.1,67.38,180.37,49.3Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M124,128V48a4,4,0,0,1,8,0v80a4,4,0,0,1-8,0Zm54.18-75.35a4,4,0,1,0-4.36,6.7C198.08,75.17,212,100.2,212,128a84,84,0,0,1-168,0c0-27.8,13.92-52.83,38.18-68.65a4,4,0,0,0-4.36-6.7C51.24,70,36,97.44,36,128a92,92,0,0,0,184,0C220,97.44,204.76,70,178.18,52.65Z"}))]]),i=c.forwardRef((a,b)=>c.createElement(g.default,{ref:b,...a,weights:h}));i.displayName="PowerIcon";var j=a.i(60144),k=a.i(70054),l=a.i(63144),m=a.i(82499),n=a.i(16785),o=a.i(82665),p=a.i(48061);let q=[{id:"custom",name:"Personalizado",features:[]},{id:"starter",name:"Plan Starter",features:["DASHBOARD","WORKFLOWS"]},{id:"pro",name:"Plan Pro",features:["DASHBOARD","WORKFLOWS","REPOSITORY","CHAT"]},{id:"enterprise",name:"Plan Enterprise",features:["DASHBOARD","WORKFLOWS","REPOSITORY","CHAT","ANALYTICS","SURVEYS","AUDIT"]}],r=[{id:"DASHBOARD",label:"Dashboard"},{id:"WORKFLOWS",label:"Gestión de Trámites"},{id:"REPOSITORY",label:"Repositorio Documental"},{id:"CHAT",label:"Mensajería Corporativa"},{id:"ANALYTICS",label:"Analítica Avanzada"},{id:"SURVEYS",label:"Encuestas y Clima"},{id:"ADMIN",label:"Panel Administrativo"},{id:"AUDIT",label:"Auditoría"}];function s(){let{isSuperAdmin:a,createTenant:f,updateTenant:g,deleteTenant:h}=(0,d.useApp)(),[i,l]=(0,c.useState)(!1),[n,s]=(0,c.useState)(null),[u,v]=(0,c.useState)(0),[w,x]=(0,c.useState)(1),[y,z]=(0,c.useState)({name:"",slug:"",domains:[],timezone:"America/Bogota",locale:"es-CO",branding:{primary_color:"#2563eb",accent_color:"#1d4ed8"},policies:{max_failed_logins:3},features:["DASHBOARD","WORKFLOWS","REPOSITORY","CHAT","ANALYTICS","SURVEYS"],sector:p.SECTOR_BENCHMARKS_LIST[0]?.sector||"technology",contactName:"",contactEmail:"",contactPhone:""}),[A,B]=(0,c.useState)("custom"),[C,D]=(0,c.useState)("");if(!a)return(0,b.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Access Denied. Platform Admins only."});let E=o.DB.tenants,F=Math.ceil(E.length/6),G=E.slice((w-1)*6,6*w);return(0,b.jsxs)("div",{className:"p-6 max-w-6xl mx-auto animate-fadeIn",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Gestión de Tenants"}),(0,b.jsx)("p",{className:"text-slate-500 text-sm",children:"Administra las empresas y organizaciones en la plataforma."})]}),(0,b.jsxs)("button",{onClick:()=>{s(null);let{defaultLocale:a,defaultTimezone:b,defaultModules:c}=o.DB.platformSettings;z({name:"",slug:"",domains:[],timezone:b,locale:a,branding:{primary_color:"#2563eb",accent_color:"#1d4ed8"},policies:{max_failed_logins:3},features:[...c],sector:p.SECTOR_BENCHMARKS_LIST[0]?.sector||"technology",contactName:"",contactEmail:"",contactPhone:""}),B("custom"),D(""),l(!0)},className:"btn btn-primary flex items-center gap-2",children:[(0,b.jsx)(e.Plus,{weight:"bold"})," Nuevo Tenant"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(0,b.jsx)(t,{tenants:G,onEdit:a=>{s(a.id);let{branding:b,policies:c,...d}=a;z({...d,branding:{...b},policies:{...c},features:a.features||[],sector:a.sector||p.SECTOR_BENCHMARKS_LIST[0]?.sector||"technology",contactName:a.contactName||"",contactEmail:a.contactEmail||"",contactPhone:a.contactPhone||""});let e=q.find(b=>"custom"!==b.id&&b.features.length===(a.features||[]).length&&b.features.every(b=>a.features?.includes(b)));B(e?e.id:"custom"),D(a.domains[0]||""),l(!0)},onToggleStatus:a=>{let b="ACTIVE"===a.status?"SUSPENDED":"ACTIVE";g(a.id,{status:b}),v(a=>a+1)},onDelete:a=>{"SUSPENDED"!==a.status?alert("Solo puede eliminar tenants suspendidos."):confirm(`\xbfELIMINAR ${a.name}? Esta acci\xf3n es irreversible.`)&&(h(a.id),v(a=>a+1))}})}),F>1&&(0,b.jsxs)("div",{className:"flex justify-center mt-8 gap-2",children:[(0,b.jsx)("button",{disabled:1===w,onClick:()=>x(a=>Math.max(1,a-1)),className:"px-3 py-1 bg-white border border-slate-200 rounded-lg text-sm disabled:opacity-50",children:"Anterior"}),(0,b.jsxs)("span",{className:"px-3 py-1 text-sm text-slate-500 self-center",children:["Página ",w," de ",F]}),(0,b.jsx)("button",{disabled:w===F,onClick:()=>x(a=>Math.min(F,a+1)),className:"px-3 py-1 bg-white border border-slate-200 rounded-lg text-sm disabled:opacity-50",children:"Siguiente"})]}),i&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden animate-fadeIn",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[(0,b.jsx)("h3",{className:"font-bold text-slate-800",children:n?"Editar Organización":"Crear Nueva Organización"}),(0,b.jsx)("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-slate-600",children:"×"})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b={...y,domains:C?[C]:[]};n?g(n,b):f(b),l(!1),v(a=>a+1)},className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Nombre Empresa"}),(0,b.jsx)("input",{required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 ring-blue-500/20 outline-none transition-all",value:y.name,onChange:a=>{let b=a.target.value,c=b.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");z(a=>({...a,name:b,slug:c}))},placeholder:"Ej. Acme Corp"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Slug (URL)"}),(0,b.jsx)("input",{required:!0,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 ring-blue-500/20 outline-none transition-all ${n?"bg-slate-50 text-slate-500 opacity-70":""}`,value:y.slug,onChange:a=>z({...y,slug:a.target.value}),placeholder:"ej. acme",disabled:!!n})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-2",children:"Plan de Suscripción"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:q.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>{var b;let c;return B(b=a.id),void((c=q.find(a=>a.id===b))&&"custom"!==b&&z(a=>({...a,features:[...c.features]})))},className:`px-2 py-2 rounded-lg border text-xs font-medium transition-all ${A===a.id?"bg-blue-50 border-blue-500 text-blue-700 ring-1 ring-blue-500":"bg-white border-slate-200 text-slate-600 hover:border-blue-300"}`,children:a.name},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Sector / Industria"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("select",{className:"w-full appearance-none px-3 py-2 border rounded-lg bg-white focus:ring-2 ring-blue-500/20 outline-none pr-8 cursor-pointer",value:y.sector,onChange:a=>z({...y,sector:a.target.value}),children:p.SECTOR_BENCHMARKS_LIST.map((a,c)=>(0,b.jsx)("option",{value:a.sector,children:a.sector},c))}),(0,b.jsx)(m.CaretDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",size:14,weight:"bold"})]}),(0,b.jsx)("p",{className:"text-[10px] text-slate-400 mt-1",children:"Este campo configura automáticamente los benchmarks del sector."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Dominio Principal (Single Sign-On)"}),(0,b.jsx)("input",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 ring-blue-500/20 outline-none transition-all",value:C,onChange:a=>D(a.target.value),placeholder:"ej. acme.com (opcional)"})]}),(0,b.jsxs)("div",{className:"pt-2 border-t border-slate-100",children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-slate-800 mb-2 uppercase",children:"Datos de Contacto"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Nombre Contacto"}),(0,b.jsx)("input",{className:"w-full px-3 py-2 border rounded-lg",value:y.contactName,onChange:a=>z({...y,contactName:a.target.value}),placeholder:"Nombre del Admin"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Email (Admin)"}),(0,b.jsx)("input",{className:"w-full px-3 py-2 border rounded-lg",value:y.contactEmail,onChange:a=>z({...y,contactEmail:a.target.value}),placeholder:"admin@empresa.com"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Teléfono"}),(0,b.jsx)("input",{className:"w-full px-3 py-2 border rounded-lg",value:y.contactPhone,onChange:a=>z({...y,contactPhone:a.target.value}),placeholder:"+57..."})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Timezone"}),(0,b.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg bg-white",value:y.timezone,onChange:a=>z({...y,timezone:a.target.value}),children:[(0,b.jsx)("option",{value:"America/Bogota",children:"Bogotá (GMT-5)"}),(0,b.jsx)("option",{value:"America/Mexico_City",children:"México (GMT-6)"}),(0,b.jsx)("option",{value:"America/Santiago",children:"Santiago (GMT-4)"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Idioma"}),(0,b.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg bg-white",value:y.locale,onChange:a=>z({...y,locale:a.target.value}),children:[(0,b.jsx)("option",{value:"es-CO",children:"Español (CO)"}),(0,b.jsx)("option",{value:"en-US",children:"English (US)"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-2",children:"Módulos Habilitados (HI 2.1)"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2 bg-slate-50 p-3 rounded-xl border border-slate-100 max-h-48 overflow-y-auto",children:r.map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 p-2 bg-white border border-slate-200 rounded-lg hover:border-blue-400 cursor-pointer transition-all",children:[(0,b.jsx)("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500",checked:y.features?.includes(a.id)||!1,onChange:b=>((a,b)=>{let c=y.features||[];if(b)z(b=>({...b,features:[...c,a]})),B("custom");else{if(["DASHBOARD","ADMIN"].includes(a))return void alert("No se puede desactivar este módulo base.");if(!confirm(`\xbfDesactivar m\xf3dulo ${a}? Los usuarios perder\xe1n acceso inmediato a esta funcionalidad.`))return;z(b=>({...b,features:c.filter(b=>b!==a)})),B("custom")}})(a.id,b.target.checked)}),(0,b.jsx)("span",{className:"text-sm font-medium text-slate-700",children:a.label})]},a.id))})]}),!n&&o.DB.platformSettings.authPolicy.enforceSSO&&(0,b.jsxs)("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-100 mt-2 flex items-center gap-2 text-xs text-amber-800",children:[(0,b.jsx)(k.Warning,{size:16,weight:"fill"}),(0,b.jsx)("strong",{children:"Política Global:"})," Este tenant requerirá configuración obligatoria de SSO."]}),!n&&(0,b.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100 mt-4",children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"text-blue-600",children:(0,b.jsx)(j.CheckCircle,{size:20,weight:"fill"})}),(0,b.jsxs)("div",{className:"text-xs text-blue-800",children:[(0,b.jsx)("span",{className:"font-bold block mb-1",children:"Configuración Automática"}),"Se creará un ",(0,b.jsx)("strong",{children:"Admin user"})," inicial y una estructura base. Los datos estarán aislados."]})]})}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100 mt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 text-slate-500 hover:bg-slate-100 rounded-lg text-sm font-medium",children:"Cancelar"}),(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium shadow-lg shadow-blue-500/20",children:n?"Guardar Cambios":"Crear Tenant"})]})]})]})})]})}function t({tenants:a,onEdit:c,onToggleStatus:d,onDelete:e}){return(0,b.jsx)(b.Fragment,{children:a.map(a=>(0,b.jsxs)("div",{className:`bg-white border border-slate-200 rounded-xl p-5 hover:shadow-lg transition-all group relative overflow-hidden ${"SUSPENDED"===a.status?"opacity-70 grayscale":""}`,children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-1 h-full",style:{background:a.branding.primary_color}}),(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3 pl-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-100 border border-slate-200 grid place-items-center text-xl font-bold text-slate-600 uppercase",children:a.branding.logo_url?(0,b.jsx)("img",{src:a.branding.logo_url,className:"w-full h-full object-cover rounded-lg",alt:"logo"}):a.name.substring(0,2)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-slate-800",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[(0,b.jsx)("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 font-mono",children:a.id}),(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{children:a.slug})]})]})]}),(0,b.jsx)("div",{className:`px-2 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider ${"ACTIVE"===a.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.status})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-500 pl-2 mt-4",children:[(0,b.jsxs)("div",{className:"bg-slate-50 p-2 rounded border border-slate-100",children:[(0,b.jsx)("div",{className:"uppercase text-[10px] tracking-wide mb-1 opacity-70",children:"Dominios"}),(0,b.jsx)("div",{className:"font-medium text-slate-700 truncate",children:a.domains[0]||"N/A"})]}),(0,b.jsxs)("div",{className:"bg-slate-50 p-2 rounded border border-slate-100",children:[(0,b.jsx)("div",{className:"uppercase text-[10px] tracking-wide mb-1 opacity-70",children:"Sector"}),(0,b.jsx)("div",{className:"font-medium text-slate-700 flex items-center gap-1",children:a.sector?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Factory,{size:12})," ",a.sector]}):"No definido"})]}),(0,b.jsxs)("div",{className:"bg-slate-50 p-2 rounded border border-slate-100 col-span-2",children:[(0,b.jsxs)("div",{className:"uppercase text-[10px] tracking-wide mb-1 opacity-70",children:["Módulos Activos (",a.features?.length||0,")"]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.features?.map(a=>(0,b.jsx)("span",{className:"text-[9px] px-1.5 py-0.5 bg-white text-slate-600 rounded border border-slate-200 shadow-sm",title:a,children:{DASHBOARD:"Dash",WORKFLOWS:"Flows",REPOSITORY:"Docs",CHAT:"Chat",ANALYTICS:"Data",SURVEYS:"Enc",ADMIN:"Admin",AUDIT:"Audit"}[a]||a},a))})]}),(0,b.jsxs)("div",{className:"bg-slate-50 p-2 rounded border border-slate-100 col-span-2",children:[(0,b.jsx)("div",{className:"uppercase text-[10px] tracking-wide mb-1 opacity-70",children:"Portal de Acceso (Local)"}),(0,b.jsxs)("a",{href:`http://${a.id}.localhost:3000`,target:"_blank",rel:"noreferrer",className:"font-mono text-blue-600 hover:underline block truncate",children:["http://",a.id,".localhost:3000"]})]})]}),(0,b.jsxs)("div",{className:"mt-4 pt-3 border-t border-slate-100 flex justify-end gap-2 pl-2",children:[(0,b.jsxs)("button",{onClick:()=>d(a),className:`text-xs flex items-center gap-1 px-2 py-1 rounded transition-colors ${"ACTIVE"===a.status?"text-red-500 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,children:[(0,b.jsx)(i,{size:14,weight:"bold"})," ","ACTIVE"===a.status?"Suspender":"Activar"]}),(0,b.jsxs)("button",{onClick:()=>c(a),className:"text-xs flex items-center gap-1 text-blue-600 hover:text-blue-700 px-3 py-1 rounded bg-blue-50 hover:bg-blue-100 transition-colors font-medium",children:["Administrar ",(0,b.jsx)(l.CaretRight,{})]}),"SUSPENDED"===a.status&&(0,b.jsx)("button",{onClick:()=>e(a),className:"text-xs flex items-center gap-1 text-white bg-red-500 hover:bg-red-600 px-3 py-1 rounded transition-colors",title:"Eliminar Definitivamente",children:(0,b.jsx)(f.Trash,{size:14,weight:"bold"})})]})]},a.id))})}a.s(["default",()=>s],6512)}];

//# sourceMappingURL=app_dashboard_tenants_page_tsx_d91fee87._.js.map