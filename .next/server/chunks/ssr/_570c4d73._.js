module.exports=[27964,a=>{"use strict";var b=a.i(72131),c=a.i(60217);let d=new Map([["bold",b.createElement(b.Fragment,null,b.createElement("path",{d:"M232.49,215.51,185,168a92.12,92.12,0,1,0-17,17l47.53,47.54a12,12,0,0,0,17-17ZM44,112a68,68,0,1,1,68,68A68.07,68.07,0,0,1,44,112Z"}))],["duotone",b.createElement(b.Fragment,null,b.createElement("path",{d:"M192,112a80,80,0,1,1-80-80A80,80,0,0,1,192,112Z",opacity:"0.2"}),b.createElement("path",{d:"M229.66,218.34,179.6,168.28a88.21,88.21,0,1,0-11.32,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"}))],["fill",b.createElement(b.Fragment,null,b.createElement("path",{d:"M168,112a56,56,0,1,1-56-56A56,56,0,0,1,168,112Zm61.66,117.66a8,8,0,0,1-11.32,0l-50.06-50.07a88,88,0,1,1,11.32-11.31l50.06,50.06A8,8,0,0,1,229.66,229.66ZM112,184a72,72,0,1,0-72-72A72.08,72.08,0,0,0,112,184Z"}))],["light",b.createElement(b.Fragment,null,b.createElement("path",{d:"M228.24,219.76l-51.38-51.38a86.15,86.15,0,1,0-8.48,8.48l51.38,51.38a6,6,0,0,0,8.48-8.48ZM38,112a74,74,0,1,1,74,74A74.09,74.09,0,0,1,38,112Z"}))],["regular",b.createElement(b.Fragment,null,b.createElement("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"}))],["thin",b.createElement(b.Fragment,null,b.createElement("path",{d:"M226.83,221.17l-52.7-52.7a84.1,84.1,0,1,0-5.66,5.66l52.7,52.7a4,4,0,0,0,5.66-5.66ZM36,112a76,76,0,1,1,76,76A76.08,76.08,0,0,1,36,112Z"}))]]),e=b.forwardRef((a,e)=>b.createElement(c.default,{ref:e,...a,weights:d}));e.displayName="MagnifyingGlassIcon",a.s(["MagnifyingGlass",()=>e],27964)},4971,a=>{"use strict";var b=a.i(72131),c=a.i(60217);let d=new Map([["bold",b.createElement(b.Fragment,null,b.createElement("path",{d:"M228,144v64a12,12,0,0,1-12,12H40a12,12,0,0,1-12-12V144a12,12,0,0,1,24,0v52H204V144a12,12,0,0,1,24,0Zm-108.49,8.49a12,12,0,0,0,17,0l40-40a12,12,0,0,0-17-17L140,115V32a12,12,0,0,0-24,0v83L96.49,95.51a12,12,0,0,0-17,17Z"}))],["duotone",b.createElement(b.Fragment,null,b.createElement("path",{d:"M216,48V208H40V48A16,16,0,0,1,56,32H200A16,16,0,0,1,216,48Z",opacity:"0.2"}),b.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,124.69V32a8,8,0,0,0-16,0v92.69L93.66,98.34a8,8,0,0,0-11.32,11.32Z"}))],["fill",b.createElement(b.Fragment,null,b.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40A8,8,0,0,0,168,96H136V32a8,8,0,0,0-16,0V96H88a8,8,0,0,0-5.66,13.66Z"}))],["light",b.createElement(b.Fragment,null,b.createElement("path",{d:"M222,144v64a6,6,0,0,1-6,6H40a6,6,0,0,1-6-6V144a6,6,0,0,1,12,0v58H210V144a6,6,0,0,1,12,0Zm-98.24,4.24a6,6,0,0,0,8.48,0l40-40a6,6,0,0,0-8.48-8.48L134,129.51V32a6,6,0,0,0-12,0v97.51L92.24,99.76a6,6,0,0,0-8.48,8.48Z"}))],["regular",b.createElement(b.Fragment,null,b.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,124.69V32a8,8,0,0,0-16,0v92.69L93.66,98.34a8,8,0,0,0-11.32,11.32Z"}))],["thin",b.createElement(b.Fragment,null,b.createElement("path",{d:"M220,144v64a4,4,0,0,1-4,4H40a4,4,0,0,1-4-4V144a4,4,0,0,1,8,0v60H212V144a4,4,0,0,1,8,0Zm-94.83,2.83a4,4,0,0,0,5.66,0l40-40a4,4,0,1,0-5.66-5.66L132,134.34V32a4,4,0,0,0-8,0V134.34L90.83,101.17a4,4,0,0,0-5.66,5.66Z"}))]]),e=b.forwardRef((a,e)=>b.createElement(c.default,{ref:e,...a,weights:d}));e.displayName="DownloadSimpleIcon",a.s(["DownloadSimple",()=>e],4971)},80587,a=>{"use strict";var b=a.i(72131),c=a.i(60217);let d=new Map([["bold",b.createElement(b.Fragment,null,b.createElement("path",{d:"M244,56v48a12,12,0,0,1-12,12H184a12,12,0,1,1,0-24H201.1l-19-17.38c-.13-.12-.26-.24-.38-.37A76,76,0,1,0,127,204h1a75.53,75.53,0,0,0,52.15-20.72,12,12,0,0,1,16.49,17.45A99.45,99.45,0,0,1,128,228h-1.37A100,100,0,1,1,198.51,57.06L220,76.72V56a12,12,0,0,1,24,0Z"}))],["duotone",b.createElement(b.Fragment,null,b.createElement("path",{d:"M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z",opacity:"0.2"}),b.createElement("path",{d:"M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1,0-16H211.4L184.81,71.64l-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,0,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60L224,85.8V56a8,8,0,1,1,16,0Z"}))],["fill",b.createElement(b.Fragment,null,b.createElement("path",{d:"M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1-5.66-13.66l17-17-10.55-9.65-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,1,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60l10.93,10L226.34,50.3A8,8,0,0,1,240,56Z"}))],["light",b.createElement(b.Fragment,null,b.createElement("path",{d:"M238,56v48a6,6,0,0,1-6,6H184a6,6,0,0,1,0-12h32.55l-30.38-27.8c-.06-.06-.12-.13-.19-.19a82,82,0,1,0-1.7,117.65,6,6,0,0,1,8.24,8.73A93.46,93.46,0,0,1,128,222h-1.28A94,94,0,1,1,194.37,61.4L226,90.35V56a6,6,0,1,1,12,0Z"}))],["regular",b.createElement(b.Fragment,null,b.createElement("path",{d:"M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1,0-16H211.4L184.81,71.64l-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,0,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60L224,85.8V56a8,8,0,1,1,16,0Z"}))],["thin",b.createElement(b.Fragment,null,b.createElement("path",{d:"M236,56v48a4,4,0,0,1-4,4H184a4,4,0,0,1,0-8h37.7L187.53,68.69l-.13-.12a84,84,0,1,0-1.75,120.51,4,4,0,0,1,5.5,5.82A91.43,91.43,0,0,1,128,220h-1.26A92,92,0,1,1,193,62.84l35,32.05V56a4,4,0,1,1,8,0Z"}))]]),e=b.forwardRef((a,e)=>b.createElement(c.default,{ref:e,...a,weights:d}));e.displayName="ArrowClockwiseIcon",a.s(["ArrowClockwise",()=>e],80587)},70951,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(98263),e=a.i(82665),f=a.i(50329),g=a.i(27964),h=a.i(4971),i=a.i(80587),j=a.i(49704),k=a.i(63144);function l(){let{isSuperAdmin:a}=(0,d.useApp)(),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("ALL"),[p,q]=(0,c.useState)("ALL"),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(1),[x,y]=(0,c.useState)(0);if(!a)return(0,b.jsx)("div",{className:"p-8 text-center text-red-500",children:"Acceso Denegado. Solo Super Admins."});let z=(0,c.useMemo)(()=>Array.from(new Set(e.DB.platformAudit.map(a=>a.event_type))).sort(),[x]),A=(0,c.useMemo)(()=>e.DB.platformAudit.filter(a=>{let b=l.toLowerCase(),c=a.event_type.toLowerCase().includes(b)||a.actor_name.toLowerCase().includes(b)||a.target_tenant_id&&a.target_tenant_id.toLowerCase().includes(b)||a.target_user_id&&a.target_user_id.toLowerCase().includes(b),d="ALL"===n||a.target_tenant_id===n,e="ALL"===p||a.event_type===p,f=!0;if(r&&(f=f&&new Date(a.created_at)>=new Date(r)),t){let b=new Date(t);b.setDate(b.getDate()+1),f=f&&new Date(a.created_at)<b}return c&&d&&e&&f}).sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime()),[l,n,p,r,t,x]),B=Math.ceil(A.length/20),C=A.slice((v-1)*20,20*v);return(0,b.jsxs)("div",{className:"max-w-7xl mx-auto p-6 animate-fadeIn",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,b.jsx)(f.ShieldCheck,{className:"text-purple-600"})," AuditorÃ­a Global"]}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Registro inalterable de actividades crÃ­ticas en la plataforma."})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>y(a=>a+1),className:"btn btn-secondary",title:"Actualizar",children:(0,b.jsx)(i.ArrowClockwise,{})}),(0,b.jsxs)("button",{onClick:()=>{let a=new Blob([["ID,Fecha,Evento,Actor ID,Actor Nombre,Target Tenant,Target User,IP,Metadata",...A.map(a=>[a.id,new Date(a.created_at).toISOString(),a.event_type,a.actor_id,`"${a.actor_name}"`,a.target_tenant_id||"",a.target_user_id||"",a.ip,`"${JSON.stringify(a.metadata).replace(/"/g,'""')}"`]).map(a=>a.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),b=URL.createObjectURL(a),c=document.createElement("a");c.setAttribute("href",b),c.setAttribute("download",`auditoria_export_${new Date().toISOString().split("T")[0]}.csv`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c),e.DB.platformAudit.unshift({id:`audit-${Date.now()}`,event_type:"AUDIT_EXPORT",actor_id:"superadmin",actor_name:"Super Admin",metadata:{count:A.length,filters:{search:l,filterTenantId:n,filterEventType:p}},ip:"127.0.0.1",created_at:new Date().toISOString()}),y(a=>a+1)},className:"btn btn-primary flex items-center gap-2",children:[(0,b.jsx)(h.DownloadSimple,{weight:"bold"})," Exportar CSV"]})]})]}),(0,b.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-6 space-y-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"BÃºsqueda"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g.MagnifyingGlass,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,b.jsx)("input",{className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 ring-purple-500/20 outline-none",placeholder:"Buscar por evento, usuario, tenant...",value:l,onChange:a=>{m(a.target.value),w(1)}})]})]}),(0,b.jsxs)("div",{className:"w-48",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Tenant"}),(0,b.jsxs)("select",{className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 ring-purple-500/20 outline-none bg-slate-50",value:n,onChange:a=>{o(a.target.value),w(1)},children:[(0,b.jsx)("option",{value:"ALL",children:"Todos los Tenants"}),e.DB.tenants.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:"w-48",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Tipo de Evento"}),(0,b.jsxs)("select",{className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 ring-purple-500/20 outline-none bg-slate-50",value:p,onChange:a=>{q(a.target.value),w(1)},children:[(0,b.jsx)("option",{value:"ALL",children:"Todos"}),z.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:"w-36",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Desde"}),(0,b.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 ring-purple-500/20 outline-none",value:r,onChange:a=>{s(a.target.value),w(1)}})]}),(0,b.jsxs)("div",{className:"w-36",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Hasta"}),(0,b.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 ring-purple-500/20 outline-none",value:t,onChange:a=>{u(a.target.value),w(1)}})]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"bg-slate-50 border-b border-slate-200 text-slate-500 uppercase font-semibold text-xs",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 whitespace-nowrap",children:"Fecha / Hora"}),(0,b.jsx)("th",{className:"px-6 py-4 whitespace-nowrap",children:"Evento"}),(0,b.jsx)("th",{className:"px-6 py-4 whitespace-nowrap",children:"Actor"}),(0,b.jsx)("th",{className:"px-6 py-4 whitespace-nowrap",children:"Contexto"}),(0,b.jsx)("th",{className:"px-6 py-4 min-w-[300px]",children:"Detalle (Metadata)"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-100",children:0===C.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-400 italic",children:"No se encontraron eventos de auditorÃ­a con los filtros actuales."})}):C.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors group",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-slate-500 text-xs",children:new Date(a.created_at).toLocaleString()}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:"font-mono text-xs font-medium bg-slate-100 px-2 py-1 rounded text-slate-700 border border-slate-200",children:a.event_type})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium text-slate-900",children:a.actor_name}),(0,b.jsx)("span",{className:"text-[10px] text-slate-400 font-mono",children:a.actor_id})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[a.target_tenant_id&&(0,b.jsxs)("span",{className:"text-xs text-slate-600 flex items-center gap-1",children:["ðŸ¢ ",e.DB.tenants.find(b=>b.id===a.target_tenant_id)?.name||a.target_tenant_id]}),a.target_user_id&&(0,b.jsxs)("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:["ðŸ‘¤ ",e.DB.users.find(b=>b.id===a.target_user_id)?.name||a.target_user_id]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-xs text-slate-600 break-all font-mono bg-slate-50/50",children:(0,b.jsx)("div",{className:"max-h-20 overflow-y-auto custom-scrollbar",children:JSON.stringify(a.metadata,null,2)})})]},a.id))})]})}),B>1&&(0,b.jsxs)("div",{className:"px-6 py-4 border-t border-slate-100 bg-slate-50 flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:["Mostrando ",(v-1)*20+1," - ",Math.min(20*v,A.length)," de ",A.length," eventos"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>w(a=>Math.max(1,a-1)),disabled:1===v,className:"p-2 border border-slate-200 rounded bg-white disabled:opacity-50 hover:bg-slate-100",children:(0,b.jsx)(j.CaretLeft,{})}),(0,b.jsxs)("span",{className:"flex items-center px-4 text-xs font-medium text-slate-600",children:["PÃ¡gina ",v," de ",B]}),(0,b.jsx)("button",{onClick:()=>w(a=>Math.min(B,a+1)),disabled:v===B,className:"p-2 border border-slate-200 rounded bg-white disabled:opacity-50 hover:bg-slate-100",children:(0,b.jsx)(k.CaretRight,{})})]})]})]})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=_570c4d73._.js.map