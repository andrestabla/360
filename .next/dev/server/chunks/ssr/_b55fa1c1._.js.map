{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/i18n.ts"],"sourcesContent":["const translations: Record<string, Record<string, string>> = {\n  es: {\n    dashboard: 'Panel Principal',\n    home: 'Inicio',\n    workflows: 'Flujos de Trabajo',\n    repository: 'Repositorio',\n    chat: 'Chat',\n    analytics: 'Analiticas',\n    surveys: 'Encuestas',\n    profile: 'Perfil',\n    settings: 'Configuracion',\n    logout: 'Cerrar Sesion',\n    admin: 'Administracion',\n    users: 'Usuarios',\n    units: 'Unidades',\n    roles: 'Roles',\n    storage: 'Almacenamiento',\n    communications: 'Comunicaciones',\n    audit: 'Auditoria',\n    tenants: 'Organizaciones',\n    platform: 'Plataforma',\n    search: 'Buscar',\n    save: 'Guardar',\n    cancel: 'Cancelar',\n    delete: 'Eliminar',\n    edit: 'Editar',\n    create: 'Crear',\n    add: 'Agregar',\n    close: 'Cerrar',\n    confirm: 'Confirmar',\n    loading: 'Cargando...',\n    error: 'Error',\n    success: 'Exito',\n    warning: 'Advertencia',\n    info: 'Informacion',\n    welcome: 'Bienvenido',\n    documents: 'Documentos',\n    projects: 'Proyectos',\n    activities: 'Actividades',\n    phases: 'Fases',\n    status: 'Estado',\n    active: 'Activo',\n    inactive: 'Inactivo',\n    pending: 'Pendiente',\n    completed: 'Completado',\n    archived: 'Archivado',\n    all: 'Todos',\n    filter: 'Filtrar',\n    sort: 'Ordenar',\n    export: 'Exportar',\n    import: 'Importar',\n    download: 'Descargar',\n    upload: 'Subir',\n    view: 'Ver',\n    details: 'Detalles',\n    description: 'Descripcion',\n    name: 'Nombre',\n    email: 'Correo',\n    phone: 'Telefono',\n    date: 'Fecha',\n    time: 'Hora',\n    type: 'Tipo',\n    category: 'Categoria',\n    tags: 'Etiquetas',\n    comments: 'Comentarios',\n    likes: 'Me gusta',\n    share: 'Compartir',\n    notifications: 'Notificaciones',\n    messages: 'Mensajes',\n    newMessage: 'Nuevo Mensaje',\n    send: 'Enviar',\n    reply: 'Responder',\n    forward: 'Reenviar',\n    attach: 'Adjuntar',\n    myUnit: 'Mi Unidad',\n    myTeam: 'Mi Equipo',\n    myProjects: 'Mis Proyectos',\n    myTasks: 'Mis Tareas',\n    recentActivity: 'Actividad Reciente',\n    quickActions: 'Acciones Rapidas',\n    overview: 'Resumen',\n    reports: 'Reportes',\n    help: 'Ayuda',\n    support: 'Soporte',\n    documentation: 'Documentacion',\n    version: 'Version',\n    language: 'Idioma',\n    theme: 'Tema',\n    dark: 'Oscuro',\n    light: 'Claro',\n    auto: 'Automatico'\n  },\n  en: {\n    dashboard: 'Dashboard',\n    home: 'Home',\n    workflows: 'Workflows',\n    repository: 'Repository',\n    chat: 'Chat',\n    analytics: 'Analytics',\n    surveys: 'Surveys',\n    profile: 'Profile',\n    settings: 'Settings',\n    logout: 'Logout',\n    admin: 'Admin',\n    users: 'Users',\n    units: 'Units',\n    roles: 'Roles',\n    storage: 'Storage',\n    communications: 'Communications',\n    audit: 'Audit',\n    tenants: 'Organizations',\n    platform: 'Platform',\n    search: 'Search',\n    save: 'Save',\n    cancel: 'Cancel',\n    delete: 'Delete',\n    edit: 'Edit',\n    create: 'Create',\n    add: 'Add',\n    close: 'Close',\n    confirm: 'Confirm',\n    loading: 'Loading...',\n    error: 'Error',\n    success: 'Success',\n    warning: 'Warning',\n    info: 'Information',\n    welcome: 'Welcome',\n    documents: 'Documents',\n    projects: 'Projects',\n    activities: 'Activities',\n    phases: 'Phases',\n    status: 'Status',\n    active: 'Active',\n    inactive: 'Inactive',\n    pending: 'Pending',\n    completed: 'Completed',\n    archived: 'Archived',\n    all: 'All',\n    filter: 'Filter',\n    sort: 'Sort',\n    export: 'Export',\n    import: 'Import',\n    download: 'Download',\n    upload: 'Upload',\n    view: 'View',\n    details: 'Details',\n    description: 'Description',\n    name: 'Name',\n    email: 'Email',\n    phone: 'Phone',\n    date: 'Date',\n    time: 'Time',\n    type: 'Type',\n    category: 'Category',\n    tags: 'Tags',\n    comments: 'Comments',\n    likes: 'Likes',\n    share: 'Share',\n    notifications: 'Notifications',\n    messages: 'Messages',\n    newMessage: 'New Message',\n    send: 'Send',\n    reply: 'Reply',\n    forward: 'Forward',\n    attach: 'Attach',\n    myUnit: 'My Unit',\n    myTeam: 'My Team',\n    myProjects: 'My Projects',\n    myTasks: 'My Tasks',\n    recentActivity: 'Recent Activity',\n    quickActions: 'Quick Actions',\n    overview: 'Overview',\n    reports: 'Reports',\n    help: 'Help',\n    support: 'Support',\n    documentation: 'Documentation',\n    version: 'Version',\n    language: 'Language',\n    theme: 'Theme',\n    dark: 'Dark',\n    light: 'Light',\n    auto: 'Auto'\n  }\n};\n\nexport function useTranslation(locale: string = 'es') {\n  const t = (key: string): string => {\n    return translations[locale]?.[key] || translations['es']?.[key] || key;\n  };\n\n  return { t, locale };\n}\n\nexport function getTranslation(key: string, locale: string = 'es'): string {\n  return translations[locale]?.[key] || translations['es']?.[key] || key;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/Sidebar.tsx"],"sourcesContent":["'use client';\nimport { useApp } from '@/context/AppContext';\nimport { useTranslation } from '@/lib/i18n';\nimport {\n    SquaresFour, Planet, Buildings, ShieldCheck, ChatCircleDots, Files,\n    GitPullRequest, Gear, UsersThree, TreeStructure, Megaphone, Kanban, ChartPieSlice,\n    ClipboardText, List, CaretLeft, CaretRight, Globe, CloudArrowUp\n} from '@phosphor-icons/react';\nimport { usePathname, useRouter } from 'next/navigation';\n\nexport default function Sidebar() {\n    const { currentUser, isSuperAdmin, currentTenant, isSidebarCollapsed, toggleSidebar, unreadChatCount } = useApp();\n    const { t } = useTranslation();\n    const router = useRouter();\n    const pathname = usePathname();\n\n    if (!currentUser) return null;\n\n    const NavItem = ({ icon: Icon, label, path, badge }: { icon: any, label: string, path: string, badge?: number | string | boolean }) => {\n        const isActive = pathname === path;\n        return (\n            <button\n                id={`nav-item-${path.replace(/\\//g, '-')}`}\n                className={`nav-item ${isActive ? 'active' : ''} ${isSidebarCollapsed ? 'justify-center px-0' : ''}`}\n                onClick={() => router.push(path)}\n                title={isSidebarCollapsed ? label : ''}\n            >\n                <Icon size={isSidebarCollapsed ? 22 : 18} weight={isActive ? 'bold' : 'regular'} />\n                {!isSidebarCollapsed && label}\n                {!isSidebarCollapsed && badge && badge !== 0 && <span className=\"nav-badge mx-2\">{badge}</span>}\n            </button>\n        );\n    };\n\n    return (\n        <aside id=\"sidebar\" className={`${isSuperAdmin ? 'super-mode' : ''} ${isSidebarCollapsed ? 'collapsed w-[80px]' : 'w-[260px]'} transition-all duration-300`}>\n            <div className={`brand flex items-center ${isSidebarCollapsed ? 'justify-center p-4' : 'justify-between p-5'}`}>\n                <div className=\"flex items-center gap-3\">\n                    <div className=\"brand-logo flex-shrink-0\"><SquaresFour weight=\"bold\" /></div>\n                    {!isSidebarCollapsed && (\n                        <div className=\"animate-fadeIn\">\n                            <div style={{ fontWeight: 700, color: 'white', fontSize: '15px', letterSpacing: '-0.02em' }}>\n                                {isSuperAdmin ? 'Antigravity DB' : (currentTenant?.branding?.app_title || 'Maturity360')}\n                            </div>\n                            <div style={{ fontSize: 10, opacity: 0.5, fontWeight: 600, textTransform: 'uppercase', letterSpacing: '0.05em' }} id=\"tenant-label\">\n                                {isSuperAdmin ? 'Global View' : currentTenant?.name}\n                            </div>\n                        </div>\n                    )}\n                </div>\n                <button\n                    onClick={toggleSidebar}\n                    className={`text-white/40 hover:text-white transition-colors p-1.5 rounded-lg hover:bg-white/10 ${isSidebarCollapsed ? 'hidden' : ''}`}\n                    title=\"Contraer Men√∫\"\n                >\n                    <CaretLeft size={16} weight=\"bold\" />\n                </button>\n            </div>\n\n            {isSidebarCollapsed && (\n                <div className=\"flex justify-center p-2 border-b border-white/5\">\n                    <button\n                        onClick={toggleSidebar}\n                        className=\"text-white/40 hover:text-white transition-colors p-2 rounded-xl hover:bg-white/10\"\n                        title=\"Expandir Men√∫\"\n                    >\n                        <CaretRight size={20} weight=\"bold\" />\n                    </button>\n                </div>\n            )}\n\n            <nav className=\"nav\" id=\"nav-menu\">\n                {isSuperAdmin ? (\n                    <>\n                        <div className=\"nav-header\">{t('nav_platform')}</div>\n                        <NavItem icon={Planet} label=\"Global Dashboard\" path=\"/dashboard\" />\n                        <NavItem icon={Buildings} label=\"Tenants\" path=\"/dashboard/tenants\" />\n                        <NavItem icon={UsersThree} label=\"Users & Permissions\" path=\"/dashboard/admin/users\" />\n                        <NavItem icon={Globe} label=\"Platform Params\" path=\"/dashboard/platform\" />\n                        <NavItem icon={ShieldCheck} label=\"Audit Global\" path=\"/dashboard/audit\" />\n                    </>\n                ) : (\n                    <>\n                        <div className={`nav-header ${isSidebarCollapsed ? 'text-center opacity-30 text-[9px]' : ''}`}>\n                            {isSidebarCollapsed ? '‚Ä¢‚Ä¢‚Ä¢' : t('nav_operation')}\n                        </div>\n\n                        {(currentTenant?.features?.includes('DASHBOARD') || !currentTenant) && (\n                            <NavItem icon={SquaresFour} label={t('nav_dashboard')} path=\"/dashboard\" />\n                        )}\n\n                        {currentTenant?.features?.includes('CHAT') && (\n                            <NavItem icon={ChatCircleDots} label={t('nav_chat')} path=\"/dashboard/chat\" badge={unreadChatCount} />\n                        )}\n                        {currentTenant?.features?.includes('REPOSITORY') && (\n                            <NavItem icon={Files} label={t('nav_repository')} path=\"/dashboard/repository\" />\n                        )}\n                        {currentTenant?.features?.includes('WORKFLOWS') && (\n                            <NavItem icon={Kanban} label={t('nav_workflows')} path=\"/dashboard/workflows\" />\n                        )}\n                        {currentTenant?.features?.includes('ANALYTICS') && (\n                            <NavItem icon={ChartPieSlice} label={t('nav_analytics')} path=\"/dashboard/analytics\" />\n                        )}\n                        {currentTenant?.features?.includes('SURVEYS') && (\n                            <NavItem icon={ClipboardText} label={t('nav_surveys')} path=\"/dashboard/surveys\" />\n                        )}\n\n                        {(currentUser.level <= 2) && (\n                            <>\n                                <div className=\"nav-header\">{currentUser.level === 1 ? t('nav_governance') : t('nav_management')}</div>\n                                {currentUser.level === 1 && (\n                                    <>\n                                        <NavItem icon={Gear} label={t('nav_admin')} path=\"/dashboard/admin\" />\n                                        <NavItem icon={TreeStructure} label={t('nav_units')} path=\"/dashboard/admin/units\" />\n                                        <NavItem icon={ShieldCheck} label={t('nav_roles')} path=\"/dashboard/admin/roles\" />\n                                        <NavItem icon={UsersThree} label={t('nav_users')} path=\"/dashboard/admin/users\" />\n                                        <NavItem icon={Megaphone} label={t('nav_comms')} path=\"/dashboard/admin/communications\" />\n                                        <NavItem icon={GitPullRequest} label=\"Configuraci√≥n T√©cnica\" path=\"/dashboard/admin/settings\" />\n                                        <NavItem icon={CloudArrowUp} label=\"Almacenamiento\" path=\"/dashboard/admin/storage\" />\n                                        <NavItem icon={ChartPieSlice} label=\"Dashboard Storage\" path=\"/dashboard/admin/storage-dashboard\" />\n                                    </>\n                                )}\n                                <NavItem icon={UsersThree} label={t('nav_unit')} path=\"/dashboard/unit\" />\n                            </>\n                        )}\n\n                    </>\n                )}\n            </nav>\n\n            <div className={`user-profile ${isSidebarCollapsed ? 'justify-center p-3' : ''}`} onClick={() => router.push('/dashboard/profile')}>\n                <div className=\"avatar\" id=\"u-avatar\">{currentUser.initials}</div>\n                {!isSidebarCollapsed && (\n                    <div style={{ flex: 1, overflow: 'hidden' }} className=\"animate-fadeIn\">\n                        <div id=\"u-name\" style={{ fontWeight: 600, color: 'white' }}>{currentUser.name}</div>\n                        <div id=\"u-role\" style={{ fontSize: 11, opacity: 0.6 }}>{currentUser.role}</div>\n                    </div>\n                )}\n                {!isSidebarCollapsed && (\n                    <button className=\"btn btn-ghost\" style={{ color: 'white', padding: 4 }}>\n                        <Gear size={16} />\n                    </button>\n                )}\n            </div>\n        </aside>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 707, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/Topbar.tsx"],"sourcesContent":["'use client';\nimport { useApp } from '@/context/AppContext';\nimport { ChatCircleDots, Moon, SignOut } from '@phosphor-icons/react';\nimport { usePathname, useRouter } from 'next/navigation';\n\nexport default function Topbar() {\n    const { currentUser, isSuperAdmin, logout } = useApp();\n    const router = useRouter();\n    const pathname = usePathname();\n\n    // Determine title based on path\n    const getTitle = () => {\n        if (pathname === '/dashboard') return isSuperAdmin ? 'GLOBAL DASHBOARD' : 'DASHBOARD';\n        if (pathname.includes('/analytics')) return 'ANAL√çTICA';\n        if (pathname.includes('/repository')) return 'REPOSITORIO';\n        if (pathname.includes('/chat')) return 'MENSAJES';\n        if (pathname.includes('/cases')) return 'TR√ÅMITES';\n        if (pathname.includes('/workflows')) return 'FLUJOS';\n        if (pathname.includes('/surveys')) return 'ENCUESTAS';\n        if (pathname.includes('/admin')) return 'ADMINISTRACI√ìN';\n        if (pathname.includes('/profile')) return 'MI PERFIL';\n        return 'DASHBOARD';\n    };\n\n    const toggleDark = () => {\n        document.body.classList.toggle('dark');\n    };\n\n    return (\n        <header className=\"topbar\">\n            <h2 id=\"page-title\" style={{ fontSize: 18, fontWeight: 600 }}>{getTitle()}</h2>\n            <div style={{ display: 'flex', alignItems: 'center', gap: 16 }}>\n                {isSuperAdmin && <span className=\"badge bg-super\">SUPER ADMIN</span>}\n                {!isSuperAdmin && currentUser?.level === 1 && <span className=\"badge bg-warning\">ADMIN</span>}\n\n                <button className=\"btn btn-ghost\" style={{ padding: 8, position: 'relative' }} onClick={() => router.push('/dashboard/chat')}>\n                    <ChatCircleDots size={20} />\n                    <span className=\"nav-badge\" style={{ top: 8, right: 6, width: 8, height: 8, padding: 0, display: 'block' }}></span>\n                </button>\n\n                <button className=\"btn btn-ghost\" style={{ padding: 8 }} onClick={toggleDark}>\n                    <Moon size={20} />\n                </button>\n\n                <button className=\"btn btn-ghost\" onClick={logout} title=\"Salir\">\n                    <SignOut size={20} />\n                </button>\n            </div>\n        </header>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AACA;AAHA;;;;;AAKe,SAAS;IACpB,MAAM,EAAE,WAAW,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,IAAA,gIAAM;IACpD,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAE5B,gCAAgC;IAChC,MAAM,WAAW;QACb,IAAI,aAAa,cAAc,OAAO,eAAe,qBAAqB;QAC1E,IAAI,SAAS,QAAQ,CAAC,eAAe,OAAO;QAC5C,IAAI,SAAS,QAAQ,CAAC,gBAAgB,OAAO;QAC7C,IAAI,SAAS,QAAQ,CAAC,UAAU,OAAO;QACvC,IAAI,SAAS,QAAQ,CAAC,WAAW,OAAO;QACxC,IAAI,SAAS,QAAQ,CAAC,eAAe,OAAO;QAC5C,IAAI,SAAS,QAAQ,CAAC,aAAa,OAAO;QAC1C,IAAI,SAAS,QAAQ,CAAC,WAAW,OAAO;QACxC,IAAI,SAAS,QAAQ,CAAC,aAAa,OAAO;QAC1C,OAAO;IACX;IAEA,MAAM,aAAa;QACf,SAAS,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;IACnC;IAEA,qBACI,8OAAC;QAAO,WAAU;;0BACd,8OAAC;gBAAG,IAAG;gBAAa,OAAO;oBAAE,UAAU;oBAAI,YAAY;gBAAI;0BAAI;;;;;;0BAC/D,8OAAC;gBAAI,OAAO;oBAAE,SAAS;oBAAQ,YAAY;oBAAU,KAAK;gBAAG;;oBACxD,8BAAgB,8OAAC;wBAAK,WAAU;kCAAiB;;;;;;oBACjD,CAAC,gBAAgB,aAAa,UAAU,mBAAK,8OAAC;wBAAK,WAAU;kCAAmB;;;;;;kCAEjF,8OAAC;wBAAO,WAAU;wBAAgB,OAAO;4BAAE,SAAS;4BAAG,UAAU;wBAAW;wBAAG,SAAS,IAAM,OAAO,IAAI,CAAC;;0CACtG,8OAAC,qMAAc;gCAAC,MAAM;;;;;;0CACtB,8OAAC;gCAAK,WAAU;gCAAY,OAAO;oCAAE,KAAK;oCAAG,OAAO;oCAAG,OAAO;oCAAG,QAAQ;oCAAG,SAAS;oCAAG,SAAS;gCAAQ;;;;;;;;;;;;kCAG7G,8OAAC;wBAAO,WAAU;wBAAgB,OAAO;4BAAE,SAAS;wBAAE;wBAAG,SAAS;kCAC9D,cAAA,8OAAC,iLAAI;4BAAC,MAAM;;;;;;;;;;;kCAGhB,8OAAC;wBAAO,WAAU;wBAAgB,SAAS;wBAAQ,OAAM;kCACrD,cAAA,8OAAC,uLAAO;4BAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;AAKnC"}},
    {"offset": {"line": 867, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/SlideOver.tsx"],"sourcesContent":["'use client';\nimport { useUI } from '@/context/UIContext';\nimport { useApp } from '@/context/AppContext';\nimport { DB } from '@/lib/data';\nimport { X, PaperPlaneRight } from '@phosphor-icons/react';\nimport { useState, useEffect, KeyboardEvent } from 'react';\n\ntype ContextChatMessage = { text: string; type: string };\n\nexport default function SlideOver() {\n    const { isSlideOpen, slideType, slideData, closeSlide, openViewer } = useUI();\n    const { currentUser } = useApp();\n    const [activeTab, setActiveTab] = useState<'detail' | 'chat'>('detail');\n    const [chatMsgs, setChatMsgs] = useState<ContextChatMessage[]>([]);\n    const [chatInput, setChatInput] = useState('');\n    const [forceUpdate, setForceUpdate] = useState(0);\n\n    // Reset tab when opening\n    useEffect(() => {\n        if (isSlideOpen) {\n            setActiveTab('detail');\n            if (slideData && slideData.id) {\n                if (!DB.contextChats[slideData.id]) {\n                    DB.contextChats[slideData.id] = [{ text: `Sistema: Contexto ${slideType} creado`, type: 'system' }];\n                }\n                setChatMsgs(DB.contextChats[slideData.id]);\n            }\n        }\n    }, [isSlideOpen, slideData, slideType]);\n\n    const sendContextMessage = () => {\n        if (!chatInput.trim() || !slideData) return;\n\n        const newMsg: ContextChatMessage = { text: chatInput, type: 'self' }; // In real app, user ID\n        DB.contextChats[slideData.id].push(newMsg);\n        setChatMsgs([...DB.contextChats[slideData.id]]);\n        setChatInput('');\n    };\n\n    const handleKey = (e: KeyboardEvent) => {\n        if (e.key === 'Enter') sendContextMessage();\n    };\n\n    const renderDetail = () => {\n        if (!slideData) return null;\n        const { id, title } = slideData;\n\n        if (slideType === 'doc') {\n            const comments = DB.publicComments.filter(c => c.docId === id) || [];\n            return (\n                <div>\n                    <h2>{title}</h2>\n                    <button\n                        className=\"btn btn-primary\"\n                        style={{ width: '100%', margin: '10px 0' }}\n                        onClick={() => openViewer(title)}\n                    >\n                        Visualizar\n                    </button>\n                    <hr style={{ margin: '20px 0', border: 0, borderTop: '1px solid var(--border)' }} />\n                    <h4>Comentarios</h4>\n                    {comments.map((c, i) => (\n                        <div key={i} className=\"comment-item\" style={{ marginBottom: 10 }}>\n                            <strong>{c.authorName}</strong>: {c.content}\n                        </div>\n                    ))}\n                </div>\n            );\n        }\n\n        return (\n            <div>\n                <h2>{title}</h2>\n                <p>Detalle del contenido...</p>\n            </div>\n        );\n    };\n\n    return (\n        <>\n            <div\n                className=\"slide-overlay\"\n                style={{ display: isSlideOpen ? 'block' : 'none' }}\n                onClick={closeSlide}\n            ></div>\n\n            <div className={`slide-over ${isSlideOpen ? 'open' : ''}`} id=\"slide-panel\">\n                <div className=\"card-head\" style={{ background: 'white' }}>\n                    <h3 id=\"slide-title\" style={{ fontSize: 16 }}>\n                        {slideType === 'doc' ? 'Documento' : 'Tr√°mite'}\n                    </h3>\n                    <button className=\"btn btn-ghost\" onClick={closeSlide}>\n                        <X size={20} />\n                    </button>\n                </div>\n\n                <div className=\"tabs\">\n                    <div\n                        className={`tab ${activeTab === 'detail' ? 'active' : ''}`}\n                        onClick={() => setActiveTab('detail')}\n                    >\n                        Info & Social\n                    </div>\n                    <div\n                        className={`tab ${activeTab === 'chat' ? 'active' : ''}`}\n                        onClick={() => setActiveTab('chat')}\n                    >\n                        Chat Privado <span className=\"badge bg-danger\" style={{ fontSize: 9 }}>Context</span>\n                    </div>\n                </div>\n\n                <div className=\"slide-content\" style={{ flex: 1, overflow: 'hidden', display: 'flex', flexDirection: 'column' }}>\n\n                    <div className=\"tab-pane\" style={{ display: activeTab === 'detail' ? 'block' : 'none', flex: 1, padding: 24, overflowY: 'auto' }}>\n                        {renderDetail()}\n                    </div>\n\n                    <div className=\"chat-pane\" style={{ display: activeTab === 'chat' ? 'flex' : 'none', flexDirection: 'column', height: '100%', padding: 0 }}>\n                        <div className=\"messages-area\" style={{ flex: 1, padding: 20 }}>\n                            {chatMsgs.map((m, i) => (\n                                <div key={i} className={`message ${m.type === 'system' ? 'msg-system' : 'msg-self'}`}>\n                                    {m.text}\n                                </div>\n                            ))}\n                        </div>\n                        <div className=\"chat-input\" style={{ padding: 12, borderTop: '1px solid var(--border)' }}>\n                            <input\n                                type=\"text\"\n                                value={chatInput}\n                                onChange={(e) => setChatInput(e.target.value)}\n                                placeholder=\"Escribe un mensaje...\"\n                                onKeyPress={handleKey}\n                            />\n                            <button className=\"btn btn-primary btn-icon\" onClick={sendContextMessage}>\n                                <PaperPlaneRight />\n                            </button>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1232, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/DocViewer.tsx"],"sourcesContent":["'use client';\nimport { useUI } from '@/context/UIContext';\n\nexport default function DocViewer() {\n    const { isViewerOpen, viewerTitle, closeViewer } = useUI();\n\n    return (\n        <div\n            className=\"doc-viewer-overlay\"\n            style={{ display: isViewerOpen ? 'flex' : 'none' }}\n        >\n            <div className=\"doc-viewer-window\">\n                <div className=\"doc-viewer-header\" style={{ background: '#1e293b', color: 'white', height: 50, display: 'flex', alignItems: 'center', justifyContent: 'space-between', padding: '0 20px' }}>\n                    <span style={{ fontWeight: 500 }}>{viewerTitle || 'Documento.pdf'}</span>\n                    <button className=\"btn btn-primary\" onClick={closeViewer}>Cerrar</button>\n                </div>\n                <div className=\"doc-viewer-body\" style={{ background: '#64748b', flex: 1, overflow: 'auto', display: 'flex', justifyContent: 'center', padding: 40 }}>\n                    <div className=\"sim-pdf-page\">\n                        <h1 style={{ textAlign: 'center' }}>{viewerTitle}</h1>\n                        <hr />\n                        <p>Vista previa simulada...</p>\n                        <p className=\"mt-4\">\n                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS;IACpB,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,IAAA,8HAAK;IAExD,qBACI,8OAAC;QACG,WAAU;QACV,OAAO;YAAE,SAAS,eAAe,SAAS;QAAO;kBAEjD,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;oBAAoB,OAAO;wBAAE,YAAY;wBAAW,OAAO;wBAAS,QAAQ;wBAAI,SAAS;wBAAQ,YAAY;wBAAU,gBAAgB;wBAAiB,SAAS;oBAAS;;sCACrL,8OAAC;4BAAK,OAAO;gCAAE,YAAY;4BAAI;sCAAI,eAAe;;;;;;sCAClD,8OAAC;4BAAO,WAAU;4BAAkB,SAAS;sCAAa;;;;;;;;;;;;8BAE9D,8OAAC;oBAAI,WAAU;oBAAkB,OAAO;wBAAE,YAAY;wBAAW,MAAM;wBAAG,UAAU;wBAAQ,SAAS;wBAAQ,gBAAgB;wBAAU,SAAS;oBAAG;8BAC/I,cAAA,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,OAAO;oCAAE,WAAW;gCAAS;0CAAI;;;;;;0CACrC,8OAAC;;;;;0CACD,8OAAC;0CAAE;;;;;;0CACH,8OAAC;gCAAE,WAAU;0CAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ5C"}},
    {"offset": {"line": 1358, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/onboarding/UserTour.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { useApp } from '@/context/AppContext';\nimport { createPortal } from 'react-dom';\nimport { X, CaretRight, CaretLeft, Check } from '@phosphor-icons/react';\n\ninterface TourStep {\n    id: string;\n    title: string;\n    content: string;\n    targetId?: string; // If undefined, show centered modal\n    placement?: 'right' | 'left' | 'top' | 'bottom' | 'center';\n}\n\nexport default function UserTour() {\n    const { currentUser, isSuperAdmin, currentTenant } = useApp();\n    const [isVisible, setIsVisible] = useState(false);\n    const [currentStep, setCurrentStep] = useState(0);\n    const [targetRect, setTargetRect] = useState<DOMRect | null>(null);\n\n    // Initial Check\n    useEffect(() => {\n        if (!currentUser) return;\n        const tourKey = `tour_completed_${currentUser.id}_v3`; // v3 versioning\n        const hasCompleted = localStorage.getItem(tourKey);\n\n        if (!hasCompleted) {\n            // Small delay to ensure UI renders\n            const timer = setTimeout(() => {\n                setIsVisible(true);\n            }, 1000);\n            return () => clearTimeout(timer);\n        }\n    }, [currentUser]);\n\n    // Define Steps based on Role\n    const steps: TourStep[] = useMemo(() => {\n        const commonSteps: TourStep[] = [\n            {\n                id: 'welcome',\n                title: `Bienvenido a ${currentTenant?.name || 'la Plataforma'}`,\n                content: 'Te damos la bienvenida a tu nuevo espacio de trabajo. Acomp√°√±anos en un breve recorrido para conocer las herramientas principales.',\n                placement: 'center'\n            }\n        ];\n\n        let roleSteps: TourStep[] = [];\n\n        if (isSuperAdmin) {\n            roleSteps = [\n                {\n                    id: 'nav-platform',\n                    title: 'Gesti√≥n Global',\n                    content: 'Aqu√≠ tienes acceso total a todos los Tenants, Usuarios y Configuraciones de la plataforma.',\n                    targetId: 'nav-item--dashboard', // Points to Dashboard/Global\n                    placement: 'right'\n                },\n                {\n                    id: 'nav-tenants',\n                    title: 'Tenants',\n                    content: 'Administra las organizaciones y sus suscripciones desde aqu√≠.',\n                    targetId: 'nav-item--dashboard-tenants',\n                    placement: 'right'\n                },\n                {\n                    id: 'nav-users-global',\n                    title: 'Usuarios y Permisos',\n                    content: 'Control de acceso y roles a nivel global.',\n                    targetId: 'nav-item--dashboard-admin-users',\n                    placement: 'right'\n                }\n            ];\n        } else {\n            // --- Tenant User (Admin or Regular) ---\n\n            // 1. Dashboard (Always available if enabled or default)\n            if (currentTenant?.features?.includes('DASHBOARD')) {\n                roleSteps.push({\n                    id: 'nav-dashboard',\n                    title: 'Tu Panel de Control',\n                    content: 'Visualiza indicadores clave y el estado general de tu organizaci√≥n.',\n                    targetId: 'nav-item--dashboard',\n                    placement: 'right'\n                });\n            }\n\n            // 2. Chat\n            if (currentTenant?.features?.includes('CHAT')) {\n                roleSteps.push({\n                    id: 'nav-chat',\n                    title: 'Mensajer√≠a y Colaboraci√≥n',\n                    content: 'Comun√≠cate en tiempo real con tu equipo y crea grupos de trabajo.',\n                    targetId: 'nav-item--dashboard-chat',\n                    placement: 'right'\n                });\n            }\n\n            // 3. Repository\n            if (currentTenant?.features?.includes('REPOSITORY')) {\n                roleSteps.push({\n                    id: 'nav-repo',\n                    title: 'Repositorio Documental',\n                    content: 'Centraliza y gestiona todos los documentos importantes de tu organizaci√≥n.',\n                    targetId: 'nav-item--dashboard-repository',\n                    placement: 'right'\n                });\n            }\n\n            // 4. Workflows / Projects\n            if (currentTenant?.features?.includes('WORKFLOWS')) {\n                roleSteps.push({\n                    id: 'nav-workflows',\n                    title: 'Proyectos y Flujos',\n                    content: 'Organiza tus proyectos, tareas y entregables en un solo lugar.',\n                    targetId: 'nav-item--dashboard-workflows',\n                    placement: 'right'\n                });\n            }\n\n            // 5. Analytics\n            if (currentTenant?.features?.includes('ANALYTICS')) {\n                roleSteps.push({\n                    id: 'nav-analytics',\n                    title: 'Anal√≠tica Avanzada',\n                    content: 'Explora datos y reportes detallados para la toma de decisiones.',\n                    targetId: 'nav-item--dashboard-analytics',\n                    placement: 'right'\n                });\n            }\n\n            // 6. Surveys\n            if (currentTenant?.features?.includes('SURVEYS')) {\n                roleSteps.push({\n                    id: 'nav-surveys',\n                    title: 'Encuestas y Evaluaciones',\n                    content: 'Gestiona clima laboral, evaluaciones de madurez y formularios.',\n                    targetId: 'nav-item--dashboard-surveys',\n                    placement: 'right'\n                });\n            }\n\n            // 7. Admin / Manager Steps\n            if (currentUser?.level !== undefined && currentUser.level <= 2) {\n                roleSteps.push({\n                    id: 'nav-admin',\n                    title: 'Administraci√≥n',\n                    content: 'Configura unidades, roles, usuarios y par√°metros de tu Tenant.',\n                    targetId: 'nav-item--dashboard-admin',\n                    placement: 'right'\n                });\n            }\n\n            // 8. Department Management (Manager+)\n            if (currentUser?.level !== undefined && currentUser.level <= 2) {\n                roleSteps.push({\n                    id: 'nav-units',\n                    title: 'Estructura Organizacional',\n                    content: 'Define y gestiona las unidades y jerarqu√≠as de tu empresa.',\n                    targetId: 'nav-item--dashboard-admin-units',\n                    placement: 'right'\n                });\n            }\n        }\n\n        const finalSteps: TourStep[] = [\n            ...commonSteps,\n            ...roleSteps,\n            {\n                id: 'profile',\n                title: 'Tu Perfil',\n                content: 'Accede a tus preferencias personales, cambio de contrase√±a y cierre de sesi√≥n.',\n                targetId: 'u-avatar', // Assuming avatar has this ID or class\n                placement: 'top' // Usually at bottom sidebar\n            },\n            {\n                id: 'finish',\n                title: '¬°Todo listo!',\n                content: 'Ya est√°s preparado para comenzar. Si tienes dudas, busca el icono de ayuda.',\n                placement: 'center' // Use explicit center placement\n            }\n        ];\n\n        return finalSteps;\n    }, [currentUser, isSuperAdmin, currentTenant]);\n\n    // Update Rect on Step Change\n    useEffect(() => {\n        if (!isVisible) return;\n\n        const step = steps[currentStep];\n        if (!step) return;\n\n        if (step.targetId) {\n            const el = document.getElementById(step.targetId);\n            if (el) {\n                setTargetRect(el.getBoundingClientRect());\n                // Scroll into view if needed\n                el.scrollIntoView({ behavior: 'smooth', block: 'center' });\n            } else {\n                // Determine fallback behavior if element not found. \n                // For now, let's just default to null rect -> render centered as fallback?\n                // Or try finding it again in a loop?\n                // Actually, if we can't find it, maybe skip?\n                console.warn(`Tour target ${step.targetId} not found, centering.`);\n                setTargetRect(null);\n            }\n        } else {\n            setTargetRect(null);\n        }\n    }, [currentStep, isVisible, steps]);\n\n    // Handle Resize\n    useEffect(() => {\n        const handleResize = () => {\n            const step = steps[currentStep];\n            if (step?.targetId) {\n                const el = document.getElementById(step.targetId);\n                if (el) setTargetRect(el.getBoundingClientRect());\n            }\n        };\n        window.addEventListener('resize', handleResize);\n        window.addEventListener('scroll', handleResize, true);\n        return () => {\n            window.removeEventListener('resize', handleResize);\n            window.removeEventListener('scroll', handleResize, true);\n        };\n    }, [currentStep, steps]);\n\n    const handleNext = () => {\n        if (currentStep < steps.length - 1) {\n            setCurrentStep(prev => prev + 1);\n        } else {\n            finishTour();\n        }\n    };\n\n    const handlePrev = () => {\n        if (currentStep > 0) {\n            setCurrentStep(prev => prev - 1);\n        }\n    };\n\n    const finishTour = () => {\n        if (currentUser) {\n            localStorage.setItem(`tour_completed_${currentUser.id}_v3`, 'true');\n        }\n        setIsVisible(false);\n    };\n\n    if (!isVisible) return null;\n\n    const step = steps[currentStep];\n    if (!step) return null;\n\n    // Helper for Popover Position\n    const getPopoverStyle = () => {\n        if (!targetRect || step.placement === 'center' || !step.targetId) {\n            return {\n                top: '50%',\n                left: '50%',\n                transform: 'translate(-50%, -50%)',\n                maxWidth: '450px',\n                width: '90%'\n            };\n        }\n\n        const gap = 16;\n        const styles: React.CSSProperties = { position: 'absolute', maxWidth: '350px' };\n\n        // Simple positioning logic\n        if (step.placement === 'right') {\n            styles.top = targetRect.top + (targetRect.height / 2) - 100; // Offset up slightly for balance\n            styles.left = targetRect.right + gap;\n        } else if (step.placement === 'bottom') {\n            styles.top = targetRect.bottom + gap;\n            styles.left = targetRect.left + (targetRect.width / 2) - 175;\n        } else if (step.placement === 'top') { // Sidebar profile is at bottom\n            styles.bottom = window.innerHeight - targetRect.top + gap;\n            styles.left = targetRect.left;\n        }\n\n        // Boundary checks would be good here but keeping simple\n        return styles;\n    };\n\n    return createPortal(\n        <div className=\"fixed inset-0 z-[9999] overflow-hidden\">\n            {/* 1. Backdrop with Hole (Box Shadow Method) */}\n            {/* If target exists, we draw a huge shadow around a transparent div placed over the target */}\n            {targetRect && step.placement !== 'center' ? (\n                <div\n                    className=\"absolute bg-transparent transition-all duration-500 ease-in-out box-content border-4 border-blue-500/50 rounded-lg\"\n                    style={{\n                        top: targetRect.top - 4,\n                        left: targetRect.left - 4,\n                        width: targetRect.width,\n                        height: targetRect.height,\n                        boxShadow: '0 0 0 9999px rgba(0, 0, 0, 0.75)'\n                    }}\n                >\n                    {/* Optional Pulse Effect */}\n                    <div className=\"absolute inset-0 rounded-lg animate-ping bg-blue-500/30\"></div>\n                </div>\n            ) : (\n                // Full Backdrop for Center Modal\n                <div className=\"absolute inset-0 bg-black/75 backdrop-blur-sm transition-opacity duration-500\"></div>\n            )}\n\n            {/* 2. Popover Content */}\n            <div\n                className=\"absolute z-[10000] bg-white rounded-2xl shadow-2xl overflow-hidden transition-all duration-500 ease-out border border-white/20\"\n                style={getPopoverStyle() as any}\n            >\n                {/* Header Graphic for Welcome */}\n                {step.placement === 'center' && currentStep === 0 && (\n                    <div className=\"h-32 bg-gradient-to-r from-blue-600 to-indigo-600 flex items-center justify-center relative overflow-hidden\">\n                        <div className=\"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20\"></div>\n                        <div className=\"text-6xl text-white opacity-20 absolute -bottom-4 -right-4 rotate-12\">üëã</div>\n                    </div>\n                )}\n\n                <div className=\"p-6\">\n                    <div className=\"flex justify-between items-start mb-4\">\n                        <h3 className=\"text-xl font-bold text-slate-800 leading-tight\">\n                            {currentStep + 1}. {step.title}\n                        </h3>\n                        <button onClick={finishTour} className=\"text-slate-400 hover:text-slate-600 transition-colors\">\n                            <X size={20} />\n                        </button>\n                    </div>\n\n                    <p className=\"text-slate-600 mb-8 leading-relaxed text-sm\">\n                        {step.content}\n                    </p>\n\n                    <div className=\"flex justify-between items-center pt-4 border-t border-slate-100 mt-auto\">\n                        <div className=\"flex gap-1\">\n                            {steps.map((_, i) => (\n                                <div key={i} className={`h-1.5 rounded-full transition-all duration-300 ${i === currentStep ? 'w-6 bg-blue-600' : 'w-1.5 bg-slate-200'}`}></div>\n                            ))}\n                        </div>\n\n                        <div className=\"flex gap-3\">\n                            {currentStep > 0 && (\n                                <button\n                                    onClick={handlePrev}\n                                    className=\"px-4 py-2 text-slate-500 font-bold text-sm hover:text-slate-800 transition-colors\"\n                                >\n                                    Atr√°s\n                                </button>\n                            )}\n                            <button\n                                onClick={handleNext}\n                                className=\"px-5 py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 hover:shadow-lg hover:shadow-blue-500/30 transition-all flex items-center gap-2\"\n                            >\n                                {currentStep === steps.length - 1 ? 'Finalizar' : 'Siguiente'}\n                                {currentStep === steps.length - 1 ? <Check weight=\"bold\" /> : <CaretRight weight=\"bold\" />}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>,\n        document.body\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1830, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/dashboard/layout.tsx"],"sourcesContent":["'use client';\nimport Sidebar from '@/components/Sidebar';\nimport Topbar from '@/components/Topbar';\nimport SlideOver from '@/components/SlideOver';\nimport DocViewer from '@/components/DocViewer';\nimport { useApp } from '@/context/AppContext';\nimport { useRouter } from 'next/navigation';\nimport { useEffect } from 'react';\nimport { Warning } from '@phosphor-icons/react';\nimport UserTour from '@/components/onboarding/UserTour';\n\nexport default function DashboardLayout({\n    children,\n}: {\n    children: React.ReactNode;\n}) {\n    const { currentUser, originalSession, stopImpersonation, updateUser } = useApp();\n    const router = useRouter();\n\n    useEffect(() => {\n        // Basic protection - if not logged in, go to home\n        // In a real app we'd wait for loading state, but here currentUser is sync after login\n        // However, on refresh, currentUser is wiped because it's in-memory.\n        // For this prototype, we'll redirect if null.\n        if (!currentUser) router.push('/');\n    }, [currentUser, router]);\n\n    if (!currentUser) return null;\n\n    return (\n        <div className=\"flex flex-col h-screen overflow-hidden\">\n            {originalSession && (\n                <div className=\"bg-amber-400 text-amber-900 px-4 py-2 text-xs font-bold flex items-center justify-between shadow-sm z-[100]\">\n                    <div className=\"flex items-center gap-2\">\n                        <Warning weight=\"fill\" size={18} />\n                        <span className=\"uppercase tracking-wide\">Support Mode: Impersonating {currentUser.name}</span>\n                    </div>\n                    <button onClick={stopImpersonation} className=\"bg-white/20 hover:bg-white/40 px-3 py-1 rounded text-[10px] uppercase font-bold transition-colors flex items-center gap-1\">\n                        Exit Support\n                    </button>\n                </div>\n            )}\n            <div style={{ display: 'flex', flex: 1, overflow: 'hidden' }}>\n                <Sidebar />\n                <main style={{ flex: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden', position: 'relative' }}>\n                    <Topbar />\n                    <div className=\"content\">\n                        {children}\n                    </div>\n                </main>\n                <SlideOver />\n                <DocViewer />\n            </div>\n            <UserTour />\n\n            {/* Force Password Change */}\n            {currentUser.mustChangePassword && !originalSession && (\n                <div className=\"fixed inset-0 bg-slate-900/90 z-[200] flex items-center justify-center p-4 backdrop-blur-sm\">\n                    <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden p-8 text-center\">\n                        <div className=\"w-16 h-16 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                            <Warning size={32} weight=\"fill\" />\n                        </div>\n                        <h2 className=\"text-2xl font-bold text-slate-800 mb-2\">Security Update Required</h2>\n                        <p className=\"text-slate-600 mb-6\">For your security, you must update your password before proceeding.</p>\n\n                        <form onSubmit={(e) => {\n                            e.preventDefault();\n                            updateUser({ mustChangePassword: false });\n                            alert('Password updated successfully.');\n                        }} className=\"space-y-4 text-left\">\n                            <div>\n                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">New Password</label>\n                                <input type=\"password\" required className=\"w-full px-4 py-2 border rounded-lg\" placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\" />\n                            </div>\n                            <div>\n                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">Confirm Password</label>\n                                <input type=\"password\" required className=\"w-full px-4 py-2 border rounded-lg\" placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\" />\n                            </div>\n                            <button className=\"btn btn-primary w-full justify-center\">Update Password</button>\n                        </form>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;;AAWe,SAAS,gBAAgB,EACpC,QAAQ,EAGX;IACG,MAAM,EAAE,WAAW,EAAE,eAAe,EAAE,iBAAiB,EAAE,UAAU,EAAE,GAAG,IAAA,gIAAM;IAC9E,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACN,kDAAkD;QAClD,sFAAsF;QACtF,oEAAoE;QACpE,8CAA8C;QAC9C,IAAI,CAAC,aAAa,OAAO,IAAI,CAAC;IAClC,GAAG;QAAC;QAAa;KAAO;IAExB,IAAI,CAAC,aAAa,OAAO;IAEzB,qBACI,8OAAC;QAAI,WAAU;;YACV,iCACG,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,uLAAO;gCAAC,QAAO;gCAAO,MAAM;;;;;;0CAC7B,8OAAC;gCAAK,WAAU;;oCAA0B;oCAA6B,YAAY,IAAI;;;;;;;;;;;;;kCAE3F,8OAAC;wBAAO,SAAS;wBAAmB,WAAU;kCAA4H;;;;;;;;;;;;0BAKlL,8OAAC;gBAAI,OAAO;oBAAE,SAAS;oBAAQ,MAAM;oBAAG,UAAU;gBAAS;;kCACvD,8OAAC,iIAAO;;;;;kCACR,8OAAC;wBAAK,OAAO;4BAAE,MAAM;4BAAG,SAAS;4BAAQ,eAAe;4BAAU,UAAU;4BAAU,UAAU;wBAAW;;0CACvG,8OAAC,gIAAM;;;;;0CACP,8OAAC;gCAAI,WAAU;0CACV;;;;;;;;;;;;kCAGT,8OAAC,mIAAS;;;;;kCACV,8OAAC,mIAAS;;;;;;;;;;;0BAEd,8OAAC,gJAAQ;;;;;YAGR,YAAY,kBAAkB,IAAI,CAAC,iCAChC,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC,uLAAO;gCAAC,MAAM;gCAAI,QAAO;;;;;;;;;;;sCAE9B,8OAAC;4BAAG,WAAU;sCAAyC;;;;;;sCACvD,8OAAC;4BAAE,WAAU;sCAAsB;;;;;;sCAEnC,8OAAC;4BAAK,UAAU,CAAC;gCACb,EAAE,cAAc;gCAChB,WAAW;oCAAE,oBAAoB;gCAAM;gCACvC,MAAM;4BACV;4BAAG,WAAU;;8CACT,8OAAC;;sDACG,8OAAC;4CAAM,WAAU;sDAA8C;;;;;;sDAC/D,8OAAC;4CAAM,MAAK;4CAAW,QAAQ;4CAAC,WAAU;4CAAqC,aAAY;;;;;;;;;;;;8CAE/F,8OAAC;;sDACG,8OAAC;4CAAM,WAAU;sDAA8C;;;;;;sDAC/D,8OAAC;4CAAM,MAAK;4CAAW,QAAQ;4CAAC,WAAU;4CAAqC,aAAY;;;;;;;;;;;;8CAE/F,8OAAC;oCAAO,WAAU;8CAAwC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOtF"}}]
}