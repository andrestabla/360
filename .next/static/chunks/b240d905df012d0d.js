(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18140,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(35877),l=e.i(56530),r=e.i(74002),i=e.i(42875),n=e.i(35548),o=e.i(11322),d=e.i(32819),c=e.i(2903),p=e.i(31633),x=e.i(77854),m=e.i(42785),u=e.i(69464);let h=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M199,125.31l-49.88-18.39L130.69,57a19.92,19.92,0,0,0-37.38,0L74.92,106.92,25,125.31a19.92,19.92,0,0,0,0,37.38l49.88,18.39L93.31,231a19.92,19.92,0,0,0,37.38,0l18.39-49.88L199,162.69a19.92,19.92,0,0,0,0-37.38Zm-63.38,35.16a12,12,0,0,0-7.11,7.11L112,212.28l-16.47-44.7a12,12,0,0,0-7.11-7.11L43.72,144l44.7-16.47a12,12,0,0,0,7.11-7.11L112,75.72l16.47,44.7a12,12,0,0,0,7.11,7.11L180.28,144ZM140,40a12,12,0,0,1,12-12h12V16a12,12,0,0,1,24,0V28h12a12,12,0,0,1,0,24H188V64a12,12,0,0,1-24,0V52H152A12,12,0,0,1,140,40ZM252,88a12,12,0,0,1-12,12h-4v4a12,12,0,0,1-24,0v-4h-4a12,12,0,0,1,0-24h4V72a12,12,0,0,1,24,0v4h4A12,12,0,0,1,252,88Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M194.82,151.43l-55.09,20.3-20.3,55.09a7.92,7.92,0,0,1-14.86,0l-20.3-55.09-55.09-20.3a7.92,7.92,0,0,1,0-14.86l55.09-20.3,20.3-55.09a7.92,7.92,0,0,1,14.86,0l20.3,55.09,55.09,20.3A7.92,7.92,0,0,1,194.82,151.43Z",opacity:"0.2"}),a.createElement("path",{d:"M197.58,129.06,146,110l-19-51.62a15.92,15.92,0,0,0-29.88,0L78,110l-51.62,19a15.92,15.92,0,0,0,0,29.88L78,178l19,51.62a15.92,15.92,0,0,0,29.88,0L146,178l51.62-19a15.92,15.92,0,0,0,0-29.88ZM137,164.22a8,8,0,0,0-4.74,4.74L112,223.85,91.78,169A8,8,0,0,0,87,164.22L32.15,144,87,123.78A8,8,0,0,0,91.78,119L112,64.15,132.22,119a8,8,0,0,0,4.74,4.74L191.85,144ZM144,40a8,8,0,0,1,8-8h16V16a8,8,0,0,1,16,0V32h16a8,8,0,0,1,0,16H184V64a8,8,0,0,1-16,0V48H152A8,8,0,0,1,144,40ZM248,88a8,8,0,0,1-8,8h-8v8a8,8,0,0,1-16,0V96h-8a8,8,0,0,1,0-16h8V72a8,8,0,0,1,16,0v8h8A8,8,0,0,1,248,88Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,144a15.78,15.78,0,0,1-10.42,14.94L146,178l-19,51.62a15.92,15.92,0,0,1-29.88,0L78,178l-51.62-19a15.92,15.92,0,0,1,0-29.88L78,110l19-51.62a15.92,15.92,0,0,1,29.88,0L146,110l51.62,19A15.78,15.78,0,0,1,208,144ZM152,48h16V64a8,8,0,0,0,16,0V48h16a8,8,0,0,0,0-16H184V16a8,8,0,0,0-16,0V32H152a8,8,0,0,0,0,16Zm88,32h-8V72a8,8,0,0,0-16,0v8h-8a8,8,0,0,0,0,16h8v8a8,8,0,0,0,16,0V96h8a8,8,0,0,0,0-16Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M196.89,130.94,144.4,111.6,125.06,59.11a13.92,13.92,0,0,0-26.12,0L79.6,111.6,27.11,130.94a13.92,13.92,0,0,0,0,26.12L79.6,176.4l19.34,52.49a13.92,13.92,0,0,0,26.12,0L144.4,176.4l52.49-19.34a13.92,13.92,0,0,0,0-26.12Zm-4.15,14.86-55.08,20.3a6,6,0,0,0-3.56,3.56l-20.3,55.08a1.92,1.92,0,0,1-3.6,0L89.9,169.66a6,6,0,0,0-3.56-3.56L31.26,145.8a1.92,1.92,0,0,1,0-3.6l55.08-20.3a6,6,0,0,0,3.56-3.56l20.3-55.08a1.92,1.92,0,0,1,3.6,0l20.3,55.08a6,6,0,0,0,3.56,3.56l55.08,20.3a1.92,1.92,0,0,1,0,3.6ZM146,40a6,6,0,0,1,6-6h18V16a6,6,0,0,1,12,0V34h18a6,6,0,0,1,0,12H182V64a6,6,0,0,1-12,0V46H152A6,6,0,0,1,146,40ZM246,88a6,6,0,0,1-6,6H230v10a6,6,0,0,1-12,0V94H208a6,6,0,0,1,0-12h10V72a6,6,0,0,1,12,0V82h10A6,6,0,0,1,246,88Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M197.58,129.06,146,110l-19-51.62a15.92,15.92,0,0,0-29.88,0L78,110l-51.62,19a15.92,15.92,0,0,0,0,29.88L78,178l19,51.62a15.92,15.92,0,0,0,29.88,0L146,178l51.62-19a15.92,15.92,0,0,0,0-29.88ZM137,164.22a8,8,0,0,0-4.74,4.74L112,223.85,91.78,169A8,8,0,0,0,87,164.22L32.15,144,87,123.78A8,8,0,0,0,91.78,119L112,64.15,132.22,119a8,8,0,0,0,4.74,4.74L191.85,144ZM144,40a8,8,0,0,1,8-8h16V16a8,8,0,0,1,16,0V32h16a8,8,0,0,1,0,16H184V64a8,8,0,0,1-16,0V48H152A8,8,0,0,1,144,40ZM248,88a8,8,0,0,1-8,8h-8v8a8,8,0,0,1-16,0V96h-8a8,8,0,0,1,0-16h8V72a8,8,0,0,1,16,0v8h8A8,8,0,0,1,248,88Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M196.2,132.81l-53.36-19.65L123.19,59.8a11.93,11.93,0,0,0-22.38,0L81.16,113.16,27.8,132.81a11.93,11.93,0,0,0,0,22.38l53.36,19.65,19.65,53.36a11.93,11.93,0,0,0,22.38,0l19.65-53.36,53.36-19.65a11.93,11.93,0,0,0,0-22.38Zm-2.77,14.87L138.35,168a4,4,0,0,0-2.37,2.37l-20.3,55.08a3.92,3.92,0,0,1-7.36,0L88,170.35A4,4,0,0,0,85.65,168l-55.08-20.3a3.92,3.92,0,0,1,0-7.36L85.65,120A4,4,0,0,0,88,117.65l20.3-55.08a3.92,3.92,0,0,1,7.36,0L136,117.65a4,4,0,0,0,2.37,2.37l55.08,20.3a3.92,3.92,0,0,1,0,7.36ZM148,40a4,4,0,0,1,4-4h20V16a4,4,0,0,1,8,0V36h20a4,4,0,0,1,0,8H180V64a4,4,0,0,1-8,0V44H152A4,4,0,0,1,148,40Zm96,48a4,4,0,0,1-4,4H228v12a4,4,0,0,1-8,0V92H208a4,4,0,0,1,0-8h12V72a4,4,0,0,1,8,0V84h12A4,4,0,0,1,244,88Z"}))]]),b=a.forwardRef((e,t)=>a.createElement(u.default,{ref:t,...e,weights:h}));b.displayName="SparkleIcon";var f=e.i(46712),g=e.i(11140),v=e.i(99141),j=e.i(76185),N=e.i(25857),w=e.i(61652),y=e.i(1753);let A=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M214.67,68H204V40a12,12,0,0,0-12-12H64A12,12,0,0,0,52,40V68H41.33C25.16,68,12,80.56,12,96v80a12,12,0,0,0,12,12H52v28a12,12,0,0,0,12,12H192a12,12,0,0,0,12-12V188h28a12,12,0,0,0,12-12V96C244,80.56,230.84,68,214.67,68ZM76,52H180V68H76ZM180,204H76V172H180Zm40-40H204v-4a12,12,0,0,0-12-12H64a12,12,0,0,0-12,12v4H36V96c0-2.17,2.44-4,5.33-4H214.67c2.89,0,5.33,1.83,5.33,4Zm-16-44a16,16,0,1,1-16-16A16,16,0,0,1,204,120Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M232,96v80H192V152H64v24H24V96c0-8.84,7.76-16,17.33-16H214.67C224.24,80,232,87.16,232,96Z",opacity:"0.2"}),a.createElement("path",{d:"M214.67,72H200V40a8,8,0,0,0-8-8H64a8,8,0,0,0-8,8V72H41.33C27.36,72,16,82.77,16,96v80a8,8,0,0,0,8,8H56v32a8,8,0,0,0,8,8H192a8,8,0,0,0,8-8V184h32a8,8,0,0,0,8-8V96C240,82.77,228.64,72,214.67,72ZM72,48H184V72H72ZM184,208H72V160H184Zm40-40H200V152a8,8,0,0,0-8-8H64a8,8,0,0,0-8,8v16H32V96c0-4.41,4.19-8,9.33-8H214.67c5.14,0,9.33,3.59,9.33,8Zm-24-52a12,12,0,1,1-12-12A12,12,0,0,1,200,116Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M240,96v80a8,8,0,0,1-8,8H200v32a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V184H24a8,8,0,0,1-8-8V96c0-13.23,11.36-24,25.33-24H56V40a8,8,0,0,1,8-8H192a8,8,0,0,1,8,8V72h14.67C228.64,72,240,82.77,240,96ZM72,72H184V48H72Zm112,88H72v48H184Zm16-44a12,12,0,1,0-12,12A12,12,0,0,0,200,116Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M214.67,74H198V40a6,6,0,0,0-6-6H64a6,6,0,0,0-6,6V74H41.33C28.47,74,18,83.87,18,96v80a6,6,0,0,0,6,6H58v34a6,6,0,0,0,6,6H192a6,6,0,0,0,6-6V182h34a6,6,0,0,0,6-6V96C238,83.87,227.53,74,214.67,74ZM70,46H186V74H70ZM186,210H70V158H186Zm40-40H198V152a6,6,0,0,0-6-6H64a6,6,0,0,0-6,6v18H30V96c0-5.51,5.08-10,11.33-10H214.67C220.92,86,226,90.49,226,96Zm-28-54a10,10,0,1,1-10-10A10,10,0,0,1,198,116Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M214.67,72H200V40a8,8,0,0,0-8-8H64a8,8,0,0,0-8,8V72H41.33C27.36,72,16,82.77,16,96v80a8,8,0,0,0,8,8H56v32a8,8,0,0,0,8,8H192a8,8,0,0,0,8-8V184h32a8,8,0,0,0,8-8V96C240,82.77,228.64,72,214.67,72ZM72,48H184V72H72ZM184,208H72V160H184Zm40-40H200V152a8,8,0,0,0-8-8H64a8,8,0,0,0-8,8v16H32V96c0-4.41,4.19-8,9.33-8H214.67c5.14,0,9.33,3.59,9.33,8Zm-24-52a12,12,0,1,1-12-12A12,12,0,0,1,200,116Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M214.67,76H196V40a4,4,0,0,0-4-4H64a4,4,0,0,0-4,4V76H41.33C29.57,76,20,85,20,96v80a4,4,0,0,0,4,4H60v36a4,4,0,0,0,4,4H192a4,4,0,0,0,4-4V180h36a4,4,0,0,0,4-4V96C236,85,226.43,76,214.67,76ZM68,44H188V76H68ZM188,212H68V156H188Zm40-40H196V152a4,4,0,0,0-4-4H64a4,4,0,0,0-4,4v20H28V96c0-6.62,6-12,13.33-12H214.67C222,84,228,89.38,228,96Zm-32-56a8,8,0,1,1-8-8A8,8,0,0,1,196,116Z"}))]]),C=a.forwardRef((e,t)=>a.createElement(u.default,{ref:t,...e,weights:A}));C.displayName="PrinterIcon";var E=e.i(4743);let T=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,32V224a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V32A16,16,0,0,1,64,16H192A16,16,0,0,1,208,32Z",opacity:"0.2"}),a.createElement("path",{d:"M104,60A12,12,0,1,1,92,48,12,12,0,0,1,104,60Zm60,12a12,12,0,1,0-12-12A12,12,0,0,0,164,72ZM92,116a12,12,0,1,0,12,12A12,12,0,0,0,92,116Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,116ZM92,184a12,12,0,1,0,12,12A12,12,0,0,0,92,184Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,184Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M192,16H64A16,16,0,0,0,48,32V224a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V32A16,16,0,0,0,192,16ZM100,200a12,12,0,1,1,12-12A12,12,0,0,1,100,200Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,100,140Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,100,80Zm56,120a12,12,0,1,1,12-12A12,12,0,0,1,156,200Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,156,140Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,156,80Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M102,60A10,10,0,1,1,92,50,10,10,0,0,1,102,60Zm62,10a10,10,0,1,0-10-10A10,10,0,0,0,164,70ZM92,118a10,10,0,1,0,10,10A10,10,0,0,0,92,118Zm72,0a10,10,0,1,0,10,10A10,10,0,0,0,164,118ZM92,186a10,10,0,1,0,10,10A10,10,0,0,0,92,186Zm72,0a10,10,0,1,0,10,10A10,10,0,0,0,164,186Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M104,60A12,12,0,1,1,92,48,12,12,0,0,1,104,60Zm60,12a12,12,0,1,0-12-12A12,12,0,0,0,164,72ZM92,116a12,12,0,1,0,12,12A12,12,0,0,0,92,116Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,116ZM92,184a12,12,0,1,0,12,12A12,12,0,0,0,92,184Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,184Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M100,60a8,8,0,1,1-8-8A8,8,0,0,1,100,60Zm64,8a8,8,0,1,0-8-8A8,8,0,0,0,164,68ZM92,120a8,8,0,1,0,8,8A8,8,0,0,0,92,120Zm72,0a8,8,0,1,0,8,8A8,8,0,0,0,164,120ZM92,188a8,8,0,1,0,8,8A8,8,0,0,0,92,188Zm72,0a8,8,0,1,0,8,8A8,8,0,0,0,164,188Z"}))]]),I=a.forwardRef((e,t)=>a.createElement(u.default,{ref:t,...e,weights:T}));I.displayName="DotsSixVerticalIcon";let S=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M220,48V96a12,12,0,0,1-24,0V77l-35.51,35.52a12,12,0,0,1-17-17L179,60H160a12,12,0,0,1,0-24h48A12,12,0,0,1,220,48ZM95.51,143.51,60,179V160a12,12,0,0,0-24,0v48a12,12,0,0,0,12,12H96a12,12,0,0,0,0-24H77l35.52-35.51a12,12,0,0,0-17-17ZM208,148a12,12,0,0,0-12,12v19l-35.51-35.52a12,12,0,0,0-17,17L179,196H160a12,12,0,0,0,0,24h48a12,12,0,0,0,12-12V160A12,12,0,0,0,208,148ZM77,60H96a12,12,0,0,0,0-24H48A12,12,0,0,0,36,48V96a12,12,0,0,0,24,0V77l35.51,35.52a12,12,0,0,0,17-17Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,48V208H48V48Z",opacity:"0.2"}),a.createElement("path",{d:"M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M109.66,146.34a8,8,0,0,1,0,11.32L83.31,184l18.35,18.34A8,8,0,0,1,96,216H48a8,8,0,0,1-8-8V160a8,8,0,0,1,13.66-5.66L72,172.69l26.34-26.35A8,8,0,0,1,109.66,146.34ZM83.31,72l18.35-18.34A8,8,0,0,0,96,40H48a8,8,0,0,0-8,8V96a8,8,0,0,0,13.66,5.66L72,83.31l26.34,26.35a8,8,0,0,0,11.32-11.32ZM208,40H160a8,8,0,0,0-5.66,13.66L172.69,72,146.34,98.34a8,8,0,0,0,11.32,11.32L184,83.31l18.34,18.35A8,8,0,0,0,216,96V48A8,8,0,0,0,208,40Zm3.06,112.61a8,8,0,0,0-8.72,1.73L184,172.69l-26.34-26.35a8,8,0,0,0-11.32,11.32L172.69,184l-18.35,18.34A8,8,0,0,0,160,216h48a8,8,0,0,0,8-8V160A8,8,0,0,0,211.06,152.61Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M214,48V96a6,6,0,0,1-12,0V62.48l-45.76,45.76a6,6,0,0,1-8.48-8.48L193.52,54H160a6,6,0,0,1,0-12h48A6,6,0,0,1,214,48ZM99.76,147.76,54,193.52V160a6,6,0,0,0-12,0v48a6,6,0,0,0,6,6H96a6,6,0,0,0,0-12H62.48l45.76-45.76a6,6,0,0,0-8.48-8.48ZM208,154a6,6,0,0,0-6,6v33.52l-45.76-45.76a6,6,0,0,0-8.48,8.48L193.52,202H160a6,6,0,0,0,0,12h48a6,6,0,0,0,6-6V160A6,6,0,0,0,208,154ZM62.48,54H96a6,6,0,0,0,0-12H48a6,6,0,0,0-6,6V96a6,6,0,0,0,12,0V62.48l45.76,45.76a6,6,0,0,0,8.48-8.48Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M212,48V96a4,4,0,0,1-8,0V57.66l-49.17,49.17a4,4,0,0,1-5.66-5.66L198.34,52H160a4,4,0,0,1,0-8h48A4,4,0,0,1,212,48ZM101.17,149.17,52,198.34V160a4,4,0,0,0-8,0v48a4,4,0,0,0,4,4H96a4,4,0,0,0,0-8H57.66l49.17-49.17a4,4,0,0,0-5.66-5.66ZM208,156a4,4,0,0,0-4,4v38.34l-49.17-49.17a4,4,0,0,0-5.66,5.66L198.34,204H160a4,4,0,0,0,0,8h48a4,4,0,0,0,4-4V160A4,4,0,0,0,208,156ZM57.66,52H96a4,4,0,0,0,0-8H48a4,4,0,0,0-4,4V96a4,4,0,0,0,8,0V57.66l49.17,49.17a4,4,0,0,0,5.66-5.66Z"}))]]),R=a.forwardRef((e,t)=>a.createElement(u.default,{ref:t,...e,weights:S}));R.displayName="ArrowsOutIcon";let L=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M140,104V64a12,12,0,0,1,24,0V75l35.51-35.52a12,12,0,0,1,17,17L181,92h11a12,12,0,0,1,0,24H152A12,12,0,0,1,140,104Zm-36,36H64a12,12,0,0,0,0,24H75L39.51,199.51a12,12,0,0,0,17,17L92,181v11a12,12,0,0,0,24,0V152A12,12,0,0,0,104,140Zm77,24h11a12,12,0,0,0,0-24H152a12,12,0,0,0-12,12v40a12,12,0,0,0,24,0V181l35.51,35.52a12,12,0,0,0,17-17ZM104,52A12,12,0,0,0,92,64V75L56.49,39.51a12,12,0,0,0-17,17L75,92H64a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V64A12,12,0,0,0,104,52Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,48V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48Z",opacity:"0.2"}),a.createElement("path",{d:"M144,104V64a8,8,0,0,1,16,0V84.69l42.34-42.35a8,8,0,0,1,11.32,11.32L171.31,96H192a8,8,0,0,1,0,16H152A8,8,0,0,1,144,104Zm-40,40H64a8,8,0,0,0,0,16H84.69L42.34,202.34a8,8,0,0,0,11.32,11.32L96,171.31V192a8,8,0,0,0,16,0V152A8,8,0,0,0,104,144Zm67.31,16H192a8,8,0,0,0,0-16H152a8,8,0,0,0-8,8v40a8,8,0,0,0,16,0V171.31l42.34,42.35a8,8,0,0,0,11.32-11.32ZM104,56a8,8,0,0,0-8,8V84.69L53.66,42.34A8,8,0,0,0,42.34,53.66L84.69,96H64a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V64A8,8,0,0,0,104,56Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M144,104V64a8,8,0,0,1,13.66-5.66L172,72.69l30.34-30.35a8,8,0,0,1,11.32,11.32L183.31,84l14.35,14.34A8,8,0,0,1,192,112H152A8,8,0,0,1,144,104Zm-40,40H64a8,8,0,0,0-5.66,13.66L72.69,172,42.34,202.34a8,8,0,0,0,11.32,11.32L84,183.31l14.34,14.35A8,8,0,0,0,112,192V152A8,8,0,0,0,104,144Zm3.06-87.39a8,8,0,0,0-8.72,1.73L84,72.69,53.66,42.34A8,8,0,0,0,42.34,53.66L72.69,84,58.34,98.34A8,8,0,0,0,64,112h40a8,8,0,0,0,8-8V64A8,8,0,0,0,107.06,56.61ZM183.31,172l14.35-14.34A8,8,0,0,0,192,144H152a8,8,0,0,0-8,8v40a8,8,0,0,0,13.66,5.66L172,183.31l30.34,30.35a8,8,0,0,0,11.32-11.32Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M146,104V64a6,6,0,0,1,12,0V89.51l45.76-45.75a6,6,0,0,1,8.48,8.48L166.48,98H192a6,6,0,0,1,0,12H152A6,6,0,0,1,146,104Zm-42,42H64a6,6,0,0,0,0,12H89.52L43.76,203.76a6,6,0,1,0,8.48,8.48L98,166.48V192a6,6,0,0,0,12,0V152A6,6,0,0,0,104,146Zm62.48,12H192a6,6,0,0,0,0-12H152a6,6,0,0,0-6,6v40a6,6,0,0,0,12,0V166.48l45.76,45.76a6,6,0,0,0,8.48-8.48ZM104,58a6,6,0,0,0-6,6V89.51L52.24,43.76a6,6,0,0,0-8.48,8.48L89.52,98H64a6,6,0,0,0,0,12h40a6,6,0,0,0,6-6V64A6,6,0,0,0,104,58Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M144,104V64a8,8,0,0,1,16,0V84.69l42.34-42.35a8,8,0,0,1,11.32,11.32L171.31,96H192a8,8,0,0,1,0,16H152A8,8,0,0,1,144,104Zm-40,40H64a8,8,0,0,0,0,16H84.69L42.34,202.34a8,8,0,0,0,11.32,11.32L96,171.31V192a8,8,0,0,0,16,0V152A8,8,0,0,0,104,144Zm67.31,16H192a8,8,0,0,0,0-16H152a8,8,0,0,0-8,8v40a8,8,0,0,0,16,0V171.31l42.34,42.35a8,8,0,0,0,11.32-11.32ZM104,56a8,8,0,0,0-8,8V84.69L53.66,42.34A8,8,0,0,0,42.34,53.66L84.69,96H64a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V64A8,8,0,0,0,104,56Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M148,104V64a4,4,0,0,1,8,0V94.34l49.17-49.17a4,4,0,1,1,5.66,5.66L161.66,100H192a4,4,0,0,1,0,8H152A4,4,0,0,1,148,104Zm-44,44H64a4,4,0,0,0,0,8H94.34L45.17,205.17a4,4,0,0,0,5.66,5.66L100,161.66V192a4,4,0,0,0,8,0V152A4,4,0,0,0,104,148Zm57.66,8H192a4,4,0,0,0,0-8H152a4,4,0,0,0-4,4v40a4,4,0,0,0,8,0V161.66l49.17,49.17a4,4,0,0,0,5.66-5.66ZM104,60a4,4,0,0,0-4,4V94.34L50.83,45.17a4,4,0,0,0-5.66,5.66L94.34,100H64a4,4,0,0,0,0,8h40a4,4,0,0,0,4-4V64A4,4,0,0,0,104,60Z"}))]]),M=a.forwardRef((e,t)=>a.createElement(u.default,{ref:t,...e,weights:L}));M.displayName="ArrowsInIcon";var V=e.i(73230),P=e.i(18720),k=e.i(82487),H=e.i(1796),D=e.i(99723),O=e.i(90961),Z=e.i(68817),G=e.i(25209),B=e.i(17389),z=e.i(31487),F=e.i(73146);let $=e=>e.activities&&0!==e.activities.length?Math.round(e.activities.reduce((e,t)=>e+(e=>{switch(e){case"VALIDATED":return 100;case"DELIVERED":return 90;case"IN_REVIEW":return 80;case"COMPLETED":return 60;case"IN_PROGRESS":return 20;default:return 0}})(t.status),0)/e.activities.length):0,U=e=>e.phases&&0!==e.phases.length?Math.round(e.phases.reduce((e,t)=>e+$(t),0)/e.phases.length):0,_={"Resumen & Tablas":["KPI","TABLE","MATRIX"],Comparación:["BAR","BAR_STACKED","LOLLIPOP"],Tendencia:["LINE","AREA"],Composición:["PIE","DONUT","TREEMAP"],Relación:["SCATTER","BUBBLE"],Especiales:["RADAR","FUNNEL","GAUGE"],"Gestión de Proyectos":["GANTT","THERMOMETER","HEATMAP"]},K=[{id:"DS-WF",title:"Workflows: Casos T1-2025",sourceType:"WORKFLOWS",rows:1250,size:"450KB",updatedAt:"2025-06-15",access:"PUBLIC_ORG",ownerId:"u1",columns:[{name:"ID Caso",type:"STRING"},{name:"Estado",type:"STRING"},{name:"Unidad",type:"STRING"},{name:"Tiempo Resolución (h)",type:"NUMBER"}]},{id:"DS-PROJ",title:"Gestión de Proyectos (En Vivo)",sourceType:"PROJECTS",rows:0,size:"Dynamic",updatedAt:"Ahora",access:"PUBLIC_ORG",ownerId:"sys",columns:[{name:"Proyecto",type:"STRING"},{name:"Carpeta (Unidad)",type:"STRING"},{name:"Estado",type:"STRING"},{name:"Progreso (%)",type:"NUMBER"},{name:"Fases",type:"NUMBER"},{name:"Fase",type:"STRING"},{name:"Estado Fase",type:"STRING"},{name:"Actividad",type:"STRING"},{name:"Estado Actividad",type:"STRING"},{name:"Responsable",type:"STRING"}]},{id:"DS-REPO",title:"Repositorio: Metadatos",sourceType:"REPOSITORY",rows:8400,size:"2.1MB",updatedAt:"2025-06-14",access:"PRIVATE",ownerId:"u1",columns:[{name:"Nombre Archivo",type:"STRING"},{name:"Tipo MIME",type:"STRING"},{name:"Autor",type:"STRING"},{name:"Tamaño (MB)",type:"NUMBER"}]},{id:"DS-UPLOAD",title:"Presupuesto Marketing.xlsx",sourceType:"UPLOAD",rows:120,size:"25KB",updatedAt:"2025-06-10",access:"PRIVATE",ownerId:"u1",columns:[{name:"Mes",type:"STRING"},{name:"Canal",type:"STRING"},{name:"Inversión",type:"NUMBER"},{name:"Leads",type:"NUMBER"}]}],X=[{id:"DB-1",title:"Resumen Operativo",description:"KPIs principales de la operación",updatedAt:"Hace 2h",access:"PUBLIC_ORG",ownerId:"sys",views:340,sections:[{id:"sec-1",title:"Indicadores Globales",widgets:[{id:"w1",title:"Casos Totales",layout:{x:0,y:0,w:1,h:1},config:{datasetId:"DS-WF",chartType:"KPI",aggregation:"COUNT",valueColumn:"ID Caso"}},{id:"w2",title:"Casos por Estado",layout:{x:0,y:0,w:2,h:2},config:{datasetId:"DS-WF",chartType:"BAR",aggregation:"COUNT",valueColumn:"ID Caso",groupColumn:"Estado"}}]}]},{id:"DB-2",title:"Métricas de Desarrollo",description:"Indicadores del área de desarrollo de software",updatedAt:"Hace 1d",access:"PUBLIC_ORG",ownerId:"sys",views:125,unit:"Desarrollo de Software",process:"DevOps",sections:[{id:"sec-dev-1",title:"Métricas DevOps",widgets:[]}]},{id:"DB-3",title:"Dashboard de RRHH",description:"Métricas de gestión de candidatos",updatedAt:"Hace 3h",access:"PRIVATE",ownerId:"sys",views:89,unit:"Reclutamiento y Selección",process:"Gestión de Candidatos",sections:[{id:"sec-rrhh-1",title:"Reclutamiento",widgets:[]}]},{id:"DB-4",title:"Análisis Financiero",description:"Reportes de contabilidad y cierre mensual",updatedAt:"Hace 5h",access:"PUBLIC_ORG",ownerId:"sys",views:234,unit:"Contabilidad",process:"Cierre Mensual",sections:[{id:"sec-fin-1",title:"Cierre Contable",widgets:[]}]}],J=(e,t,a,s)=>{if(!t)return null;let l=[];if("UPLOAD"===t.sourceType||"WORKFLOWS"===t.sourceType||"REPOSITORY"===t.sourceType)0===(l=t._data||[]).length&&t.rows>0&&(l=Array.from({length:10}).map((e,t)=>({id:t,Estado:["Abierto","Cerrado","En Proceso"][t%3],Unidad:["Ventas","HR","IT"][t%3],"Progreso (%)":Math.floor(100*Math.random())})));else if("PROJECTS"===t.sourceType){let s=a.projects;t._filterFolderId&&(s=s.filter(e=>e.folderId===t._filterFolderId));let r=["Actividad","Estado Actividad","Responsable","Duración (Días)"].includes(e.groupColumn||"")||["Actividad","Responsable","Duración (Días)"].includes(e.valueColumn)||"BAR_STACKED"===e.chartType,i=["Fase","Estado Fase"].includes(e.groupColumn||"")||["Fase"].includes(e.valueColumn);r?s.forEach(e=>{e.phases.forEach(t=>{t.activities.forEach(s=>{let r={COMPLETED:"Completado",IN_PROGRESS:"En Proceso",NOT_STARTED:"Sin Iniciar"},i={Proyecto:e.title,"Carpeta (Unidad)":a.folders.find(t=>t.id===e.folderId)?.name||"Sin Carpeta",Estado:r[e.status]||e.status,"Progreso (%)":U(e),Fase:t.name,"Estado Fase":r[t.status]||t.status,Actividad:s.name,"Estado Actividad":r[s.status]||s.status,Responsable:"Sin Asignar","Duración (Días)":[15,20,30,45,60][Math.floor(5*Math.random())]};s.participants&&s.participants.length>0?s.participants.forEach(e=>{let t="string"==typeof e?e:e.userId,s=a.users.find(e=>e.id===t);l.push({...i,Responsable:s?s.name:"Desconocido"})}):l.push(i)})})}):i?s.forEach(e=>{e.phases.forEach(t=>{l.push({Proyecto:e.title,"Carpeta (Unidad)":a.folders.find(t=>t.id===e.folderId)?.name||"Sin Carpeta",Estado:e.status,"Progreso (%)":U(e),Fase:t.name,"Estado Fase":t.status,Fases:e.phases.length})})}):l=s.map(e=>({Proyecto:e.title,"Carpeta (Unidad)":a.folders.find(t=>t.id===e.folderId)?.name||"Sin Carpeta",Estado:e.status,"Progreso (%)":U(e),Fases:e.phases.length}))}if(s&&Object.entries(s).forEach(([e,a])=>{if("all"!==a){let s=parseInt(e.replace("filter_","")),r=t.columns.filter(e=>"STRING"===e.type)[s];r&&(l=l.filter(e=>String(e[r.name])===a))}}),"MATRIX"===e.chartType){let e=a.projects.filter(e=>!t._filterFolderId||e.folderId===t._filterFolderId).map(e=>({id:e.id,project:e.title,progress:U(e),phases:e.phases.map(e=>{var t;let s;return{name:e.name,progress:$(e),team:(t=a.users,s=new Set,e.activities?.forEach(e=>{e.participants?.forEach(e=>{let a="string"==typeof e?e:e.userId,l=t.find(e=>e.id===a);l&&s.add(l.name)})}),Array.from(s).join(", "))}})}));return{type:"MATRIX",rows:e,maxPhases:Math.max(...e.map(e=>e.phases.length),0)}}if("GANTT"===e.chartType)return{type:"GANTT",tasks:a.projects.filter(e=>!t._filterFolderId||e.folderId===t._filterFolderId).flatMap(e=>e.phases.flatMap(t=>t.activities.map(t=>({id:t.id,project:e.title,name:t.name,progress:"COMPLETED"===t.status?100:50*("IN_PROGRESS"===t.status),status:t.status})))).slice(0,5)};let r=e.valueColumn,i=e.groupColumn,n=e.aggregation||"COUNT";if("KPI"===e.chartType){let e=0;if("COUNT"===n)e=l.length;else{let t=l.map(e=>{let t=e[r];return"number"==typeof t?t:"string"==typeof t&&parseFloat(t.replace("%",""))||0});if(0===t.length)e=0;else{let a=t.reduce((e,t)=>e+t,0);e="SUM"===n?a:Math.round(a/t.length)}}return{value:r.includes("%")||l.length>0&&String(l[0][r]).includes("%")?`${e}%`:e.toLocaleString(),label:"COUNT"===n?`Total ${r}`:`${n} de ${r}`}}if(i){if("BAR_STACKED"===e.chartType){let e={},t=new Set;return l.forEach(a=>{let s=String(a[i]||"Sin Valor"),l=String(a["Estado Actividad"]||"Sin Estado");t.add(l),e[s]||(e[s]={}),e[s][l]=(e[s][l]||0)+1}),{type:"STACKED",labels:Object.keys(e),series:Array.from(t).map(t=>({name:t,data:Object.keys(e).map(a=>e[a][t]||0)}))}}let t={};l.forEach(e=>{let a=String(e[i]||"Sin Valor");t[a]||(t[a]={sum:0,count:0});let s=0;if("COUNT"!==n){let t=e[r];"number"==typeof t?s=t:"string"==typeof t&&(s=parseFloat(t.replace("%",""))||0)}else s=1;t[a].sum+=s,t[a].count+=1});let a=Object.keys(t),s=a.map(e=>"COUNT"===n?t[e].count:"SUM"===n?t[e].sum:"AVG"===n?Math.round(t[e].sum/t[e].count):t[e].sum);return{labels:a,data:s}}return null};function W(){let e,{currentTenantId:l,version:r}=(0,F.useApp)(),[i,n]=(0,a.useState)("HUB"),[o,p]=(0,a.useState)("DASHBOARDS"),x=(0,a.useMemo)(()=>({projects:z.DB.projects.filter(e=>e.tenantId===l),folders:z.DB.projectFolders.filter(e=>e.tenantId===l),users:z.DB.users,tenantId:l||""}),[l,r]),m=(0,a.useMemo)(()=>x.folders.map(e=>({id:`DS-FLDR-${e.id}`,title:`Carpeta: ${e.name}`,sourceType:"PROJECTS",rows:x.projects.filter(t=>t.folderId===e.id).length,size:"Dynamic",updatedAt:"Ahora",access:"PUBLIC_ORG",ownerId:"sys",columns:[{name:"Proyecto",type:"STRING"},{name:"Estado",type:"STRING"},{name:"Progreso (%)",type:"NUMBER"},{name:"Fase",type:"STRING"},{name:"Actividad",type:"STRING"},{name:"Estado Actividad",type:"STRING"},{name:"Responsable",type:"STRING"},{name:"Fecha Fin",type:"DATE"}],_filterFolderId:e.id})),[x]),[u,h]=(0,a.useState)([]),[b,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("m360_dashboards_version"),t=localStorage.getItem("m360_dashboards");if("2.0"===e&&t)try{h(JSON.parse(t))}catch(e){h(X)}else console.log("Loading new dashboard structure version:","2.0"),h(X),localStorage.setItem("m360_dashboards_version","2.0"),localStorage.setItem("m360_dashboards",JSON.stringify(X))},[]),(0,a.useEffect)(()=>{u.length>0&&localStorage.setItem("m360_dashboards",JSON.stringify(u))},[u]);let[g,v]=(0,a.useState)(K),[j,N]=(0,a.useState)(null),[w,y]=(0,a.useState)(null),[A,C]=(0,a.useState)(null),E=(0,a.useMemo)(()=>[...g,...m],[g,m]),[T,I]=(0,a.useState)(!1),[S,R]=(0,a.useState)(!1),[L,M]=(0,a.useState)({dateRange:"all",folder:"all",status:"all"}),[V,P]=(0,a.useState)("ALL"),[k,H]=(0,a.useState)("ALL"),[D,O]=(0,a.useState)(""),Z=(0,a.useMemo)(()=>z.DB.units.filter(e=>e.tenantId===l&&"UNIT"===e.type).map(e=>e.name),[l]),G=(0,a.useMemo)(()=>{let e=z.DB.projects.filter(e=>e.tenantId===l),t=z.DB.projectFolders.filter(e=>e.tenantId===l),a=new Set;return e.forEach(e=>{e.process&&("ALL"===V||e.unit===V)&&a.add(e.process)}),t.forEach(e=>{e.process&&("ALL"===V||e.unit===V)&&a.add(e.process)}),Array.from(a).sort()},[l,V]);(0,a.useEffect)(()=>{H("ALL")},[V]);let B=(0,a.useMemo)(()=>u.filter(e=>{let t=!D||e.title.toLowerCase().includes(D.toLowerCase())||e.description.toLowerCase().includes(D.toLowerCase()),a="ALL"===V||"GLOBAL"===V&&!e.unit||e.unit===V,s="ALL"===k||e.process===k;return t&&a&&s}),[u,D,V,k]),$=e=>{h(t=>t.filter(t=>t.id!==e))};return"EDITOR"===i&&j?(0,t.jsx)(Y,{dashboard:j,datasets:E,contextData:x,onSave:e=>{h(t=>t.map(t=>t.id===e.id?e:t))},onBack:()=>{n("HUB"),N(null)},filters:L,setFilters:M}):(0,t.jsxs)("div",{className:"p-8 h-full bg-slate-50 flex flex-col overflow-hidden",children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:`
                @media print {
                    #sidebar, .topbar, .no-print, aside, header {
                        display: none !important;
                    }
                    body, html, main, .content, #__next {
                        background: white !important;
                        height: auto !important;
                        overflow: visible !important;
                        padding: 0 !important;
                        margin: 0 !important;
                    }
                    .canvas-print-area {
                        position: absolute !important;
                        left: 0 !important;
                        top: 0 !important;
                        width: 100% !important;
                        height: auto !important;
                        padding: 0 !important;
                        margin: 0 !important;
                        overflow: visible !important;
                        background: white !important;
                    }
                    .max-w-7xl {
                        max-width: 100% !important;
                    }
                    .flex-1 {
                        overflow: visible !important;
                    }
                }
            `}}),(0,t.jsxs)("div",{className:"flex justify-between items-end mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,t.jsx)(s.ChartPieSlice,{className:"text-purple-600",weight:"duotone"}),"Analytics Studio"]}),(0,t.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"Plataforma de Datos e Inteligencia de Negocios."})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:()=>R(!0),className:"btn bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 shadow-sm",children:[(0,t.jsx)(d.Database,{size:18})," Crear Dataset"]}),(0,t.jsxs)("button",{onClick:()=>I(!0),className:"btn bg-purple-600 text-white hover:bg-purple-700 shadow-lg shadow-purple-500/20",children:[(0,t.jsx)(c.PresentationChart,{size:18,weight:"bold"})," Crear Tablero"]})]})]}),(0,t.jsxs)("div",{className:"flex border-b border-slate-200 mb-6",children:[(0,t.jsxs)("button",{onClick:()=>p("DASHBOARDS"),className:`px-4 py-3 text-sm font-semibold border-b-2 transition-colors flex items-center gap-2 ${"DASHBOARDS"===o?"border-purple-600 text-purple-700":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[(0,t.jsx)(c.PresentationChart,{size:18})," Mis Tableros"]}),(0,t.jsxs)("button",{onClick:()=>p("DATASETS"),className:`px-4 py-3 text-sm font-semibold border-b-2 transition-colors flex items-center gap-2 ${"DATASETS"===o?"border-purple-600 text-purple-700":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[(0,t.jsx)(d.Database,{size:18})," Catálogo de Datos"]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:"DASHBOARDS"===o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("input",{type:"text",placeholder:"Buscar tablero...",className:"w-full pl-3 pr-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 outline-none",value:D,onChange:e=>O(e.target.value)})}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("select",{className:"w-full pl-3 pr-8 py-2 bg-white border border-slate-200 rounded-lg text-sm appearance-none outline-none focus:ring-2 focus:ring-purple-500 text-slate-600",value:V,onChange:e=>P(e.target.value),children:[(0,t.jsx)("option",{value:"ALL",children:"Todas las Unidades"}),(0,t.jsx)("option",{value:"GLOBAL",children:"Globales"}),Z.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("select",{className:"w-full pl-3 pr-8 py-2 bg-white border border-slate-200 rounded-lg text-sm appearance-none outline-none focus:ring-2 focus:ring-purple-500 text-slate-600",value:k,onChange:e=>H(e.target.value),children:[(0,t.jsx)("option",{value:"ALL",children:"Todos los Procesos"}),G.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:B.map(e=>(0,t.jsx)(Q,{dashboard:e,onClick:()=>{N(e),n("EDITOR")},onDelete:$,onEdit:()=>C(e.id),onShare:()=>y(e)},e.id))})]}):(0,t.jsx)(q,{datasets:E,onNormalize:f})}),T&&(0,t.jsx)(et,{onClose:()=>I(!1),onCreate:(e,t,a,s,l,r)=>{if(s){let o=m.find(e=>e.id===s);if(o){var i;let s,d;i={title:e,description:t,access:a?"PUBLIC_ORG":"PRIVATE",unit:l,process:r},s=o.title.replace("Carpeta: ",""),d={id:`DB-AUTO-${Date.now()}`,title:i.title||`Reporte ${s}`,description:i.description||`An\xe1lisis autom\xe1tico de proyectos en la carpeta ${s}`,updatedAt:"Ahora",access:i.access,ownerId:"me",views:0,unit:i.unit,process:i.process,isAuto:!0,sections:[{id:"sec-level-1",title:"Nivel 1: Resumen Ejecutivo",columns:2,widgets:[{id:`w-cnt-${Date.now()}`,title:"Actividades por Estado",layout:{x:0,y:0,w:1,h:2},config:{datasetId:o.id,chartType:"BAR",aggregation:"COUNT",valueColumn:"Actividad",groupColumn:"Estado Actividad"}},{id:`w-dist-${Date.now()}`,title:"Distribución Porcentual",layout:{x:1,y:0,w:1,h:2},config:{datasetId:o.id,chartType:"PIE",aggregation:"COUNT",valueColumn:"Actividad",groupColumn:"Estado Actividad"}}]},{id:"sec-level-2",title:"Nivel 2: Comparativas",columns:3,widgets:[{id:`w-stk-${Date.now()}`,title:"Estado por Proyecto",layout:{x:0,y:0,w:1,h:2},config:{datasetId:o.id,chartType:"BAR_STACKED",aggregation:"COUNT",valueColumn:"Actividad",groupColumn:"Proyecto"}},{id:`w-vol-${Date.now()}`,title:"Volumen por Fase",layout:{x:1,y:0,w:1,h:2},config:{datasetId:o.id,chartType:"BAR",aggregation:"COUNT",valueColumn:"Actividad",groupColumn:"Fase"}},{id:`w-chg-${Date.now()}`,title:"Carga por Participante",layout:{x:2,y:0,w:1,h:2},config:{datasetId:o.id,chartType:"BAR",aggregation:"COUNT",valueColumn:"Actividad",groupColumn:"Responsable"}}]},{id:"sec-level-3",title:"Nivel 3: Detalle y Tiempo",columns:1,widgets:[{id:`w-map-${Date.now()}`,title:"Mapa de Calor de Fases",layout:{x:0,y:0,w:1,h:3},config:{datasetId:o.id,chartType:"MATRIX",aggregation:"MATRIX",valueColumn:"Proyecto",groupColumn:"Fase"}},{id:`w-gnt-${Date.now()}`,title:"Cronograma de Actividades (Gantt)",layout:{x:0,y:3,w:1,h:3},config:{datasetId:o.id,chartType:"GANTT",aggregation:"COUNT",valueColumn:"Actividad",groupColumn:"Proyecto"}},{id:`w-hst-${Date.now()}`,title:"Histograma de Duración (Días)",layout:{x:0,y:6,w:1,h:2},config:{datasetId:o.id,chartType:"BAR",aggregation:"COUNT",valueColumn:"Actividad",groupColumn:"Duración (Días)"}}]}]},h(e=>[d,...e]),N(d),n("EDITOR"),I(!1);return}}let o={id:`DB-${Date.now()}`,title:e,description:t,updatedAt:"Ahora",access:a?"PUBLIC_ORG":"PRIVATE",ownerId:"me",views:0,unit:"GLOBAL"===l?void 0:l,process:r||void 0,sections:[{id:"sec-1",title:"Principal",widgets:[]},{id:"sec-standard-analysis",title:"Análisis de Estructura (Global)",columns:1,widgets:[{id:`w-std-1-${Date.now()}`,title:"Distribución de Proyectos por Carpeta",layout:{x:0,y:0,w:1,h:2},config:{datasetId:"DS-PROJ",chartType:"BAR",aggregation:"COUNT",valueColumn:"Proyecto",groupColumn:"Carpeta (Unidad)"}},{id:`w-std-2-${Date.now()}`,title:"Estado de Fases (%) - Promedio Global",layout:{x:0,y:2,w:1,h:2},config:{datasetId:"DS-PROJ",chartType:"MATRIX",aggregation:"MATRIX",valueColumn:"Progreso (%)",groupColumn:"Fase"}}]}]};h(e=>[o,...e]),N(o),n("EDITOR"),I(!1)},folderDatasets:m}),S&&(0,t.jsx)(ea,{onClose:()=>R(!1),onCreate:(e,t,a)=>{if("FILE"===t&&a instanceof File){let t=new FileReader;t.onload=t=>{let s=t.target?.result,l=[],r=[],i=0;if(s.includes("<table")){let e=new DOMParser().parseFromString(s,"text/html").querySelector("table");if(e){let t=Array.from(e.querySelectorAll("thead th")).map(e=>e.textContent?.trim()||"Col"),a=Array.from(e.querySelectorAll("tbody tr")),s=a[0]?.querySelectorAll("td");l=t.map((e,t)=>({name:e,type:isNaN(parseFloat(s?.[t]?.textContent?.trim()||"a"))?"STRING":"NUMBER"})),i=(r=a.map(e=>{let a=Array.from(e.querySelectorAll("td")),s={};return t.forEach((e,t)=>{s[e]=a[t]?.textContent?.trim()||""}),s})).length}}else{let e=s.split("\n").filter(e=>e.trim());if(e.length>0){let t=e[0].split(",").map(e=>e.replace(/"/g,"").trim());l=t.map(e=>({name:e,type:"STRING"})),i=(r=e.slice(1).map(e=>{let a=e.split(","),s={};return t.forEach((e,t)=>s[e]=a[t]?.replace(/"/g,"").trim()),s})).length}}v([{id:`DS-${Date.now()}`,title:e||a.name,sourceType:"UPLOAD",rows:i,size:`${Math.round(a.size/1024)}KB`,updatedAt:"Ahora",access:"PRIVATE",ownerId:"me",columns:l,_data:r},...g]),R(!1)},t.readAsText(a)}else{let a=[{name:"ID",type:"STRING"}],s=Math.floor(500*Math.random())+50;"PROJECTS"===t?a=[{name:"Fase",type:"STRING"},{name:"Actividad",type:"STRING"},{name:"Responsable",type:"STRING"},{name:"Progreso (%)",type:"NUMBER"},{name:"Días Estimados",type:"NUMBER"},{name:"Estado",type:"STRING"}]:"REPOSITORY"===t?a=[{name:"Archivo",type:"STRING"},{name:"Tipo",type:"STRING"},{name:"Tamaño (MB)",type:"NUMBER"},{name:"Fecha Lectura",type:"DATE"},{name:"Contenido Extraído",type:"STRING"}]:"STORAGE"===t&&(a=[{name:"Archivo Externo",type:"STRING"},{name:"Folder Path",type:"STRING"},{name:"Metadata Tag",type:"STRING"},{name:"Size",type:"NUMBER"}]),v([{id:`DS-${Date.now()}`,title:e,sourceType:t,rows:s,size:"120KB",updatedAt:"Ahora",access:"PRIVATE",ownerId:"me",columns:a},...g]),R(!1)}}}),A&&((e=u.find(e=>e.id===A))?(0,t.jsx)(ee,{dashboard:e,onClose:()=>C(null),onSave:t=>{var a;a=e.id,h(u.map(e=>e.id===a?{...e,...t,updatedAt:"Ahora"}:e)),j?.id===a&&N({...j,...t}),C(null)}}):null),w&&(0,t.jsx)(es,{dashboard:w,onClose:()=>y(null),users:x.users}),b&&(0,t.jsx)(el,{dataset:b,onClose:()=>f(null),onSave:e=>{v(t=>t.map(t=>t.id===e.id?e:t)),f(null)}})]})}function Y({dashboard:e,datasets:s,contextData:r,onSave:o,onBack:d,filters:p,setFilters:u}){let[h,b]=(0,a.useState)(e),[f,g]=(0,a.useState)(null),[A,T]=(0,a.useState)(null),[S,L]=(0,a.useState)(null),[P,k]=(0,a.useState)(null),[D,G]=(0,a.useState)(!1),[B,z]=(0,a.useState)(!1),[F,$]=(0,a.useState)(!1),U=e=>{let t={id:`W-${Date.now()}`,title:"Nueva Visualización",layout:{x:0,y:0,w:1,h:2},config:{datasetId:s[0].id,chartType:"MATRIX",aggregation:"MATRIX",valueColumn:s[0].columns[0].name,groupColumn:s[0].columns[1]?.name}};b({...h,sections:h.sections.map(a=>a.id===e?{...a,widgets:[...a.widgets,t]}:a)}),g(t.id)},K=(e,t)=>{b({...h,sections:h.sections.map(a=>({...a,widgets:a.widgets.map(a=>a.id!==e?a:"datasetId"in t||"chartType"in t||"aggregation"in t||"valueColumn"in t||"groupColumn"in t?{...a,config:{...a.config,...t}}:{...a,...t})}))})},X=e=>{b({...h,sections:h.sections.map(t=>({...t,widgets:t.widgets.filter(t=>t.id!==e)}))}),f===e&&g(null)},W=()=>{L(null)},Y=(e,t,a)=>{if(e.preventDefault(),!A){T(null),L(null);return}let s=null,l=null;if(h.sections.forEach(e=>{let t=e.widgets.find(e=>e.id===A);t&&(s=t,l=e.id)}),!s)return;let r=h.sections.map(e=>{let r=[...e.widgets],i=e.id===l,n=a?e.id===a:e.widgets.some(e=>e.id===t);if(i&&(r=r.filter(e=>e.id!==A)),n)if(t&&!a){let e=r.findIndex(e=>e.id===t);r.splice(e,0,s)}else r.push(s);return{...e,widgets:r}});b({...h,sections:r}),T(null),L(null)},q=h.sections.flatMap(e=>e.widgets).find(e=>e.id===f);return(0,t.jsxs)("div",{className:"flex h-full bg-slate-100 overflow-hidden print:bg-white print:overflow-visible relative",children:[(0,t.jsxs)("div",{className:`bg-white border-r border-slate-200 flex flex-col shadow-xl z-20 no-print print:hidden transition-all duration-300 ${B?"w-0 overflow-hidden border-none":"w-80"}`,children:[(0,t.jsxs)("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between whitespace-nowrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:d,className:"text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-50 rounded",title:"Volver",children:(0,t.jsx)(x.X,{size:20})}),(0,t.jsx)("span",{className:"font-bold text-slate-700",children:"Editor"})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("button",{onClick:()=>G(!0),className:"text-blue-600 hover:bg-blue-50 p-1.5 rounded",title:"Compartir Tablero",children:(0,t.jsx)(i.ShareNetwork,{size:18})}),(0,t.jsx)("button",{onClick:()=>{z(!0),setTimeout(()=>window.print(),300)},className:"text-slate-500 hover:bg-slate-50 p-1.5 rounded",title:"Imprimir / PDF",children:(0,t.jsx)(C,{size:18})}),(0,t.jsxs)("button",{onClick:()=>{o(h),$(!0),setTimeout(()=>$(!1),3e3)},className:`${F?"text-green-600 bg-green-50":"text-purple-600 hover:bg-purple-50"} p-1.5 rounded transition-all flex items-center gap-1`,title:"Guardar",children:[F?(0,t.jsx)(H.Check,{size:18,weight:"bold"}):(0,t.jsx)(m.FloppyDisk,{size:18}),F&&(0,t.jsx)("span",{className:"text-[10px] font-bold",children:"GUARDADO"})]}),(0,t.jsx)("button",{onClick:()=>z(!0),className:"text-slate-400 hover:bg-slate-50 p-1.5 rounded ml-1",title:"Contraer Editor",children:(0,t.jsx)(O.CaretLeft,{size:18,weight:"bold"})})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:q?(0,t.jsxs)("div",{className:"space-y-4 animate-fadeIn",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"font-bold text-slate-800 text-sm",children:"Configurar Visual"}),(0,t.jsx)("button",{onClick:()=>X(q.id),className:"text-red-500 text-xs hover:underline",children:"Eliminar"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Título"}),(0,t.jsx)("input",{className:"input",value:q.title,onChange:e=>K(q.id,{title:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Tipo de Gráfico"}),(0,t.jsx)("div",{className:"space-y-3 h-64 overflow-y-auto pr-1 custom-scrollbar",children:Object.entries(_).map(([e,a])=>(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5",children:e}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:a.map(e=>(0,t.jsx)("button",{onClick:()=>K(q.id,{chartType:e}),className:`p-1.5 rounded border text-center text-[10px] font-bold truncate transition-all ${q.config.chartType===e?"bg-purple-100 border-purple-500 text-purple-700 shadow-sm":"bg-white border-slate-200 text-slate-500 hover:border-purple-300"}`,title:e,children:e},e))})]},e))})]}),(0,t.jsx)("hr",{className:"border-slate-100"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Fuente de Datos"}),(0,t.jsx)("select",{className:"select",value:q.config.datasetId,onChange:e=>K(q.id,{datasetId:e.target.value}),children:s.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Agregación (Operación)"}),(0,t.jsx)("div",{className:"flex rounded-md shadow-sm",children:["COUNT","SUM","AVG"].map(e=>(0,t.jsx)("button",{onClick:()=>K(q.id,{aggregation:e}),className:`flex-1 py-1 text-xs border ${q.config.aggregation===e?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600"}`,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Columna Valor"}),(0,t.jsx)("select",{className:"select",value:q.config.valueColumn,onChange:e=>{let t=s.find(e=>e.id===q.config.datasetId)?.columns.find(t=>t.name===e.target.value),a=q.config.aggregation;t?.type==="STRING"&&(a="COUNT"),K(q.id,{valueColumn:e.target.value,aggregation:a})},children:s.find(e=>e.id===q.config.datasetId)?.columns.map(e=>(0,t.jsxs)("option",{value:e.name,children:[e.name," (",e.type,")"]},e.name))})]}),"KPI"!==q.config.chartType&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Agrupar Por (Eje X)"}),(0,t.jsx)("select",{className:"select",value:q.config.groupColumn,onChange:e=>K(q.id,{groupColumn:e.target.value}),children:s.find(e=>e.id===q.config.datasetId)?.columns.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.name))})]})]}):(0,t.jsxs)("div",{className:"text-center text-slate-400 py-10",children:[(0,t.jsx)("p",{className:"text-sm",children:"Selecciona un componente del canvas para editar sus propiedades."}),(0,t.jsxs)("button",{onClick:()=>U(h.sections[0]?.id||"sec-1"),className:"mt-4 btn btn-primary w-full justify-center",children:[(0,t.jsx)(l.Plus,{weight:"bold"})," Añadir Componente"]})]})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 bg-gradient-to-br from-slate-50 to-slate-100 canvas-print-area print:p-0 print:bg-white relative",onClick:()=>g(null),children:[B&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),z(!1)},className:"fixed left-4 top-20 z-30 bg-white border border-slate-200 shadow-xl p-2 rounded-full text-purple-600 hover:bg-purple-50 transition-all animate-bounceIn no-print",title:"Expandir Editor",children:(0,t.jsx)(Z.CaretRight,{size:20,weight:"bold"})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:h.title}),h.description&&(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:h.description})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("span",{className:"badge flex gap-1 items-center bg-white border border-slate-200 shadow-sm",children:["PRIVATE"===h.access?(0,t.jsx)(v.Lock,{size:12}):"SHARED"===h.access?(0,t.jsx)(N.Users,{size:12}):(0,t.jsx)(j.Globe,{size:12}),h.access]})})]}),(()=>{let e=h.sections[0]?.widgets[0]?.config?.datasetId,a=s.find(t=>t.id===e);if(!a)return null;let l=a.columns.filter(e=>"STRING"===e.type).slice(0,3);return(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[(0,t.jsx)(E.Funnel,{size:16,className:"text-purple-600"}),"Filtros:"]}),l.map((e,s)=>{let l=(e=>{if("PROJECTS"===a.sourceType&&r.projects){let t=new Set,s={COMPLETED:"Completado",IN_PROGRESS:"En Proceso",NOT_STARTED:"Sin Iniciar"};return(a._filterFolderId?r.projects.filter(e=>e.folderId===a._filterFolderId):r.projects).forEach(a=>{"Proyecto"===e&&t.add(a.title),"Estado"===e&&t.add(s[a.status]||a.status),"Folder"===e&&t.add(a.folderId),a.phases?.forEach(a=>{"Fase"===e&&t.add(a.name),"Estado Fase"===e&&t.add(s[a.status]||a.status),a.activities?.forEach(a=>{"Actividad"===e&&t.add(a.name),"Estado Actividad"===e&&t.add(s[a.status]||a.status),"Responsable"===e&&a.participants?.forEach(e=>{let a="string"==typeof e?e:e.userId||e.id,s=r.users.find(e=>e.id===a);t.add(s?s.name:a)})})})}),Array.from(t).filter(Boolean)}if("UPLOAD"===a.sourceType&&a._data){let t=new Set;return a._data.forEach(a=>{a[e]&&t.add(String(a[e]))}),Array.from(t).filter(Boolean)}return[]})(e.name),i=`filter_${s}`;return(0,t.jsxs)("select",{value:p[i]||"all",onChange:e=>u({...p,[i]:e.target.value}),className:"text-xs px-3 py-1.5 rounded-lg border border-slate-200 bg-white hover:border-purple-300 focus:ring-2 focus:ring-purple-500 outline-none transition-all",children:[(0,t.jsxs)("option",{value:"all",children:["Todos (",e.name,")"]}),l.map((e,a)=>(0,t.jsx)("option",{value:String(e),children:String(e)},`${e}-${a}`))]},e.name)}),Object.values(p).some(e=>"all"!==e)&&(0,t.jsxs)("button",{onClick:()=>u({}),className:"text-xs text-purple-600 hover:text-purple-700 font-medium ml-auto flex items-center gap-1",children:[(0,t.jsx)(x.X,{size:14})," Limpiar filtros"]})]})})})(),(0,t.jsxs)("div",{className:"space-y-12 pb-20 mt-8",children:[h.sections.map(e=>(0,t.jsxs)("div",{className:"space-y-4",onDragOver:t=>0===e.widgets.length&&t.preventDefault(),onDrop:t=>0===e.widgets.length&&Y(t,"",e.id),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-1.5 h-6 bg-purple-600 rounded-full shadow-sm shadow-purple-200"}),(0,t.jsx)("input",{value:e.title,onChange:t=>{var a,s;return a=e.id,s=t.target.value,void b({...h,sections:h.sections.map(e=>e.id===a?{...e,title:s}:e)})},className:"text-lg font-bold text-slate-800 bg-transparent border-none focus:ring-0 p-0 w-64 placeholder:text-slate-300",placeholder:"Título de la Sección"}),(0,t.jsx)("div",{className:"flex items-center bg-slate-100 p-0.5 rounded-lg ml-2",children:[1,2,3].map(a=>(0,t.jsxs)("button",{onClick:()=>{var t;return t=e.id,void b({...h,sections:h.sections.map(e=>e.id===t?{...e,columns:a}:e)})},className:`px-2 py-0.5 text-[10px] font-bold rounded-md transition-all ${(e.columns||3)===a?"bg-white text-purple-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[a," ",1===a?"Col":"Cols"]},a))}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void b({...h,sections:h.sections.filter(e=>e.id!==t)})},className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg opacity-0 group-hover:opacity-100 transition-all focus:opacity-100",title:"Eliminar Sección",children:(0,t.jsx)(w.Trash,{size:18})})]}),(0,t.jsxs)("button",{onClick:()=>U(e.id),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold text-purple-600 hover:bg-purple-50 rounded-lg transition-colors border border-transparent hover:border-purple-100",children:[(0,t.jsx)(l.Plus,{size:16,weight:"bold"})," Añadir Visualización"]})]}),(0,t.jsxs)("div",{className:`grid gap-6 ${1===(e.columns||3)?"grid-cols-1":2===(e.columns||3)?"grid-cols-1 md:grid-cols-2":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:[e.widgets.map(e=>{let a,l,i,o,d,c,x=s.find(t=>t.id===e.config.datasetId),m=x?J(e.config,x,r,p):null;return(0,t.jsxs)("div",{draggable:!0,onDragStart:t=>{var a;T(a=e.id),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",a)},onDragOver:t=>{var a;return a=e.id,void(t.preventDefault(),t.dataTransfer.dropEffect="move",L(a))},onDragLeave:W,onDrop:t=>Y(t,e.id),onClick:t=>{t.stopPropagation(),g(e.id)},className:`bg-white rounded-2xl shadow-sm border-2 transition-all relative group flex flex-col overflow-hidden h-[380px] ${f===e.id?"border-purple-500 ring-4 ring-purple-50 shadow-md":"border-transparent hover:border-slate-200"} ${A===e.id?"opacity-40 grayscale scale-95":""} ${S===e.id?"border-purple-400 border-dashed scale-[1.03] bg-purple-50/50":""}`,children:[(0,t.jsxs)("div",{className:"p-4 border-b border-slate-50 flex items-center justify-between bg-white/80 backdrop-blur-sm sticky top-0 z-10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden flex-1",children:[(0,t.jsx)("div",{className:"cursor-move text-slate-300 hover:text-slate-500 transition-colors p-1 rounded hover:bg-slate-50",children:(0,t.jsx)(I,{size:16,weight:"bold"})}),(0,t.jsx)("span",{className:"font-bold text-slate-700 text-sm truncate",children:e.title})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),k(e.id)},className:"p-1.5 text-slate-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Maximizar",children:(0,t.jsx)(R,{size:14,weight:"bold"})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),((e,t)=>{if(!t)return;if("MATRIX"===t.type){let a=["Proyecto","Progreso Total",...Array.from({length:t.maxPhases},(e,t)=>`Fase ${t+1}`)],s=new Blob([`
                <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
                <head>
                    <meta charset="utf-8">
                    <style>
                        table { border-collapse: collapse; font-family: sans-serif; }
                        th { background-color: #7c3aed; color: white; border: 1px solid #ddd; padding: 10px; }
                        td { border: 1px solid #ddd; padding: 10px; text-align: center; font-size: 12px; }
                        .project-cell { text-align: left; font-weight: bold; background-color: #f8fafc; }
                        .progress-high { background-color: #10b981; color: white; }
                        .progress-mid { background-color: #8b5cf6; color: white; }
                        .progress-low { background-color: #f1f5f9; color: #64748b; }
                        .team { font-size: 10px; color: #475569; display: block; margin-top: 4px; }
                    </style>
                </head>
                <body>
                    <table>
                        <thead>
                            <tr>${a.map(e=>`<th>${e}</th>`).join("")}</tr>
                        </thead>
                        <tbody>
                            ${t.rows.map(e=>`
                                <tr>
                                    <td class="project-cell">${e.project}</td>
                                    <td>${e.progress}%</td>
                                    ${Array.from({length:t.maxPhases},(t,a)=>{let s=e.phases[a];if(!s)return"<td>-</td>";let l=s.progress>=80?"progress-high":s.progress>=20?"progress-mid":"progress-low";return`<td class="${l}">
                                            <div><strong>${s.name}</strong></div>
                                            <div>${s.progress}%</div>
                                            <div class="team">${s.team||""}</div>
                                        </td>`}).join("")}
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </body>
                </html>
            `.replace(/>\s+</g,"><")],{type:"application/vnd.ms-excel"}),l=URL.createObjectURL(s),r=document.body.appendChild(document.createElement("a"));r.href=l,r.download=`${e.title}.xls`,r.click(),document.body.removeChild(r);return}let a="data:text/csv;charset=utf-8,";a+="\uFEFF",t.labels&&t.data?(a+="Etiqueta,Valor\n",t.labels.forEach((e,s)=>{a+=`"${e}",${t.data[s]}
`})):t.value&&(a+=`KPI,Valor
"${t.label}","${t.value}"
`);let s=encodeURI(a),l=document.body.appendChild(document.createElement("a"));l.href=s,l.download=`${e.title}.csv`,l.click(),document.body.removeChild(l)})(e,m)},className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Exportar CSV",children:(0,t.jsx)(y.DownloadSimple,{size:14,weight:"bold"})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),X(e.id)},className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar",children:(0,t.jsx)(w.Trash,{size:14,weight:"bold"})})]})]}),(0,t.jsxs)("div",{className:"flex-1 p-4 overflow-hidden flex flex-col relative",children:[m?(0,t.jsxs)(t.Fragment,{children:["KPI"===e.config.chartType&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center animate-fadeIn",children:[(0,t.jsx)("div",{className:"text-5xl font-black text-slate-900 mb-2 drop-shadow-sm",children:m.value}),(0,t.jsx)("div",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold bg-slate-100 px-2 py-1 rounded-full",children:m.label})]}),"BAR"===e.config.chartType&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col pt-2",children:[(0,t.jsx)("div",{className:"flex-1 flex items-end gap-2 px-2 pb-2 w-full min-h-[150px]",children:m.labels.map((e,a)=>{let s=Math.max(...m.data,1),l=m.data[a]/s*100;return(0,t.jsx)("div",{className:"flex-1 flex flex-col items-center group/bar relative h-full justify-end",children:(0,t.jsx)("div",{className:"w-full bg-gradient-to-t from-purple-600 to-purple-400 rounded-t-lg transition-all duration-500 group-hover/bar:from-purple-500 group-hover/bar:to-purple-300 shadow-sm relative min-h-[2px]",style:{height:`${Math.max(l,2)}%`},children:(0,t.jsx)("div",{className:"absolute -top-7 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[9px] px-1.5 py-0.5 rounded opacity-0 group-hover/bar:opacity-100 transition-opacity whitespace-nowrap z-20 shadow-xl font-bold",children:m.data[a]})})},a)})}),(0,t.jsx)("div",{className:"flex justify-between gap-1 px-1 border-t border-slate-50 pt-2",children:m.labels.map((e,a)=>(0,t.jsx)("span",{className:"flex-1 text-[8px] text-slate-400 truncate text-center font-bold",title:e,children:e.substring(0,8)},a))})]}),"PIE"===e.config.chartType&&(0,t.jsxs)("div",{className:"flex-1 flex items-center justify-center gap-6 p-4",children:[(0,t.jsx)("div",{className:"relative w-36 h-36 flex-shrink-0",children:(0,t.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-full h-full -rotate-90 filter drop-shadow-md",children:[m.data.reduce((e,a,s)=>{let l=m.data.reduce((e,t)=>e+t,0),r=e.totalPercent,i=a/l*100;e.totalPercent+=i;let n=50+40*Math.cos(2*Math.PI*r/100),o=50+40*Math.sin(2*Math.PI*r/100),d=50+40*Math.cos(2*Math.PI*e.totalPercent/100),c=50+40*Math.sin(2*Math.PI*e.totalPercent/100),p=`M 50 50 L ${n} ${o} A 40 40 0 ${+(i>50)} 1 ${d} ${c} Z`;return e.paths.push((0,t.jsx)("path",{d:p,fill:["#8b5cf6","#ec4899","#3b82f6","#10b981","#f59e0b","#ef4444"][s%6],className:"hover:opacity-80 transition-opacity cursor-pointer group/pie",children:(0,t.jsxs)("title",{children:[m.labels[s],": ",a," (",Math.round(i),"%)"]})},s)),e},{totalPercent:0,paths:[]}).paths,(0,t.jsx)("circle",{cx:"50",cy:"50",r:"20",fill:"white"})]})}),(0,t.jsx)("div",{className:"flex flex-col gap-1.5 flex-1 min-w-0 max-h-[200px] overflow-y-auto pr-2 custom-scrollbar",children:m.labels.map((e,a)=>{let s=m.data.reduce((e,t)=>e+t,0),l=Math.round(m.data[a]/s*100);return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 group/row",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full flex-shrink-0 shadow-sm",style:{backgroundColor:["#8b5cf6","#ec4899","#3b82f6","#10b981","#f59e0b","#ef4444"][a%6]}}),(0,t.jsx)("span",{className:"text-[10px] text-slate-600 font-medium truncate",children:e})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[(0,t.jsxs)("span",{className:"text-[10px] font-bold text-slate-900",children:[l,"%"]}),(0,t.jsxs)("span",{className:"text-[8px] text-slate-400",children:["(",m.data[a],")"]})]})]},a)})})]}),"RADAR"===e.config.chartType&&(0,t.jsx)("div",{className:"flex items-center justify-center p-2 flex-1 overflow-hidden",children:(0,t.jsxs)("svg",{viewBox:"-120 -120 240 240",className:"w-full h-full max-w-[280px] max-h-[280px]",children:[[20,40,60,80,100].map(e=>(0,t.jsx)("circle",{cx:"0",cy:"0",r:e,fill:"none",stroke:"#e2e8f0",strokeWidth:"0.5"},e)),m.labels.map((e,a)=>{let s=2*Math.PI*a/m.labels.length,l=100*Math.cos(s-Math.PI/2),r=100*Math.sin(s-Math.PI/2);return(0,t.jsx)("line",{x1:"0",y1:"0",x2:l,y2:r,stroke:"#cbd5e1",strokeWidth:"0.5"},a)}),(0,t.jsx)("polygon",{points:m.labels.map((e,t)=>{let a=(m.data[t]||0)/100*100,s=2*Math.PI*t/m.labels.length,l=Math.cos(s-Math.PI/2)*a,r=Math.sin(s-Math.PI/2)*a;return`${l},${r}`}).join(" "),fill:"rgba(139, 92, 246, 0.15)",stroke:"#8b5cf6",strokeWidth:"2.5"}),m.labels.map((e,a)=>{let s=2*Math.PI*a/m.labels.length,l=115*Math.cos(s-Math.PI/2),r=115*Math.sin(s-Math.PI/2),i=e.length>12?e.substring(0,10)+"...":e;return(0,t.jsx)("text",{x:l,y:r,textAnchor:"middle",dominantBaseline:"middle",fill:"#475569",fontSize:"8",fontWeight:"600",children:i},a)})]})}),"LINE"===e.config.chartType&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col pt-4 px-2",children:[(0,t.jsx)("div",{className:"flex-1 w-full relative h-[180px]",children:(0,t.jsx)("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full overflow-visible",children:(a=Math.max(...m.data,1),l=100/(m.data.length-1||1),i=m.data.map((e,t)=>`${t*l},${100-e/a*100}`).join(" "),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("polyline",{points:i,fill:"none",stroke:"#8b5cf6",strokeWidth:"2.5",vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm"}),(0,t.jsx)("path",{d:`M ${i} L 100,100 L 0,100 Z`,fill:"url(#lineGradient)"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"lineGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#8b5cf6",stopOpacity:"0.1"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#8b5cf6",stopOpacity:"0"})]})})]}))})}),(0,t.jsx)("div",{className:"flex justify-between px-1 text-[8px] text-slate-400 font-bold uppercase tracking-wider mt-4",children:m.labels.map((e,a)=>(0,t.jsx)("span",{className:"truncate w-8 text-center",children:e.substring(0,3)},a))})]}),"MATRIX"===e.config.chartType&&m?.type==="MATRIX"&&(0,t.jsx)("div",{className:"flex-1 overflow-auto rounded-lg border border-slate-100 bg-slate-50/50 custom-scrollbar",children:(0,t.jsxs)("table",{className:"w-full text-left text-[10px] border-collapse min-w-[600px]",children:[(0,t.jsx)("thead",{className:"bg-white sticky top-0 z-10 border-b shadow-sm",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-3 font-bold text-slate-700 bg-white min-w-[140px] sticky left-0 z-20 border-r",children:"Proyecto"}),(0,t.jsx)("th",{className:"p-3 font-bold text-slate-700 text-center bg-white border-r",children:"Progreso Total"}),Array.from({length:m.maxPhases||0}).map((e,a)=>(0,t.jsxs)("th",{className:"p-3 font-bold text-slate-700 text-center bg-white border-r min-w-[120px]",children:["Fase ",a+1]},a))]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-100",children:m.rows.map(e=>(0,t.jsxs)("tr",{className:"bg-white hover:bg-slate-50 transition-colors",children:[(0,t.jsx)("td",{className:"p-3 font-bold text-slate-800 sticky left-0 bg-inherit z-10 border-r shadow-[2px_0_5px_rgba(0,0,0,0.02)]",children:e.project}),(0,t.jsx)("td",{className:"p-3 text-center border-r",children:(0,t.jsx)("div",{className:"flex items-center gap-1 justify-center",children:(0,t.jsxs)("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-black ${100===e.progress?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:[e.progress,"%"]})})}),Array.from({length:m.maxPhases||0}).map((a,s)=>{let l=e.phases?.[s];return l?(0,t.jsx)("td",{className:"p-3 border-r",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-[8px] font-bold uppercase truncate",title:l.name,children:[(0,t.jsx)("span",{className:"truncate max-w-[80px]",children:l.name}),(0,t.jsxs)("span",{className:100===l.progress?"text-green-600":"text-purple-600",children:[l.progress,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-slate-100 h-1.5 rounded-full overflow-hidden shadow-inner",children:(0,t.jsx)("div",{className:`h-full transition-all duration-700 ${100===l.progress?"bg-green-500":"bg-purple-500"}`,style:{width:`${l.progress}%`}})}),l.team&&(0,t.jsxs)("div",{className:"text-[7px] text-slate-400 truncate mt-0.5 italic",title:l.team,children:["Ref: ",l.team]})]})},s):(0,t.jsx)("td",{className:"p-3 text-center bg-slate-50/30 border-r text-slate-300",children:"-"},s)})]},e.id))})]})}),"GANTT"===e.config.chartType&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col p-2 space-y-3",children:[m.tasks.map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-[8px] font-bold text-slate-500 uppercase px-1",children:[(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:e.name}),(0,t.jsxs)("span",{className:"text-slate-400",children:["Progreso: ",e.progress,"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-[7px] text-slate-300 w-8",children:["Dic ",2*a+1]}),(0,t.jsx)("div",{className:"flex-1 h-3 bg-slate-100 rounded-md overflow-hidden relative shadow-inner border border-slate-200/50",children:(0,t.jsx)("div",{className:`h-full absolute left-0 ${"COMPLETED"===e.status?"bg-green-500":"IN_PROGRESS"===e.status?"bg-purple-500":"bg-slate-300"} shadow-lg rounded-r-md transition-all duration-1000`,style:{width:`${Math.max(e.progress,15)}%`,marginLeft:`${10*a}%`},children:(0,t.jsx)("div",{className:"w-full h-full bg-white/20 animate-pulse"})})}),(0,t.jsxs)("span",{className:"text-[7px] text-slate-300 w-8",children:["Ene ",2*a+5]})]})]},a)),(0,t.jsxs)("div",{className:"flex justify-between px-10 text-[7px] font-black text-slate-300 border-t border-slate-100 pt-2",children:[(0,t.jsx)("span",{children:"SEMANA 1"}),(0,t.jsx)("span",{children:"SEMANA 2"}),(0,t.jsx)("span",{children:"SEMANA 3"}),(0,t.jsx)("span",{children:"SEMANA 4"})]})]}),"BAR_STACKED"===e.config.chartType&&m?.type==="STACKED"&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col px-2 pt-4",children:[(0,t.jsx)("div",{className:"flex-1 flex items-end gap-3 pb-6 border-b border-slate-100",children:m.labels.map((e,a)=>{let s=m.series.reduce((e,t)=>e+t.data[a],0),l=Math.max(...m.labels.map((e,t)=>m.series.reduce((e,a)=>e+a.data[t],0)),1);return(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center group/stacked relative",children:[(0,t.jsx)("div",{className:"w-full flex flex-col-reverse rounded-t-lg overflow-hidden shadow-sm",style:{height:`${100/l*s}%`},children:m.series.map((e,l)=>{let r=e.data[a];return 0===r?null:(0,t.jsx)("div",{className:"w-full hover:brightness-110 transition-all cursor-pointer",style:{height:`${r/s*100}%`,backgroundColor:["#e2e8f0","#8b5cf6","#10b981","#f59e0b"][l%4]},title:`${e.name}: ${r}`},l)})}),(0,t.jsx)("span",{className:"text-[8px] text-slate-400 mt-2 truncate w-full text-center font-bold",children:e.substring(0,5)})]},a)})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:m.series.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:["#e2e8f0","#8b5cf6","#10b981","#f59e0b"][a%4]}}),(0,t.jsx)("span",{className:"text-[7px] font-bold text-slate-400 uppercase",children:e.name})]},a))})]}),"FUNNEL"===e.config.chartType&&(0,t.jsx)("div",{className:"flex-1 flex flex-col justify-center space-y-2 px-6",children:(d=Math.max(...(o=["Sin Iniciar","En Proceso","Completado"].map(e=>{let t=m.labels.findIndex(t=>t.includes(e)||"Sin Iniciar"===e&&t.includes("NOT_STARTED")||"En Proceso"===e&&t.includes("IN_PROGRESS")||"Completado"===e&&t.includes("COMPLETED"));return{label:e,value:t>=0?m.data[t]:0}})).map(e=>e.value),1),c=["bg-slate-300","bg-purple-400","bg-purple-600"],o.map((e,a)=>{let s=e.value/d*100;return(0,t.jsx)("div",{className:"w-full flex flex-col items-center",children:(0,t.jsxs)("div",{className:`h-8 ${c[a]} rounded-xl flex items-center justify-between px-4 text-white text-[10px] font-bold shadow-sm transition-all hover:scale-[1.02] cursor-pointer`,style:{width:`${Math.max(s,30)}%`},children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)("span",{className:"bg-white/20 px-1.5 py-0.5 rounded-lg ml-2",children:e.value})]})},a)}))})]}):(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-300 text-center p-8 space-y-3",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-slate-50 flex items-center justify-center border border-slate-100 border-dashed",children:(0,t.jsx)(n.ChartBar,{size:32,weight:"thin"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-bold text-slate-500",children:"Sin Visualización"}),(0,t.jsx)("p",{className:"text-[10px] mt-1 text-slate-400",children:"Selecciona datos válidos para generar el gráfico"})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 flex items-center gap-1.5 bg-slate-50/80 backdrop-blur-sm px-2 py-1 rounded-full border border-slate-100 z-0",children:[(0,t.jsx)("div",{className:`w-1.5 h-1.5 rounded-full ${x?.sourceType==="UPLOAD"?"bg-green-500":"bg-blue-500"}`}),(0,t.jsx)("span",{className:"text-[8px] font-bold text-slate-400 uppercase tracking-tighter",children:x?.sourceType})]})]})]},e.id)}),0===e.widgets.length&&(0,t.jsxs)("div",{className:"col-span-full border-2 border-dashed border-slate-200 rounded-3xl h-48 flex flex-col items-center justify-center text-slate-400 bg-slate-50/30 group/empty hover:bg-slate-50 hover:border-purple-200 transition-all cursor-pointer",onClick:()=>U(e.id),children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-white shadow-sm flex items-center justify-center mb-3 group-hover/empty:scale-110 transition-transform",children:(0,t.jsx)(l.Plus,{size:24,className:"text-slate-300 group-hover/empty:text-purple-500"})}),(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-500",children:"Sección Vacía"}),(0,t.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Haz clic para añadir tu primera visualización"})]})]})]},e.id)),(0,t.jsxs)("div",{className:"flex justify-center pt-12 items-center gap-4",children:[(0,t.jsx)("div",{className:"h-[1px] bg-slate-200 flex-1"}),(0,t.jsxs)("button",{onClick:()=>{let e={id:`SEC-${Date.now()}`,title:"NUEVA SECCIÓN",widgets:[]};b({...h,sections:[...h.sections,e]})},className:"flex items-center gap-2 px-8 py-4 bg-white border-2 border-dashed border-slate-300 text-slate-500 rounded-2xl hover:border-purple-400 hover:text-purple-600 hover:bg-purple-50 hover:shadow-xl hover:shadow-purple-500/5 transition-all font-bold text-sm group",children:[(0,t.jsx)(V.PlusCircle,{size:24,weight:"bold",className:"group-hover:rotate-90 transition-transform duration-300"}),"Añadir Nueva Sección de Análisis"]}),(0,t.jsx)("div",{className:"h-[1px] bg-slate-200 flex-1"})]})]})]})]}),D&&(0,t.jsx)(es,{dashboard:h,onClose:()=>G(!1),users:r.users}),P&&(()=>{let e=h.sections.flatMap(e=>e.widgets).find(e=>e.id===P);if(!e)return null;let a=s.find(t=>t.id===e.config.datasetId),l=a?J(e.config,a,r,p):null;return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-8",onClick:()=>k(null),children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:e.title}),(0,t.jsx)("button",{onClick:()=>k(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Cerrar",children:(0,t.jsx)(M,{size:24,className:"text-slate-600"})})]}),(0,t.jsx)("div",{className:"flex-1 p-8 overflow-auto",children:l?(0,t.jsxs)("div",{className:"h-full flex items-center justify-center",children:["KPI"===e.config.chartType&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-8xl font-black text-slate-900 mb-4",children:l.value}),(0,t.jsx)("div",{className:"text-2xl text-slate-500 uppercase tracking-wider",children:l.label})]}),"MATRIX"===e.config.chartType&&l?.type==="MATRIX"&&(0,t.jsx)("div",{className:"w-full h-full flex flex-col p-4",children:(0,t.jsx)("div",{className:"overflow-auto rounded-xl border border-slate-200 bg-white shadow-xl",children:(0,t.jsxs)("table",{className:"w-full text-left text-sm border-collapse",children:[(0,t.jsx)("thead",{className:"bg-slate-50 sticky top-0 z-10 border-b group",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-5 font-bold text-slate-900 bg-slate-50 min-w-[200px] sticky left-0 z-20 border-r",children:"Nombre del Proyecto"}),(0,t.jsx)("th",{className:"p-5 font-bold text-slate-900 text-center bg-slate-50 border-r min-w-[120px]",children:"Salud Total"}),Array.from({length:l.maxPhases||0}).map((e,a)=>(0,t.jsxs)("th",{className:"p-5 font-bold text-slate-900 text-center bg-slate-50 border-r min-w-[180px]",children:["Fase ",a+1]},a))]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-100",children:l.rows.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[(0,t.jsx)("td",{className:"p-5 font-bold text-slate-900 sticky left-0 bg-white group-hover:bg-slate-50 z-10 border-r shadow-md",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),e.project]})}),(0,t.jsx)("td",{className:"p-5 border-r",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex justify-between font-black text-xs",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"AVANCE"}),(0,t.jsxs)("span",{className:"text-purple-600",children:[e.progress,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-slate-100 h-2 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full ${100===e.progress?"bg-green-500":"bg-purple-600"} shadow-lg`,style:{width:`${e.progress}%`}})})]})}),Array.from({length:l.maxPhases||0}).map((a,s)=>{let l=e.phases?.[s];return l?(0,t.jsx)("td",{className:"p-5 border-r",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:["FASE ",s+1]}),(0,t.jsx)("span",{className:"font-bold text-slate-800 text-xs truncate max-w-[150px]",title:l.name,children:l.name}),l.team&&(0,t.jsxs)("span",{className:"text-[9px] text-slate-500 italic mt-0.5 truncate max-w-[150px]",title:l.team,children:["Responsable: ",l.team]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex-1 bg-slate-100 h-2 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full transition-all duration-1000 ${100===l.progress?"bg-green-500":"bg-purple-500"}`,style:{width:`${l.progress}%`}})}),(0,t.jsxs)("span",{className:"text-xs font-bold text-slate-600 w-10 text-right",children:[l.progress,"%"]})]})]})},s):(0,t.jsx)("td",{className:"p-5 text-center bg-slate-50/20 border-r text-slate-300",children:"-"},s)})]},e.id))})]})})}),"KPI"!==e.config.chartType&&"MATRIX"!==e.config.chartType&&(0,t.jsx)("div",{className:"w-full h-full bg-slate-50 rounded-xl flex items-center justify-center text-slate-400",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(c.PresentationChart,{size:64,className:"mx-auto mb-4"}),(0,t.jsxs)("p",{className:"text-lg",children:["Vista maximizada para ",e.config.chartType]}),(0,t.jsx)("p",{className:"text-sm mt-2",children:"Visualización ampliada en desarrollo."})]})})]}):(0,t.jsx)("div",{className:"h-full flex items-center justify-center text-slate-400",children:(0,t.jsx)("p",{children:"No hay datos disponibles para esta vista."})})})]})})})()]})}function q({datasets:e,onNormalize:a}){return(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,t.jsx)("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b border-slate-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-4 pl-6",children:"Nombre"}),(0,t.jsx)("th",{className:"p-4",children:"Origen"}),(0,t.jsx)("th",{className:"p-4",children:"Filas"}),(0,t.jsx)("th",{className:"p-4",children:"Acceso"}),(0,t.jsx)("th",{className:"p-4",children:"Actualizado"}),(0,t.jsx)("th",{className:"p-4 text-right pr-6",children:"Acciones"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-100",children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-slate-50 group",children:[(0,t.jsxs)("td",{className:"p-4 pl-6 font-bold text-slate-800 flex items-center gap-3",children:[(0,t.jsx)("span",{className:`p-1.5 rounded ${"UPLOAD"===e.sourceType?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:"UPLOAD"===e.sourceType?(0,t.jsx)(o.FileCsv,{}):(0,t.jsx)(p.Kanban,{})}),e.title]}),(0,t.jsx)("td",{className:"p-4 text-slate-600",children:(0,t.jsx)("span",{className:"badge border border-slate-200",children:e.sourceType})}),(0,t.jsx)("td",{className:"p-4 text-slate-600",children:e.rows}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("span",{className:`text-xs px-2 py-1 rounded-full font-bold flex w-fit items-center gap-1 ${"PRIVATE"===e.access?"bg-slate-100 text-slate-600":"bg-blue-50 text-blue-600"}`,children:["PRIVATE"===e.access?(0,t.jsx)(v.Lock,{size:10}):(0,t.jsx)(j.Globe,{size:10})," ",e.access]})}),(0,t.jsx)("td",{className:"p-4 text-slate-400 text-xs",children:e.updatedAt}),(0,t.jsx)("td",{className:"p-4 text-right pr-6",children:(0,t.jsxs)("button",{onClick:()=>a(e),className:"p-2 hover:bg-purple-100 text-purple-600 rounded-lg transition-colors flex items-center gap-2 font-bold text-xs",title:"Normalizar Datos",children:[(0,t.jsx)(b,{size:16,weight:"fill"}),"Normalizar"]})})]},e.id))})]})})}function Q({dashboard:e,onClick:a,onDelete:s,onEdit:l,onShare:r}){return(0,t.jsxs)("div",{onClick:a,className:"bg-white border border-slate-200 p-5 rounded-xl hover:shadow-lg hover:border-purple-200 cursor-pointer transition-all group relative",children:[(0,t.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1 z-10 opacity-0 group-hover:opacity-100 transition-all",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),r()},className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Compartir",children:(0,t.jsx)(i.ShareNetwork,{size:16})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),l()},className:"p-1.5 text-slate-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all",title:"Propiedades",children:(0,t.jsx)(g.Gear,{size:16})}),s&&(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),confirm(`\xbfEst\xe1s seguro de eliminar el tablero "${e.title}"?

Esta acci\xf3n no se puede deshacer.`)&&s(e.id)},className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Eliminar",children:(0,t.jsx)(w.Trash,{size:16})})]}),(0,t.jsxs)("div",{className:"aspect-video bg-slate-50 rounded-lg mb-4 flex items-center justify-center border border-slate-100 group-hover:bg-purple-50 transition-colors relative overflow-hidden",children:[(0,t.jsx)(n.ChartBar,{size:32,className:"text-slate-300 group-hover:text-purple-400"}),e.isAuto&&(0,t.jsxs)("div",{className:"absolute top-0 left-0 bg-purple-600 text-white text-[9px] font-black px-2 py-1 uppercase tracking-tighter flex items-center gap-1",children:[(0,t.jsx)(b,{size:10,weight:"fill"}),"Autogenerado"]})]}),(0,t.jsx)("h3",{className:"font-bold text-slate-800 mb-1",children:e.title}),(e.unit||e.process)&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1.5 mt-2 mb-2",children:[e.unit&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-purple-50 border border-purple-200 text-purple-700 rounded text-[10px] font-bold uppercase",children:e.unit}),e.process&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-blue-50 border border-blue-200 text-blue-700 rounded text-[10px] font-semibold",children:e.process}),!e.unit&&!e.process&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-slate-50 border border-slate-200 text-slate-500 rounded text-[10px] font-bold uppercase",children:"GLOBAL"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs text-slate-400 mt-3",children:[(0,t.jsx)("span",{children:e.updatedAt}),(0,t.jsx)("span",{className:`px-1.5 py-0.5 rounded border ${"PUBLIC_ORG"===e.access?"bg-blue-50 border-blue-100 text-blue-600":"bg-slate-50 border-slate-100"}`,children:e.access})]})]})}function ee({dashboard:e,onClose:s,onSave:l}){let{currentTenantId:r}=(0,F.useApp)(),[i,n]=(0,a.useState)(e.title),[o,d]=(0,a.useState)(e.description),[c,p]=(0,a.useState)(e.access),[m,u]=(0,a.useState)("GLOBAL"),[h,b]=(0,a.useState)(""),[f,g]=(0,a.useState)(e.process||"");(0,a.useEffect)(()=>{if(e.unit){let t=z.DB.units.find(t=>t.name===e.unit&&t.tenantId===r);if(t){if(1===t.depth)u(e.unit),b("");else if(2===t.depth){let a=z.DB.units.find(e=>e.id===t.parentId);a&&(u(a.name),b(e.unit))}}}},[e.unit,r]);let N=(0,a.useMemo)(()=>z.DB.units.filter(e=>e.tenantId===r&&"UNIT"===e.type&&1===e.depth).map(e=>e.name),[r]),w=(0,a.useMemo)(()=>{if("GLOBAL"===m||!m)return[];let e=z.DB.units.find(e=>e.tenantId===r&&"UNIT"===e.type&&e.name===m&&1===e.depth);return e?z.DB.units.filter(t=>t.tenantId===r&&"UNIT"===t.type&&t.parentId===e.id).map(e=>e.name):[]},[r,m]),y=(0,a.useMemo)(()=>{if("GLOBAL"===m)return[];let e=h||m;if(!e)return[];let t=z.DB.units.find(t=>t.tenantId===r&&t.name===e);return t?z.DB.units.filter(e=>e.tenantId===r&&"PROCESS"===e.type&&e.parentId===t.id).map(e=>e.name):[]},[r,m,h]);(0,a.useEffect)(()=>{b(""),g("")},[m]),(0,a.useEffect)(()=>{g("")},[h]);let A="GLOBAL"===m||"GLOBAL"!==m&&f;return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fadeIn",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-md animate-scaleIn max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"font-bold text-lg",children:"Propiedades del Tablero"}),(0,t.jsx)("button",{onClick:s,className:"p-1 hover:bg-slate-100 rounded-full",children:(0,t.jsx)(x.X,{size:20})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Título"}),(0,t.jsx)("input",{className:"input",value:i,onChange:e=>n(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Descripción"}),(0,t.jsx)("textarea",{className:"input h-24 resize-none",value:o,onChange:e=>d(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Área"}),(0,t.jsxs)("select",{className:"w-full text-sm bg-white border border-slate-200 rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",value:m,onChange:e=>u(e.target.value),children:[(0,t.jsx)("option",{value:"GLOBAL",children:"Global (Toda la Organización)"}),N.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),"GLOBAL"!==m&&w.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Subárea (Opcional)"}),(0,t.jsxs)("select",{className:"w-full text-sm bg-white border border-slate-200 rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",value:h,onChange:e=>b(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"-- Sin Subárea --"}),w.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),"GLOBAL"!==m&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Proceso *"}),(0,t.jsxs)("select",{className:"w-full text-sm bg-white border border-slate-200 rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",value:f,onChange:e=>g(e.target.value),disabled:0===y.length,children:[(0,t.jsx)("option",{value:"",children:"-- Seleccionar Proceso --"}),y.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),0===y.length&&(0,t.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:h?"No hay procesos disponibles para esta subárea":"Selecciona una subárea o el área tendrá procesos directos"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Visibilidad"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("button",{onClick:()=>p("PRIVATE"),className:`flex items-center gap-2 p-3 border rounded-xl text-xs font-bold transition-all ${"PRIVATE"===c?"bg-slate-100 border-slate-500 text-slate-900 shadow-inner":"bg-white border-slate-200 text-slate-400 hover:border-slate-300"}`,children:[(0,t.jsx)(v.Lock,{size:16})," Privado"]}),(0,t.jsxs)("button",{onClick:()=>p("PUBLIC_ORG"),className:`flex items-center gap-2 p-3 border rounded-xl text-xs font-bold transition-all ${"PUBLIC_ORG"===c?"bg-blue-50 border-blue-500 text-blue-700 shadow-inner":"bg-white border-slate-200 text-slate-400 hover:border-blue-300"}`,children:[(0,t.jsx)(j.Globe,{size:16})," Pública (Org)"]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-8",children:[(0,t.jsx)("button",{onClick:s,className:"btn-ghost text-slate-500 px-6",children:"Cancelar"}),(0,t.jsx)("button",{onClick:()=>{l({title:i,description:o,access:c,unit:h||("GLOBAL"!==m?m:void 0),process:f||void 0})},disabled:!A,className:"btn bg-purple-600 text-white px-8 h-10 shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:"Guardar Cambios"})]})]})})}function et({onClose:e,onCreate:s,folderDatasets:l}){let{currentTenantId:r}=(0,F.useApp)(),[i,n]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[p,m]=(0,a.useState)("PRIVATE"),[u,h]=(0,a.useState)(""),[f,g]=(0,a.useState)("GLOBAL"),[N,w]=(0,a.useState)(""),[y,A]=(0,a.useState)(""),C=(0,a.useMemo)(()=>z.DB.units.filter(e=>e.tenantId===r&&"UNIT"===e.type&&1===e.depth).map(e=>e.name),[r]),E=(0,a.useMemo)(()=>{if("GLOBAL"===f||!f)return[];let e=z.DB.units.find(e=>e.tenantId===r&&"UNIT"===e.type&&e.name===f&&1===e.depth);return e?z.DB.units.filter(t=>t.tenantId===r&&"UNIT"===t.type&&t.parentId===e.id).map(e=>e.name):[]},[r,f]),T=(0,a.useMemo)(()=>{if("GLOBAL"===f)return[];let e=N||f;if(!e)return[];let t=z.DB.units.find(t=>t.tenantId===r&&t.name===e);return t?z.DB.units.filter(e=>e.tenantId===r&&"PROCESS"===e.type&&e.parentId===t.id).map(e=>e.name):[]},[r,f,N]);(0,a.useEffect)(()=>{u||(w(""),A(""))},[f,u]),(0,a.useEffect)(()=>{u||A("")},[N,u]),(0,a.useEffect)(()=>{if(u){let e=l.find(e=>e.id===u);if(e){let t=e._filterFolderId,a=z.DB.projectFolders.find(e=>e.id===t);if(a){if(a.unit){let e=a.unit.split(" > ");e.length>0&&g(e[0]),e.length>1&&w(e[1])}a.process&&A(a.process),i||n(`Tablero Proyectos: ${a.name}`)}}}},[u,l]);let I=!!u,S=i.trim().length>0&&("GLOBAL"===f||y);return(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-2xl animate-scaleIn max-h-[95vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8 border-b border-slate-100 pb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"font-extrabold text-2xl text-slate-800 flex items-center gap-2",children:[(0,t.jsx)(c.PresentationChart,{className:"text-purple-600",weight:"fill"}),"Crear Nuevo Tablero"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Configura las propiedades y origen de datos de tu tablero."})]}),(0,t.jsx)("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-400",children:(0,t.jsx)(x.X,{size:24})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Información General"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)("input",{className:"input w-full font-bold text-lg",autoFocus:!0,value:i,onChange:e=>n(e.target.value),placeholder:"Título del Tablero"})}),(0,t.jsx)("div",{children:(0,t.jsx)("textarea",{className:"input w-full min-h-[100px] text-sm py-3",value:o,onChange:e=>d(e.target.value),placeholder:"Descripción o propósito del análisis..."})})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-purple-50 rounded-2xl border border-purple-100",children:[(0,t.jsxs)("label",{className:"text-[10px] font-black text-purple-800 uppercase tracking-widest mb-3 block flex items-center gap-2",children:[(0,t.jsx)(b,{size:14,weight:"fill"}),"Autogenerador desde Proyecto"]}),(0,t.jsxs)("select",{className:"w-full text-sm bg-white border border-purple-200 rounded-xl px-3 py-2.5 outline-none focus:ring-2 focus:ring-purple-500 shadow-sm",value:u,onChange:e=>h(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"-- No autogenerar --"}),l&&l.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title.replace("Carpeta: ","")},e.id))]}),(0,t.jsx)("p",{className:"text-[10px] text-purple-600 mt-2 italic px-1",children:I?"✓ Usando estructura de carpeta para Área/Proceso.":"Selecciona una carpeta para crear un tablero pre-configurado."})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 block",children:"Clasificación Org."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-[10px] text-slate-500 font-bold ml-1 uppercase",children:"Área"}),(0,t.jsxs)("select",{className:"w-full mt-1 text-sm bg-slate-50 border border-slate-200 rounded-xl px-3 py-2.5 outline-none focus:ring-2 focus:ring-purple-500",value:f,onChange:e=>g(e.target.value),disabled:I,children:[(0,t.jsx)("option",{value:"GLOBAL",children:"Global (Toda la Organización)"}),C.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),"GLOBAL"!==f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-[10px] text-slate-500 font-bold ml-1 uppercase",children:"Subárea"}),(0,t.jsxs)("select",{className:"w-full mt-1 text-sm bg-slate-50 border border-slate-200 rounded-xl px-3 py-2.5 outline-none focus:ring-2 focus:ring-purple-500",value:N,onChange:e=>w(e.target.value),disabled:I||0===E.length,children:[(0,t.jsx)("option",{value:"",children:"-- Sin Subárea --"}),E.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-[10px] text-slate-500 font-bold ml-1 uppercase",children:"Proceso *"}),(0,t.jsxs)("select",{className:"w-full mt-1 text-sm bg-slate-50 border border-slate-200 rounded-xl px-3 py-2.5 outline-none focus:ring-2 focus:ring-purple-500",value:y,onChange:e=>A(e.target.value),disabled:I||0===T.length,children:[(0,t.jsx)("option",{value:"",children:"-- Seleccionar Proceso --"}),T.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 block",children:"Visibilidad"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{id:"PRIVATE",label:"Privado",icon:v.Lock,desc:"Solo yo"},{id:"PUBLIC_ORG",label:"Organización",icon:j.Globe,desc:"Todo el tenant"}].map(e=>(0,t.jsxs)("button",{onClick:()=>m(e.id),className:`flex flex-col items-start gap-1 p-3 border-2 rounded-xl transition-all ${p===e.id?"border-purple-600 bg-purple-50 text-purple-700":"border-slate-100 bg-white text-slate-400 hover:border-slate-200"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e.icon,{size:16,weight:p===e.id?"fill":"bold"}),(0,t.jsx)("span",{className:"text-xs font-bold uppercase",children:e.label})]}),(0,t.jsx)("span",{className:"text-[10px] opacity-70",children:e.desc})]},e.id))})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-10 pt-6 border-t border-slate-100",children:[(0,t.jsx)("button",{onClick:e,className:"btn-ghost text-slate-500 px-6 font-bold",children:"Cancelar"}),(0,t.jsx)("button",{onClick:()=>{s(i,o,"PUBLIC_ORG"===p,u,N?`${f} > ${N}`:"GLOBAL"!==f?f:void 0,y)},disabled:!S,className:"btn bg-purple-600 text-white px-10 h-12 shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:cursor-not-allowed transform active:scale-95 transition-all font-bold",children:I?"Generar Tablero Maestro":"Crear Tablero Vacío"})]})]})})}function ea({onClose:e,onCreate:s}){let{currentTenantId:l}=(0,F.useApp)(),[i,n]=(0,a.useState)(""),[o,c]=(0,a.useState)("FILE"),[m,u]=(0,a.useState)(null),[h,b]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),v=(0,a.useMemo)(()=>z.DB.docs.filter(e=>e.tenantId===l&&e.title.toLowerCase().includes(h.toLowerCase())),[l,h]),N=(0,a.useMemo)(()=>z.DB.projects.filter(e=>e.tenantId===l&&e.title.toLowerCase().includes(h.toLowerCase())),[l,h]),w=[{id:"ST-01",name:"Amazon S3 (Data Lake Principal)",provider:"S3"},{id:"ST-02",name:"SharePoint: Reportes RRHH",provider:"SHAREPOINT"},{id:"ST-03",name:"Google Cloud Storage: Auditoría",provider:"GCS"}];return(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md animate-scaleIn max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"font-bold text-xl text-slate-800",children:"Nuevo Dataset"}),(0,t.jsx)("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-400",children:(0,t.jsx)(x.X,{size:20})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:"Nombre del Dataset (Opcional)"}),(0,t.jsx)("input",{className:"input w-full",value:i,onChange:e=>n(e.target.value),placeholder:"Ej: Análisis Trimestral"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:"Tipo de Origen"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{id:"FILE",label:"Cargar Archivo",icon:r.Upload},{id:"REPOSITORY",label:"Repositorio",icon:j.Globe},{id:"PROJECTS",label:"Proyectos",icon:p.Kanban},{id:"STORAGE",label:"Storage Org.",icon:d.Database}].map(e=>(0,t.jsxs)("button",{onClick:()=>{c(e.id),b(""),g("")},className:`flex flex-col items-center gap-2 p-4 border-2 rounded-2xl transition-all ${o===e.id?"border-blue-600 bg-blue-50 text-blue-700 shadow-inner":"border-slate-100 bg-white text-slate-400 hover:border-slate-200 hover:text-slate-600"}`,children:[(0,t.jsx)(e.icon,{size:24,weight:o===e.id?"fill":"bold"}),(0,t.jsx)("span",{className:"text-[10px] font-black uppercase tracking-tighter",children:e.label})]},e.id))})]}),"FILE"===o&&(0,t.jsxs)("div",{className:"p-6 border-2 border-dashed border-slate-200 rounded-2xl bg-slate-50 text-center animate-fadeIn",children:[(0,t.jsx)(r.Upload,{size:32,className:"mx-auto text-slate-300 mb-2"}),(0,t.jsx)("input",{type:"file",id:"file-upload",accept:".csv,.xls,.xlsx",onChange:e=>u(e.target.files?e.target.files[0]:null),className:"hidden"}),(0,t.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer block",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-blue-600 hover:underline",children:"Seleccionar archivo"}),(0,t.jsx)("p",{className:"text-[10px] text-slate-400 mt-1",children:"Excel (.xlsx, .xls) o CSV"})]}),m&&(0,t.jsx)("p",{className:"mt-3 text-xs font-bold text-slate-700 bg-white p-2 rounded border border-slate-100 shadow-sm truncate",children:m.name})]}),("REPOSITORY"===o||"PROJECTS"===o)&&(0,t.jsxs)("div",{className:"space-y-4 animate-fadeIn",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-blue-500",placeholder:"REPOSITORY"===o?"Buscar en repositorio...":"Buscar proyecto...",value:h,onChange:e=>b(e.target.value)}),(0,t.jsx)(G.MagnifyingGlass,{className:"absolute left-3 top-2.5 text-slate-400",size:18})]}),(0,t.jsxs)("div",{className:"max-h-48 overflow-y-auto border border-slate-100 rounded-xl divide-y divide-slate-50 custom-scrollbar",children:["REPOSITORY"===o?v.map(e=>(0,t.jsxs)("button",{onClick:()=>g(e.id),className:`w-full text-left p-3 text-xs transition-colors flex items-center justify-between ${f===e.id?"bg-blue-50 text-blue-700 font-bold":"hover:bg-slate-50 text-slate-600"}`,children:[(0,t.jsx)("span",{className:"truncate flex-1",children:e.title}),f===e.id&&(0,t.jsx)(B.CheckCircle,{size:14,weight:"fill"})]},e.id)):N.map(e=>(0,t.jsxs)("button",{onClick:()=>g(e.id),className:`w-full text-left p-3 text-xs transition-colors flex items-center justify-between ${f===e.id?"bg-blue-50 text-blue-700 font-bold":"hover:bg-slate-50 text-slate-600"}`,children:[(0,t.jsxs)("div",{className:"flex flex-col truncate flex-1",children:[(0,t.jsx)("span",{children:e.title}),(0,t.jsx)("span",{className:"text-[10px] font-normal text-slate-400 tracking-tighter uppercase",children:"ESTRUCTURA .XLS"})]}),f===e.id&&(0,t.jsx)(B.CheckCircle,{size:14,weight:"fill"})]},e.id)),h&&("REPOSITORY"===o?0===v.length:0===N.length)&&(0,t.jsx)("p",{className:"p-4 text-center text-xs text-slate-400 italic",children:"No se encontraron resultados."})]})]}),"STORAGE"===o&&(0,t.jsxs)("div",{className:"space-y-3 animate-fadeIn",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Puntos de Storage Configurador por Admin"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2",children:w.map(e=>(0,t.jsxs)("button",{onClick:()=>g(e.id),className:`w-full text-left p-4 rounded-xl border-2 transition-all flex items-center gap-3 ${f===e.id?"border-blue-600 bg-blue-50":"border-slate-100 hover:border-slate-200 bg-white"}`,children:[(0,t.jsx)("div",{className:`p-2 rounded-lg ${f===e.id?"bg-blue-600 text-white":"bg-slate-100 text-slate-400"}`,children:(0,t.jsx)(d.Database,{size:20})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:`text-sm font-bold ${f===e.id?"text-blue-700":"text-slate-700"}`,children:e.name}),(0,t.jsx)("p",{className:"text-[10px] text-slate-400 font-mono uppercase",children:e.provider})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-8",children:[(0,t.jsx)("button",{onClick:e,className:"btn-ghost text-slate-500 px-6",children:"Cancelar"}),(0,t.jsx)("button",{onClick:()=>{let e=i;e||("FILE"===o&&m?e=m.name:"REPOSITORY"===o?e=v.find(e=>e.id===f)?.title||"Doc Repositorio":"PROJECTS"===o?e=N.find(e=>e.id===f)?.title||"Estructura Proyecto":"STORAGE"===o&&(e=w.find(e=>e.id===f)?.name||"Storage Externo")),s(e,o,"FILE"===o?m:f)},disabled:"FILE"===o&&!m||["REPOSITORY","PROJECTS","STORAGE"].includes(o)&&!f,className:"btn bg-blue-600 text-white px-8 h-12 shadow-lg shadow-blue-500/20 disabled:opacity-50 disabled:cursor-not-allowed transform active:scale-95 transition-all font-bold",children:"Cargar Dataset"})]})]})]})})}function es({dashboard:e,onClose:s,users:l}){let[r,n]=(0,a.useState)("INTERNAL"),[o,d]=(0,a.useState)(""),[c,p]=(0,a.useState)([]),[m,u]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),v=l.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.role.toLowerCase().includes(o.toLowerCase())).slice(0,5),y=`https://knowledgeflow.app/shared/dashboard/${e.id}`;return(0,t.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fadeIn",onClick:s,children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-xl overflow-hidden animate-scaleIn",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center shadow-inner",children:(0,t.jsx)(i.ShareNetwork,{size:24,weight:"fill"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Compartir Tablero"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:e.title})]})]}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:(0,t.jsx)(x.X,{size:20})})]}),(0,t.jsxs)("div",{className:"flex px-6 border-b border-slate-100 bg-slate-50/30",children:[(0,t.jsxs)("button",{onClick:()=>n("INTERNAL"),className:`flex items-center gap-2 py-4 px-4 text-xs font-bold uppercase tracking-wider transition-all border-b-2 ${"INTERNAL"===r?"border-blue-600 text-blue-700":"border-transparent text-slate-400 hover:text-slate-600"}`,children:[(0,t.jsx)(k.UserPlus,{size:16})," Colaboradores Internos"]}),(0,t.jsxs)("button",{onClick:()=>n("EXTERNAL"),className:`flex items-center gap-2 py-4 px-4 text-xs font-bold uppercase tracking-wider transition-all border-b-2 ${"EXTERNAL"===r?"border-purple-600 text-purple-700":"border-transparent text-slate-400 hover:text-slate-600"}`,children:[(0,t.jsx)(j.Globe,{size:16})," Acceso Externo"]})]}),(0,t.jsx)("div",{className:"p-8",children:"INTERNAL"===r?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 block tracking-widest",children:"Añadir a tu equipo"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("input",{className:"w-full pl-11 pr-4 py-3 bg-slate-50 border-2 border-slate-100 rounded-2xl text-sm outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 focus:bg-white transition-all shadow-sm",placeholder:"Busca por nombre, correo o cargo...",value:o,onChange:e=>d(e.target.value)}),(0,t.jsx)(N.Users,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-blue-500 transition-colors",size:20})]})]}),o&&(0,t.jsx)("div",{className:"space-y-1 bg-white border border-slate-100 rounded-2xl shadow-xl p-2 animate-fadeIn max-h-56 overflow-y-auto custom-scrollbar",children:v.length>0?v.map(e=>(0,t.jsxs)("button",{onClick:()=>{c.includes(e.id)||p([...c,e.id]),d("")},className:"w-full flex items-center gap-3 p-3 hover:bg-blue-50/50 rounded-xl transition-all border border-transparent hover:border-blue-100 group",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white flex items-center justify-center font-bold text-sm shadow-md",children:e.initials}),(0,t.jsxs)("div",{className:"text-left flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-bold text-slate-800",children:e.name}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500 font-medium",children:e.role})]}),(0,t.jsx)(V.PlusCircle,{size:20,className:"text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"})]},e.id)):(0,t.jsx)("div",{className:"p-4 text-center text-slate-400 text-xs italic",children:"No se encontraron usuarios"})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase block tracking-widest",children:"Usuarios con acceso"}),0===c.length?(0,t.jsxs)("div",{className:"p-8 border-2 border-dashed border-slate-100 rounded-2xl text-center bg-slate-50/50",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-white flex items-center justify-center mx-auto mb-3 shadow-sm border border-slate-100",children:(0,t.jsx)(N.Users,{size:24,className:"text-slate-200"})}),(0,t.jsx)("p",{className:"text-xs text-slate-400 font-medium",children:"Solo tú tienes acceso a este tablero actualmente."})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2",children:c.map(e=>{let a=l.find(t=>t.id===e);return(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-shadow group",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center font-bold text-sm border border-slate-200",children:a?.initials}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-bold text-slate-800",children:a?.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,t.jsx)("span",{className:"text-[10px] bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full font-bold",children:"EDITOR"}),(0,t.jsx)("span",{className:"text-[10px] text-slate-400",children:"• Acceso total"})]})]}),(0,t.jsx)("button",{onClick:()=>p(c.filter(t=>t!==e)),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all",children:(0,t.jsx)(w.Trash,{size:18})})]},e)})})]})]}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"p-6 bg-gradient-to-br from-purple-600 to-purple-800 rounded-3xl border border-purple-400 shadow-xl shadow-purple-500/20 relative overflow-hidden group",children:[(0,t.jsx)("span",{className:"absolute -right-4 -top-4 w-32 h-32 bg-white/10 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"}),(0,t.jsxs)("div",{className:"flex items-start gap-4 relative z-10",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center text-white border border-white/30",children:(0,t.jsx)(f.Link,{size:24,weight:"bold"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"text-lg font-bold text-white mb-1",children:"Enlace de Visualización Pública"}),(0,t.jsx)("p",{className:"text-white/70 text-xs leading-relaxed",children:"Comparte una versión interactiva y de solo lectura de este tablero con personas externas (clientes, socios o directivos)."})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex gap-3 relative z-10",children:[(0,t.jsx)("div",{className:"flex-1 bg-black/20 backdrop-blur-md border border-white/20 rounded-2xl px-4 py-3 text-[11px] font-mono text-purple-100 truncate flex items-center shadow-inner",children:y}),(0,t.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(y),g(!0),setTimeout(()=>g(!1),2e3)},className:`px-6 py-3 rounded-2xl font-bold text-xs transition-all flex items-center gap-2 transform active:scale-95 ${h?"bg-green-500 text-white shadow-lg shadow-green-500/30":"bg-white text-purple-700 hover:bg-purple-50 shadow-lg"}`,children:[h?(0,t.jsx)(H.Check,{size:18,weight:"bold"}):(0,t.jsx)(D.Copy,{size:18}),h?"Copiado":"Copiar"]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:[(0,t.jsx)(P.Envelope,{size:14,className:"text-purple-500"}),"Enviar Invitación por Correo"]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("div",{className:"relative flex-1 group",children:[(0,t.jsx)("input",{className:"w-full pl-11 pr-4 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl text-sm outline-none focus:ring-4 focus:ring-purple-500/10 focus:border-purple-500 focus:bg-white transition-all shadow-sm",placeholder:"ejemplo@cliente.com",value:m,onChange:e=>u(e.target.value)}),(0,t.jsx)(P.Envelope,{className:"absolute left-4 top-4 text-slate-400 group-focus-within:text-purple-500 transition-colors",size:20})]}),(0,t.jsx)("button",{disabled:!m.includes("@"),onClick:()=>{alert(`Invitaci\xf3n de acceso enviada correctamente a: ${m}`),u("")},className:"bg-slate-900 text-white px-8 rounded-2xl text-xs font-bold hover:bg-slate-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-slate-900/20 active:scale-95 transform",children:"Enviar Acceso"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 px-1",children:[(0,t.jsx)("div",{className:"w-1 h-4 bg-purple-500 rounded-full"}),(0,t.jsx)("p",{className:"text-[10px] text-slate-500 font-medium italic",children:"Se generará una URL única con token de seguridad para el destinatario."})]})]})]})}),(0,t.jsxs)("div",{className:"p-6 bg-slate-50 border-t border-slate-100 flex justify-end items-center gap-4",children:[(0,t.jsx)("button",{onClick:s,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors uppercase tracking-widest px-4",children:"Cerrar"}),"INTERNAL"===r?(0,t.jsxs)("button",{disabled:0===c.length,onClick:()=>{alert("¡Equipos notificados y acceso concedido!"),s()},className:"bg-blue-600 text-white px-8 py-3 rounded-2xl text-xs font-bold hover:bg-blue-700 hover:shadow-xl hover:shadow-blue-500/30 transition-all disabled:opacity-50 disabled:grayscale transform active:scale-95",children:["Confirmar Accesos (",c.length,")"]}):(0,t.jsxs)("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 bg-white border border-slate-200 px-3 py-2 rounded-full shadow-sm",children:[(0,t.jsx)(b,{size:14,className:"text-purple-500"}),"ACTUALIZACIÓN EN TIEMPO REAL ACTIVA"]})]})]})})}function el({dataset:e,onClose:s,onSave:l}){let[r,i]=(0,a.useState)(e.title),[n,o]=(0,a.useState)(JSON.parse(JSON.stringify(e.columns)));return(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-4xl animate-scaleIn max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8 border-b border-slate-100 pb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"font-extrabold text-2xl text-slate-800 flex items-center gap-2",children:[(0,t.jsx)(b,{className:"text-purple-600",weight:"fill"}),"Normalizar Dataset"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Refina los nombres y tipos de datos antes de usarlos en un tablero."})]}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-400",children:(0,t.jsx)(x.X,{size:24})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"md:col-span-1 border-r border-slate-100 pr-8 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Nombre del Dataset"}),(0,t.jsx)("input",{className:"input w-full",value:r,onChange:e=>i(e.target.value)})]}),(0,t.jsxs)("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100",children:[(0,t.jsxs)("h4",{className:"text-xs font-bold text-purple-700 flex items-center gap-2 mb-2",children:[(0,t.jsx)(p.Kanban,{size:16}),"Resumen del Origen"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-[11px]",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"Tipo:"}),(0,t.jsx)("span",{className:"font-bold text-slate-700",children:e.sourceType})]}),(0,t.jsxs)("div",{className:"flex justify-between text-[11px]",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"Filas estimadas:"}),(0,t.jsx)("span",{className:"font-bold text-slate-700",children:e.rows})]}),(0,t.jsxs)("div",{className:"flex justify-between text-[11px]",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"Columnas:"}),(0,t.jsx)("span",{className:"font-bold text-slate-700",children:n.length})]})]})]}),(0,t.jsx)("div",{className:"text-[10px] text-slate-400 italic",children:"Tip: Cambia los tipos de datos a NUMBER si planeas realizar cálculos matemáticos o DATE para filtros de tiempo."})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"label text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 block",children:"Mapeo de Columnas"}),(0,t.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:n.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-slate-50 hover:bg-white border border-transparent hover:border-slate-200 rounded-xl transition-all group",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-white shadow-sm flex items-center justify-center text-xs font-bold text-slate-400",children:a+1}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("input",{className:"bg-transparent border-none outline-none font-bold text-slate-700 w-full focus:ring-0",value:e.name,onChange:e=>{var t;let s;return t=e.target.value,void((s=[...n])[a].name=t,o(s))},placeholder:"Nombre de columna"})}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("select",{className:"bg-white border-slate-200 text-xs rounded-lg py-1 px-3 outline-none focus:ring-2 focus:ring-purple-500",value:e.type,onChange:e=>{var t;let s;return t=e.target.value,void((s=[...n])[a].type=t,o(s))},children:[(0,t.jsx)("option",{value:"STRING",children:"TEXTO (Abc)"}),(0,t.jsx)("option",{value:"NUMBER",children:"NÚMERO (123)"}),(0,t.jsx)("option",{value:"DATE",children:"FECHA (📅)"})]})})]},a))}),(0,t.jsxs)("div",{className:"mt-8 flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:s,className:"btn-ghost text-slate-500 px-6",children:"Descartar"}),(0,t.jsx)("button",{onClick:()=>l({...e,title:r,columns:n}),className:"btn bg-purple-600 text-white px-8 h-12 shadow-lg shadow-purple-500/20 transform active:scale-95 transition-all font-bold",children:"Guardar Normalización"})]})]})]})]})})}e.s(["default",()=>W],18140)}]);