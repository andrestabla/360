module.exports=[16836,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(98263),e=a.i(82665),f=a.i(90488),g=a.i(54069),h=a.i(60217);let i=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M248.23,112.31A20,20,0,0,0,232,104H220V88a20,20,0,0,0-20-20H132L105.34,48a20.12,20.12,0,0,0-12-4H40A20,20,0,0,0,20,64V208a12,12,0,0,0,12,12H211.1a12,12,0,0,0,11.33-8l28.49-81.47.06-.17A20,20,0,0,0,248.23,112.31ZM92,68l28.8,21.6A12,12,0,0,0,128,92h68v12H69.77a20,20,0,0,0-18.94,13.58L44,137.15V68ZM202.59,196H48.89l23.72-68H226.37Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M208,88v24H69.77a8,8,0,0,0-7.59,5.47L32,208V64a8,8,0,0,1,8-8H93.33a8,8,0,0,1,4.8,1.6L128,80h72A8,8,0,0,1,208,88Z",opacity:"0.2"}),c.createElement("path",{d:"M245,110.64A16,16,0,0,0,232,104H216V88a16,16,0,0,0-16-16H130.67L102.94,51.2a16.14,16.14,0,0,0-9.6-3.2H40A16,16,0,0,0,24,64V208a8,8,0,0,0,8,8H211.1a8,8,0,0,0,7.59-5.47l28.49-85.47A16.05,16.05,0,0,0,245,110.64ZM93.34,64,123.2,86.4A8,8,0,0,0,128,88h72v16H69.77a16,16,0,0,0-15.18,10.94L40,158.7V64Zm112,136H43.1l26.67-80H232Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M245,110.64A16,16,0,0,0,232,104H216V88a16,16,0,0,0-16-16H130.67L102.94,51.2a16.14,16.14,0,0,0-9.6-3.2H40A16,16,0,0,0,24,64V208h0a8,8,0,0,0,8,8H211.1a8,8,0,0,0,7.59-5.47l28.49-85.47A16.05,16.05,0,0,0,245,110.64ZM93.34,64,123.2,86.4A8,8,0,0,0,128,88h72v16H69.77a16,16,0,0,0-15.18,10.94L40,158.7V64Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M243.36,111.81A14,14,0,0,0,232,106H214V88a14,14,0,0,0-14-14H130L101.74,52.8a14.06,14.06,0,0,0-8.4-2.8H40A14,14,0,0,0,26,64V208a6,6,0,0,0,6,6H211.1a6,6,0,0,0,5.69-4.1l28.49-85.47A14,14,0,0,0,243.36,111.81ZM40,62H93.34a2,2,0,0,1,1.2.4L124.4,84.8A6,6,0,0,0,128,86h72a2,2,0,0,1,2,2v18H69.77a14,14,0,0,0-13.28,9.57L38,171V64A2,2,0,0,1,40,62Zm193.9,58.63L206.78,202H40.33l27.54-82.63a2,2,0,0,1,1.9-1.37H232a2,2,0,0,1,1.9,2.63Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M245,110.64A16,16,0,0,0,232,104H216V88a16,16,0,0,0-16-16H130.67L102.94,51.2a16.14,16.14,0,0,0-9.6-3.2H40A16,16,0,0,0,24,64V208h0a8,8,0,0,0,8,8H211.1a8,8,0,0,0,7.59-5.47l28.49-85.47A16.05,16.05,0,0,0,245,110.64ZM93.34,64,123.2,86.4A8,8,0,0,0,128,88h72v16H69.77a16,16,0,0,0-15.18,10.94L40,158.7V64Zm112,136H43.1l26.67-80H232Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M241.72,113a11.88,11.88,0,0,0-9.73-5H212V88a12,12,0,0,0-12-12H129.33l-28.8-21.6a12.05,12.05,0,0,0-7.2-2.4H40A12,12,0,0,0,28,64V208a4,4,0,0,0,4,4H211.09a4,4,0,0,0,3.79-2.74l28.49-85.47A11.86,11.86,0,0,0,241.72,113ZM40,60H93.33a4,4,0,0,1,2.4.8L125.6,83.2a4,4,0,0,0,2.4.8h72a4,4,0,0,1,4,4v20H69.76a12,12,0,0,0-11.38,8.21L36,183.35V64A4,4,0,0,1,40,60Zm195.78,61.26L208.2,204H37.55L66,118.74A4,4,0,0,1,69.76,116H232a4,4,0,0,1,3.79,5.26Z"}))]]),j=c.forwardRef((a,b)=>c.createElement(h.default,{ref:b,...a,weights:i}));j.displayName="FolderOpenIcon";var k=a.i(10158),l=a.i(56262),m=a.i(39577),n=a.i(25603);let o=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M228,64a36,36,0,1,0-48,33.94V112a4,4,0,0,1-4,4H80a4,4,0,0,1-4-4V97.94a36,36,0,1,0-24,0V112a28,28,0,0,0,28,28h36v18.06a36,36,0,1,0,24,0V140h36a28,28,0,0,0,28-28V97.94A36.07,36.07,0,0,0,228,64ZM64,52A12,12,0,1,1,52,64,12,12,0,0,1,64,52Zm64,152a12,12,0,1,1,12-12A12,12,0,0,1,128,204ZM192,76a12,12,0,1,1,12-12A12,12,0,0,1,192,76Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M88,64A24,24,0,1,1,64,40,24,24,0,0,1,88,64ZM192,40a24,24,0,1,0,24,24A24,24,0,0,0,192,40Z",opacity:"0.2"}),c.createElement("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM144,192a16,16,0,1,1-16-16A16,16,0,0,1,144,192Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M222,64a30,30,0,1,0-36,29.4V112a10,10,0,0,1-10,10H80a10,10,0,0,1-10-10V93.4a30,30,0,1,0-12,0V112a22,22,0,0,0,22,22h42v28.6a30,30,0,1,0,12,0V134h42a22,22,0,0,0,22-22V93.4A30.05,30.05,0,0,0,222,64ZM46,64A18,18,0,1,1,64,82,18,18,0,0,1,46,64ZM146,192a18,18,0,1,1-18-18A18,18,0,0,1,146,192ZM192,82a18,18,0,1,1,18-18A18,18,0,0,1,192,82Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M220,64a28,28,0,1,0-32,27.71V112a12,12,0,0,1-12,12H80a12,12,0,0,1-12-12V91.71a28,28,0,1,0-8,0V112a20,20,0,0,0,20,20h44v32.29a28,28,0,1,0,8,0V132h44a20,20,0,0,0,20-20V91.71A28,28,0,0,0,220,64ZM44,64A20,20,0,1,1,64,84,20,20,0,0,1,44,64ZM148,192a20,20,0,1,1-20-20A20,20,0,0,1,148,192ZM192,84a20,20,0,1,1,20-20A20,20,0,0,1,192,84Z"}))]]),p=c.forwardRef((a,b)=>c.createElement(h.default,{ref:b,...a,weights:o}));p.displayName="GitForkIcon";var q=a.i(56536),r=a.i(39321),s=a.i(4971),t=a.i(60144),u=a.i(70054),v=a.i(1739);function w({isOpen:a,onClose:d,onImport:e,tenantId:f}){let[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!1);if(!a)return null;let o=async a=>{let b=a.target.files?.[0];if(!b)return;h(b),l([]),j([]);let c=(await b.text()).split("\n").filter(a=>a.trim());if(c.length<2)return void l(["El archivo está vacío o no tiene datos"]);let d=c[0].split(",").map(a=>a.trim()),e=["id","name","type","depth"].filter(a=>!d.includes(a));if(e.length>0)return void l([`Faltan campos requeridos: ${e.join(", ")}`]);let g=[],i=[];for(let a=1;a<c.length;a++){let b=c[a].split(",").map(a=>a.trim()),e={};if(d.forEach((a,c)=>{e[a]=b[c]||""}),!e.id||!e.name||!e.type){i.push(`L\xednea ${a+1}: Faltan campos requeridos (id, name, type)`);continue}if(!["UNIT","PROCESS"].includes(e.type)){i.push(`L\xednea ${a+1}: Tipo inv\xe1lido "${e.type}". Debe ser UNIT o PROCESS`);continue}if("UNIT"===e.type&&(!e.depth||!["0","1","2"].includes(e.depth))){i.push(`L\xednea ${a+1}: Depth inv\xe1lido para UNIT. Debe ser 0, 1 o 2`);continue}let h={id:e.id,tenantId:f,name:e.name,type:e.type,depth:"UNIT"===e.type?parseInt(e.depth):void 0,parentId:e.parentId||void 0,ownerId:e.responsibleEmail||void 0,description:e.description||void 0};g.push(h)}i.length>0&&l(i),j(g)},p=()=>{h(null),j([]),l([]),n(!1),d()};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fadeIn",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col animate-slideUp",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white p-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,b.jsx)(q.UploadSimple,{size:32,weight:"fill"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Importar Estructura Organizacional"}),(0,b.jsx)("p",{className:"text-purple-100 text-sm mt-1",children:"Carga masiva desde archivo CSV"})]})]}),(0,b.jsx)("button",{onClick:p,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:(0,b.jsx)(r.X,{size:24,weight:"bold"})})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(v.Info,{size:24,className:"text-blue-600 flex-shrink-0",weight:"fill"}),(0,b.jsxs)("div",{className:"text-sm text-blue-900",children:[(0,b.jsx)("p",{className:"font-bold mb-2",children:"Instrucciones:"}),(0,b.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[(0,b.jsx)("li",{children:"Descarga el archivo de ejemplo haciendo clic en el botón abajo"}),(0,b.jsx)("li",{children:"Edita el archivo CSV con la estructura de tu organización"}),(0,b.jsx)("li",{children:"Asegúrate de mantener el formato y los nombres de las columnas"}),(0,b.jsx)("li",{children:"Sube el archivo editado usando el botón de carga"})]})]})]})}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)("button",{onClick:()=>{let a=document.createElement("a");a.href="/templates/estructura-organizacional-ejemplo.csv",a.download="estructura-organizacional-ejemplo.csv",a.click()},className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 transition-colors shadow-lg",children:[(0,b.jsx)(s.DownloadSimple,{size:20,weight:"bold"}),"Descargar Plantilla CSV de Ejemplo"]})}),(0,b.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-slate-800 mb-3",children:"Formato del Archivo CSV"}),(0,b.jsxs)("div",{className:"text-sm text-slate-700 space-y-2",children:[(0,b.jsx)("p",{children:(0,b.jsx)("strong",{children:"Columnas requeridas:"})}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("code",{className:"bg-slate-200 px-2 py-0.5 rounded",children:"id"})," - Identificador único de la unidad"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("code",{className:"bg-slate-200 px-2 py-0.5 rounded",children:"name"})," - Nombre de la unidad o proceso"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("code",{className:"bg-slate-200 px-2 py-0.5 rounded",children:"type"})," - UNIT o PROCESS"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("code",{className:"bg-slate-200 px-2 py-0.5 rounded",children:"depth"})," - 0 (Dirección), 1 (Área), 2 (Subárea) - Solo para UNIT"]})]}),(0,b.jsx)("p",{className:"mt-3",children:(0,b.jsx)("strong",{children:"Columnas opcionales:"})}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("code",{className:"bg-slate-200 px-2 py-0.5 rounded",children:"parentId"})," - ID de la unidad padre"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("code",{className:"bg-slate-200 px-2 py-0.5 rounded",children:"parentName"})," - Nombre de la unidad padre (referencia)"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("code",{className:"bg-slate-200 px-2 py-0.5 rounded",children:"responsibleEmail"})," - Email del responsable"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("code",{className:"bg-slate-200 px-2 py-0.5 rounded",children:"description"})," - Descripción de la unidad"]})]})]})]}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-purple-400 transition-colors",children:[(0,b.jsx)("input",{type:"file",accept:".csv",onChange:o,className:"hidden",id:"csv-upload"}),(0,b.jsxs)("label",{htmlFor:"csv-upload",className:"cursor-pointer flex flex-col items-center gap-3",children:[(0,b.jsx)("div",{className:"p-4 bg-purple-100 rounded-full",children:(0,b.jsx)(q.UploadSimple,{size:48,className:"text-purple-600",weight:"fill"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-lg font-bold text-slate-800",children:g?g.name:"Haz clic para seleccionar un archivo CSV"}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"o arrastra y suelta aquí"})]})]})]}),k.length>0&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(u.Warning,{size:24,className:"text-red-600 flex-shrink-0",weight:"fill"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-bold text-red-900 mb-2",children:"Errores encontrados:"}),(0,b.jsx)("ul",{className:"text-sm text-red-800 space-y-1",children:k.map((a,c)=>(0,b.jsxs)("li",{children:["• ",a]},c))})]})]})}),i.length>0&&0===k.length&&(0,b.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,b.jsx)(t.CheckCircle,{size:24,className:"text-green-600 flex-shrink-0",weight:"fill"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-bold text-green-900",children:["Vista Previa: ",i.length," unidades/procesos listos para importar"]}),(0,b.jsx)("p",{className:"text-sm text-green-800 mt-1",children:"Revisa los datos antes de confirmar la importación"})]})]}),(0,b.jsx)("div",{className:"max-h-64 overflow-y-auto bg-white rounded-lg border border-green-200",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-green-100 sticky top-0",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left p-2 font-bold text-green-900",children:"ID"}),(0,b.jsx)("th",{className:"text-left p-2 font-bold text-green-900",children:"Nombre"}),(0,b.jsx)("th",{className:"text-left p-2 font-bold text-green-900",children:"Tipo"}),(0,b.jsx)("th",{className:"text-left p-2 font-bold text-green-900",children:"Nivel"}),(0,b.jsx)("th",{className:"text-left p-2 font-bold text-green-900",children:"Padre"})]})}),(0,b.jsx)("tbody",{children:i.map((a,c)=>(0,b.jsxs)("tr",{className:"border-t border-green-100 hover:bg-green-50",children:[(0,b.jsx)("td",{className:"p-2 font-mono text-xs",children:a.id}),(0,b.jsx)("td",{className:"p-2",children:a.name}),(0,b.jsx)("td",{className:"p-2",children:(0,b.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${"UNIT"===a.type?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:a.type})}),(0,b.jsx)("td",{className:"p-2",children:void 0!==a.depth?`Depth ${a.depth}`:"-"}),(0,b.jsx)("td",{className:"p-2 text-xs text-slate-500",children:a.parentId||"-"})]},c))})]})})]})]}),(0,b.jsxs)("div",{className:"border-t border-slate-200 p-4 bg-slate-50 flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:p,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg font-bold hover:bg-slate-100 transition-colors",children:"Cancelar"}),(0,b.jsx)("button",{onClick:()=>{0!==i.length&&(n(!0),setTimeout(()=>{e(i),n(!1),p()},1500))},disabled:0===i.length||k.length>0||m,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-bold hover:bg-purple-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Importando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.UploadSimple,{size:20,weight:"bold"}),"Importar ",i.length," Unidades"]})})]})]})})}var x=a.i(57764),y=a.i(45150);function z(){let{currentUser:a,currentTenant:h,isSuperAdmin:i,createUnit:o,updateUnit:r,deleteUnit:s}=(0,d.useApp)(),[t,u]=(0,c.useState)(!1),[v,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(0),[E,F]=(0,c.useState)({name:"",code:"",parentId:"",ownerId:"",description:"",members:[],type:"UNIT"}),G=(0,c.useMemo)(()=>h?e.DB.units.filter(a=>a.tenantId===h.id):[],[h,C]),H=(0,c.useMemo)(()=>G.filter(a=>!a.parentId||"ROOT"===a.parentId||0===a.depth),[G]),I=(0,c.useMemo)(()=>h?e.DB.users.filter(a=>a.tenantId===h.id):[],[h]);if(!a)return(0,b.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Cargando sesión..."});if(1!==a.level)return(0,b.jsxs)("div",{className:"p-8 text-center bg-red-50 text-red-600 rounded-xl m-8",children:[(0,b.jsx)("h3",{className:"font-bold",children:"Acceso Denegado"}),(0,b.jsx)("p",{className:"text-sm",children:"Solo los administradores de tenant pueden gestionar la estructura organizacional."})]});if(!h)return(0,b.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Cargando datos de la organización..."});let J=(a,b="")=>{B(null),F({name:"",code:"",parentId:b,ownerId:"",description:"",members:[],type:a}),u(!0)},K=({unit:a})=>{let d,e=(d=a.id,G.filter(a=>a.parentId===d)),[f,h]=(0,c.useState)(!0),i=I.find(b=>b.id===a.ownerId);return(0,b.jsxs)("div",{className:"ml-6 border-l border-slate-200 pl-4 py-2 relative animate-fadeIn",children:[(0,b.jsx)("div",{className:"absolute top-5 -left-4 w-4 h-[1px] bg-slate-200"}),(0,b.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-slate-100 shadow-sm hover:shadow-md transition-all flex justify-between items-center group",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>h(!f),className:"text-slate-400 hover:text-blue-500",children:e.length>0?f?(0,b.jsx)(j,{size:20,weight:"fill",className:"text-blue-200 text-blue-500"}):(0,b.jsx)(g.Folder,{size:20,weight:"fill",className:"text-blue-300"}):(0,b.jsx)("div",{className:"w-5 h-5 rounded bg-slate-100 flex items-center justify-center text-[10px] text-slate-400 font-bold",children:a.code||"U"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-bold text-slate-700 text-sm",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-[10px] text-slate-400",children:[a.code&&(0,b.jsx)("span",{className:"bg-slate-50 px-1 rounded border border-slate-100",children:a.code}),i&&(0,b.jsxs)("span",{className:"flex items-center gap-1 text-slate-500",children:[(0,b.jsx)(n.UserCircle,{})," ",i.name]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsx)("button",{onClick:()=>J("UNIT",a.id),className:"p-1.5 hover:bg-green-50 text-green-600 rounded",title:"Agregar sub-unidad",children:(0,b.jsx)(k.Plus,{})}),(0,b.jsx)("button",{onClick:()=>J("PROCESS",a.id),className:"p-1.5 hover:bg-purple-50 text-purple-600 rounded",title:"Agregar Proceso",children:(0,b.jsx)(p,{})}),(0,b.jsx)("button",{onClick:()=>{B(a.id),F({...a}),u(!0)},className:"p-1.5 hover:bg-blue-50 text-blue-600 rounded",title:"Editar",children:(0,b.jsx)(l.Pencil,{})}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void(confirm("¿Estás seguro de eliminar esta unidad?")&&(s(b),D(a=>a+1)))},className:"p-1.5 hover:bg-red-50 text-red-600 rounded",title:"Eliminar",children:(0,b.jsx)(m.Trash,{})})]})]}),f&&e.length>0&&(0,b.jsx)("div",{className:"space-y-1",children:e.map(a=>(0,b.jsx)(K,{unit:a},a.id))})]})};return(0,b.jsxs)("div",{className:"max-w-5xl mx-auto p-6 animate-fadeIn",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,b.jsx)(f.TreeStructure,{className:"text-blue-600"})," Estructura Organizacional"]}),(0,b.jsxs)("p",{className:"text-sm text-slate-500 mt-1",children:["Define y gestiona las áreas y departamentos de ",h.name,"."]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("button",{onClick:()=>z(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium flex items-center gap-2 shadow-lg",children:[(0,b.jsx)(q.UploadSimple,{weight:"bold"})," Importar CSV"]}),(0,b.jsxs)("button",{onClick:()=>J("UNIT"),className:"btn btn-primary flex items-center gap-2",children:[(0,b.jsx)(k.Plus,{weight:"bold"})," Nueva Área Raíz"]})]})]}),(0,b.jsx)("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-8 min-h-[400px]",children:0===H.length?(0,b.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,b.jsx)(f.TreeStructure,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:"No hay unidades definidas."}),(0,b.jsx)("button",{onClick:()=>J("UNIT"),className:"text-blue-600 text-sm hover:underline mt-2",children:"Crear la primera unidad"})]}):(0,b.jsx)("div",{className:"-ml-6",children:H.map(a=>(0,b.jsx)(K,{unit:a},a.id))})}),t&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-fadeIn",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[(0,b.jsxs)("h3",{className:"font-bold text-slate-800",children:[A?"Editar":"Crear"," ","PROCESS"===E.type?"Proceso":"Unidad"]}),(0,b.jsx)("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600",children:"×"})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=0;if(E.parentId){let a=G.find(a=>a.id===E.parentId);a&&(b=a.depth+1)}let c={...E,depth:b};A?r(A,c):o(c),u(!1),D(a=>a+1)},className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"PROCESS"===E.type?"Nombre del Proceso":"Nombre Unidad / Área"}),(0,b.jsx)("input",{required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 ring-blue-500/20 outline-none transition-all",value:E.name,onChange:a=>F({...E,name:a.target.value}),placeholder:"PROCESS"===E.type?"Ej. Gestión de Talento":"Ej. Recursos Humanos"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Código (Opcional)"}),(0,b.jsx)("input",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 ring-blue-500/20 outline-none transition-all",value:E.code||"",onChange:a=>F({...E,code:a.target.value}),placeholder:"Ej. TH"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"PROCESS"===E.type?"Unidad Responsable":"Unidad Padre"}),(0,b.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg bg-white",value:E.parentId||"",onChange:a=>F({...E,parentId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"(Raíz)"}),G.filter(a=>a.id!==A).map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"PROCESS"===E.type?"Líder del Proceso (Owner)":"Jefe de Área (Owner)"}),(0,b.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg bg-white",value:E.ownerId||"",onChange:a=>F({...E,ownerId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Seleccionar responsable..."}),I.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name," (",a.role,")"]},a.id))]}),(0,b.jsx)("p",{className:"text-[10px] text-slate-400 mt-1",children:"El owner tendrá permisos extendidos."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"PROCESS"===E.type?"Objetivo / Descripción":"Descripción de la Unidad"}),(0,b.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 ring-blue-500/20 outline-none transition-all resize-none",rows:3,value:E.description||"",onChange:a=>F({...E,description:a.target.value}),placeholder:"Describe el propósito o alcance..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Otros Miembros del Equipo"}),(0,b.jsxs)("div",{className:"border rounded-lg p-2 max-h-32 overflow-y-auto bg-slate-50",children:[I.filter(a=>a.id!==E.ownerId).map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 p-1.5 hover:bg-white rounded cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:E.members?.includes(a.id)||!1,onChange:b=>{let c=E.members||[];b.target.checked?F({...E,members:[...c,a.id]}):F({...E,members:c.filter(b=>b!==a.id)})},className:"rounded text-blue-600 focus:ring-blue-500"}),(0,b.jsx)("span",{className:"text-sm text-slate-700",children:a.name})]},a.id)),0===I.length&&(0,b.jsx)("span",{className:"text-xs text-slate-400 p-2",children:"No hay usuarios disponibles."})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100 mt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-slate-500 hover:bg-slate-100 rounded-lg text-sm font-medium",children:"Cancelar"}),(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium shadow-lg shadow-blue-500/20",children:A?"Guardar Cambios":"PROCESS"===E.type?"Crear Proceso":"Crear Unidad"})]})]})]})}),(0,b.jsx)(w,{isOpen:v,onClose:()=>z(!1),onImport:a=>{a.forEach(a=>{o(a)}),D(a=>a+1)},tenantId:h.id}),(0,b.jsx)(x.default,{...y.unitsGuide})]})}a.s(["default",()=>z],16836)}];

//# sourceMappingURL=app_dashboard_admin_units_page_tsx_ee8cf818._.js.map