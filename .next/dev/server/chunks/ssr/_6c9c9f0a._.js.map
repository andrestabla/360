{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/PostViewerModal.tsx"],"sourcesContent":["'use client';\n\nimport { Post, PublicComment, DB } from '@/lib/data';\nimport { useApp } from '@/context/AppContext';\nimport { X, Heart, ChatCircle, Paperclip, PlayCircle, SpeakerHigh, Image as ImageIcon, PaperPlaneRight, UserCircle } from '@phosphor-icons/react';\nimport { useState, useEffect, useRef } from 'react';\n\ninterface PostViewerModalProps {\n    post: Post | null;\n    onClose: () => void;\n}\n\nexport default function PostViewerModal({ post, onClose }: PostViewerModalProps) {\n    const { currentUser } = useApp();\n    const [likes, setLikes] = useState(0);\n    const [isLiked, setIsLiked] = useState(false);\n    const [comments, setComments] = useState<PublicComment[]>([]);\n    const [showComments, setShowComments] = useState(false);\n    const [newComment, setNewComment] = useState('');\n    const commentsEndRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        if (post) {\n            setLikes(post.likes);\n            setIsLiked(false); // Reset/Mock state\n            setComments(DB.publicComments.filter(c => c.postId === post.id) || []);\n            setShowComments(false);\n        }\n    }, [post]);\n\n    // Scroll to bottom when comments open/update\n    useEffect(() => {\n        if (showComments && commentsEndRef.current) {\n            commentsEndRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n    }, [comments, showComments]);\n\n\n    if (!post) return null;\n\n    const handleLike = () => {\n        if (isLiked) {\n            setLikes(p => p - 1);\n            setIsLiked(false);\n        } else {\n            setLikes(p => p + 1);\n            setIsLiked(true);\n        }\n        // Update mock DB (optional, keeps consistency if revisited)\n        const postInDb = DB.posts.find(p => p.id === post.id);\n        if (postInDb) postInDb.likes = isLiked ? likes - 1 : likes + 1;\n    };\n\n    const handleSendComment = (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!newComment.trim() || !currentUser) return;\n\n        const comment: PublicComment = {\n            id: `c-${Date.now()}`,\n            postId: post.id,\n            authorId: currentUser.id,\n            authorName: currentUser.name,\n            userId: currentUser.id,\n            userName: currentUser.name,\n            content: newComment,\n            createdAt: new Date().toISOString(),\n            date: 'Ahora'\n        };\n\n        // Update local state\n        const updatedComments = [...comments, comment];\n        setComments(updatedComments);\n        setNewComment('');\n\n        // Update Mock DB\n        DB.publicComments.push(comment);\n        const postInDb = DB.posts.find(p => p.id === post.id);\n        if (postInDb) postInDb.commentsCount = updatedComments.length;\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4 backdrop-blur-sm animate-fadeIn\">\n            <div className=\"bg-white w-full max-w-3xl max-h-[90vh] rounded-2xl overflow-hidden shadow-2xl flex flex-col relative animate-slideUp\">\n\n                {/* Close Button */}\n                <button\n                    onClick={onClose}\n                    className=\"absolute top-4 right-4 z-10 w-8 h-8 flex items-center justify-center bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors\"\n                >\n                    <X weight=\"bold\" />\n                </button>\n\n                {/* Main Content Area (Scrollable) */}\n                <div className=\"flex-1 overflow-y-auto overflow-x-hidden relative\">\n                    {/* Media Section */}\n                    {post.mediaType !== 'article' && (\n                        <div className=\"bg-slate-900 w-full flex-shrink-0 relative group\">\n                            {renderMedia(post)}\n                        </div>\n                    )}\n\n                    <div className=\"p-6 md:p-8\">\n                        {/* Header */}\n                        <div className=\"mb-6\">\n                            <div className=\"flex items-center justify-between mb-3\">\n                                <span className={`inline-block px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider ${getCategoryColor(post.category)}`}>\n                                    {post.category}\n                                </span>\n                                <span className=\"text-slate-400 text-sm font-medium\">{post.date}</span>\n                            </div>\n                            <h2 className=\"text-2xl font-bold text-slate-800 leading-tight mb-2\">{post.title}</h2>\n                            <p className=\"text-sm text-slate-500 font-medium\">Por {post.author}</p>\n                        </div>\n\n                        {/* Article Image if 'article' type */}\n                        {post.mediaType === 'article' && post.image && (\n                            <img src={post.image} alt=\"\" className=\"w-full h-64 object-cover rounded-xl mb-6 shadow-sm\" />\n                        )}\n\n                        {/* Rich Text Body */}\n                        <div\n                            className=\"prose prose-slate max-w-none mb-8 text-slate-600 leading-relaxed\"\n                            dangerouslySetInnerHTML={{ __html: post.content }}\n                        />\n\n                        {/* Attachments */}\n                        {post.attach && (\n                            <div className=\"flex items-center gap-3 p-3 bg-slate-50 border border-slate-100 rounded-lg mb-8\">\n                                <div className=\"w-10 h-10 bg-white rounded-lg flex items-center justify-center text-slate-400 shadow-sm border border-slate-100\">\n                                    <Paperclip size={20} />\n                                </div>\n                                <div className=\"flex-1\">\n                                    <div className=\"text-sm font-semibold text-slate-700\">{post.attach.name}</div>\n                                    <div className=\"text-xs text-slate-400 uppercase\">{post.attach.type} • 2.4 MB</div>\n                                </div>\n                                <button className=\"text-xs font-bold text-blue-600 px-3 hover:underline\">Descargar</button>\n                            </div>\n                        )}\n\n                        {/* Comments Section */}\n                        {showComments && (\n                            <div className=\"border-t border-slate-100 pt-6 animate-fadeIn\">\n                                <h3 className=\"text-sm font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                                    Comentarios <span className=\"text-slate-400 font-normal\">({comments.length})</span>\n                                </h3>\n\n                                <div className=\"space-y-4 mb-6\">\n                                    {comments.length > 0 ? comments.map(comment => (\n                                        <div key={comment.id} className=\"flex gap-3\">\n                                            <div className=\"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 shrink-0\">\n                                                <UserCircle size={24} weight=\"fill\" />\n                                            </div>\n                                            <div className=\"bg-slate-50 p-3 rounded-2xl rounded-tl-none text-sm\">\n                                                <div className=\"flex justify-between items-baseline mb-1 gap-2\">\n                                                    <span className=\"font-bold text-slate-900\">{comment.userName}</span>\n                                                    <span className=\"text-[10px] text-slate-400\">{comment.date}</span>\n                                                </div>\n                                                <p className=\"text-slate-600\">{comment.content}</p>\n                                            </div>\n                                        </div>\n                                    )) : (\n                                        <div className=\"text-center py-6 text-slate-400 text-sm\">Sé el primero en comentar.</div>\n                                    )}\n                                    <div ref={commentsEndRef} />\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                {/* Footer Actions & Input */}\n                <div className=\"p-4 border-t border-slate-100 bg-white z-20 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]\">\n                    {showComments ? (\n                        <form onSubmit={handleSendComment} className=\"flex gap-2 items-centeranimate-slideUp\">\n                            <input\n                                autoFocus\n                                value={newComment}\n                                onChange={e => setNewComment(e.target.value)}\n                                placeholder=\"Escribe un comentario...\"\n                                className=\"flex-1 bg-slate-50 border border-slate-200 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 ring-blue-500/20\"\n                            />\n                            <button\n                                type=\"button\" // Toggle back to actions\n                                onClick={() => setShowComments(false)}\n                                className=\"p-2 text-slate-400 hover:text-slate-600\"\n                            >\n                                <X />\n                            </button>\n                            <button\n                                type=\"submit\"\n                                disabled={!newComment.trim()}\n                                className=\"w-10 h-10 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white rounded-full flex items-center justify-center transition-colors shadow-lg shadow-blue-500/20\"\n                            >\n                                <PaperPlaneRight weight=\"fill\" />\n                            </button>\n                        </form>\n                    ) : (\n                        <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-6\">\n                                <button\n                                    onClick={handleLike}\n                                    className={`flex items-center gap-2 transition-colors group ${isLiked ? 'text-red-500' : 'text-slate-600 hover:text-slate-900'}`}\n                                >\n                                    <Heart size={24} weight={isLiked ? \"fill\" : \"regular\"} className={`transition-transform ${isLiked ? 'scale-110' : 'group-hover:scale-110'}`} />\n                                    <span className=\"text-sm font-bold\">{likes}</span>\n                                </button>\n                                <button\n                                    onClick={() => setShowComments(true)}\n                                    className=\"flex items-center gap-2 text-slate-600 hover:text-blue-600 transition-colors group\"\n                                >\n                                    <ChatCircle size={24} className=\"group-hover:scale-110 transition-transform\" />\n                                    <span className=\"text-sm font-bold\">{comments.length}</span>\n                                </button>\n                            </div>\n                            <button className=\"text-sm text-slate-500 hover:text-slate-800 font-medium\">Compartir</button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nfunction renderMedia(post: Post) {\n    switch (post.mediaType) {\n        case 'video':\n            const youtubeEmbed = getYouTubeEmbedUrl(post.mediaUrl || '');\n            return (\n                <div className=\"aspect-video bg-black flex items-center justify-center relative w-full\">\n                    {youtubeEmbed ? (\n                        <iframe\n                            src={youtubeEmbed}\n                            title={post.title}\n                            className=\"w-full h-full border-0\"\n                            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                            allowFullScreen\n                        />\n                    ) : (\n                        /* Fallback to image if video fails or just poster */\n                        <video\n                            src={post.mediaUrl}\n                            poster={post.image}\n                            controls\n                            className=\"w-full h-full object-contain\"\n                        />\n                    )}\n                    {!post.mediaUrl && !youtubeEmbed && <div className=\"text-white\">Video no disponible</div>}\n                </div>\n            );\n        case 'audio':\n            return (\n                <div className=\"w-full bg-slate-800 p-8 flex flex-col items-center justify-center gap-4\">\n                    <div className=\"w-16 h-16 rounded-full bg-indigo-500 flex items-center justify-center text-white shadow-lg animate-pulse\">\n                        <SpeakerHigh size={32} weight=\"fill\" />\n                    </div>\n                    <audio src={post.mediaUrl} controls className=\"w-full max-w-md\" />\n                </div>\n            );\n        case 'image':\n            return (\n                <div className=\"max-h-[50vh] w-full bg-black flex items-center justify-center\">\n                    {(post.mediaUrl || post.image) ? (\n                        <img src={post.mediaUrl || post.image} alt={post.title} className=\"max-h-[50vh] w-auto max-w-full object-contain\" />\n                    ) : (\n                        <div className=\"flex flex-col items-center text-slate-500 gap-2\">\n                            <ImageIcon size={48} />\n                            <span className=\"text-sm\">Imagen no disponible</span>\n                        </div>\n                    )}\n                </div>\n            );\n        default: // article\n            if (!post.image) return null;\n            return (\n                <div className=\"h-64 w-full relative\">\n                    <img src={post.image} alt={post.title} className=\"w-full h-full object-cover\" />\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent\"></div>\n                </div>\n            );\n    }\n}\n\nfunction getCategoryColor(cat: string) {\n    switch (cat) {\n        case 'Institucional': return 'bg-blue-100 text-blue-700';\n        case 'Alerta': return 'bg-red-100 text-red-700';\n        case 'Social': return 'bg-pink-100 text-pink-700';\n        default: return 'bg-slate-100 text-slate-600';\n    }\n}\n\nfunction getYouTubeEmbedUrl(url: string) {\n    if (!url) return null;\n    const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n    const match = url.match(regExp);\n\n    if (match && match[2].length === 11) {\n        return `https://www.youtube.com/embed/${match[2]}`;\n    }\n    return null;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/WorkNotesWidget.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useMemo } from 'react';\nimport {\n    Calendar, List, Plus, Trash, Check, PencilSimple,\n    CaretLeft, CaretRight, Bell, Star, DotsThreeVertical,\n    X, CheckCircle, Clock\n} from '@phosphor-icons/react';\nimport { WorkNote, DB, NoteReminder } from '@/lib/data';\nimport { useApp } from '@/context/AppContext';\n\nconst NOTE_COLORS = [\n    { name: 'Azul', value: 'bg-blue-500', border: 'border-blue-100', text: 'text-blue-600', light: 'bg-blue-50' },\n    { name: 'Esmeralda', value: 'bg-emerald-500', border: 'border-emerald-100', text: 'text-emerald-600', light: 'bg-emerald-50' },\n    { name: 'Violeta', value: 'bg-violet-500', border: 'border-violet-100', text: 'text-violet-600', light: 'bg-violet-50' },\n    { name: 'Ámbar', value: 'bg-amber-500', border: 'border-amber-100', text: 'text-amber-600', light: 'bg-amber-50' },\n    { name: 'Rosa', value: 'bg-rose-500', border: 'border-rose-100', text: 'text-rose-600', light: 'bg-rose-50' },\n    { name: 'Slate', value: 'bg-slate-500', border: 'border-slate-100', text: 'text-slate-600', light: 'bg-slate-50' },\n];\n\ninterface WorkNotesWidgetProps {\n    userId: string;\n    tenantId: string;\n}\n\nexport default function WorkNotesWidget({ userId, tenantId }: WorkNotesWidgetProps) {\n    const [viewMode, setViewMode] = useState<'LIST' | 'CALENDAR'>('LIST');\n    const [showAddModal, setShowAddModal] = useState(false);\n    const [editingNote, setEditingNote] = useState<WorkNote | null>(null);\n    const [notes, setNotes] = useState<WorkNote[]>(() =>\n        DB.workNotes.filter(n => n.userId === userId && n.tenantId === tenantId)\n    );\n    const [filter, setFilter] = useState<'ALL' | 'ACTIVE' | 'COMPLETED'>('ACTIVE');\n\n    // Calendar State\n    const [currentMonth, setCurrentMonth] = useState(new Date());\n\n    const filteredNotes = useMemo(() => {\n        return notes.filter(n => {\n            if (filter === 'ALL') return true;\n            return n.status === filter;\n        }).sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n    }, [notes, filter]);\n\n    const handleAddNote = (note: Partial<WorkNote>) => {\n        const newNote: WorkNote = {\n            id: `note-${Date.now()}`,\n            userId,\n            tenantId,\n            title: note.title || '',\n            content: note.content || '',\n            date: note.date || new Date().toISOString().split('T')[0],\n            isImportant: note.isImportant || false,\n            status: 'ACTIVE',\n            pinned: note.pinned || false,\n            reminder: note.reminder,\n            color: note.color || 'bg-blue-500',\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n        };\n        const updatedNotes = [newNote, ...notes];\n        setNotes(updatedNotes);\n        DB.workNotes.unshift(newNote); // Keep mock DB in sync\n        setShowAddModal(false);\n    };\n\n    const handleUpdateNote = (id: string, updates: Partial<WorkNote>) => {\n        const updatedNotes = notes.map(n => n.id === id ? { ...n, ...updates, updatedAt: new Date().toISOString() } : n);\n        setNotes(updatedNotes);\n        // Update Mock DB\n        const dbIdx = DB.workNotes.findIndex(n => n.id === id);\n        if (dbIdx > -1) DB.workNotes[dbIdx] = { ...DB.workNotes[dbIdx], ...updates, updatedAt: new Date().toISOString() };\n        setEditingNote(null);\n    };\n\n    const handleDeleteNote = (id: string) => {\n        if (confirm('¿Estás seguro de eliminar esta nota?')) {\n            const updatedNotes = notes.filter(n => n.id !== id);\n            setNotes(updatedNotes);\n            DB.workNotes = DB.workNotes.filter(n => n.id !== id);\n        }\n    };\n\n    const toggleComplete = (note: WorkNote) => {\n        handleUpdateNote(note.id, { status: note.status === 'ACTIVE' ? 'COMPLETED' : 'ACTIVE' });\n    };\n\n    return (\n        <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-[500px]\">\n            {/* Header */}\n            <div className=\"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50\">\n                <div className=\"flex items-center gap-2\">\n                    <div className=\"p-2 bg-amber-100 text-amber-600 rounded-lg\">\n                        <Star weight=\"fill\" size={20} />\n                    </div>\n                    <div>\n                        <h3 className=\"font-bold text-slate-800 text-sm\">Notas de Trabajo</h3>\n                        <div className=\"flex items-center gap-3 mt-0.5\">\n                            <button\n                                onClick={() => setFilter('ACTIVE')}\n                                className={`text-[10px] font-bold uppercase tracking-wider ${filter === 'ACTIVE' ? 'text-blue-600' : 'text-slate-400 hover:text-slate-600'}`}\n                            >\n                                Activas\n                            </button>\n                            <button\n                                onClick={() => setFilter('COMPLETED')}\n                                className={`text-[10px] font-bold uppercase tracking-wider ${filter === 'COMPLETED' ? 'text-blue-600' : 'text-slate-400 hover:text-slate-600'}`}\n                            >\n                                Completadas\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                    <div className=\"bg-slate-100 p-1 rounded-lg flex items-center\">\n                        <button\n                            onClick={() => setViewMode('LIST')}\n                            className={`p-1.5 rounded-md transition-colors ${viewMode === 'LIST' ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}\n                            title=\"Vista Lista\"\n                        >\n                            <List size={18} weight=\"bold\" />\n                        </button>\n                        <button\n                            onClick={() => setViewMode('CALENDAR')}\n                            className={`p-1.5 rounded-md transition-colors ${viewMode === 'CALENDAR' ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}\n                            title=\"Vista Calendario\"\n                        >\n                            <Calendar size={18} weight=\"bold\" />\n                        </button>\n                    </div>\n                    <button\n                        onClick={() => setShowAddModal(true)}\n                        className=\"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm\"\n                        title=\"Nueva Nota\"\n                    >\n                        <Plus size={20} weight=\"bold\" />\n                    </button>\n                </div>\n            </div>\n\n            {/* Content Area */}\n            <div className=\"flex-1 overflow-y-auto p-4 custom-scrollbar\">\n                {viewMode === 'LIST' ? (\n                    <ListView notes={filteredNotes} onToggleComplete={toggleComplete} onEdit={setEditingNote} onDelete={handleDeleteNote} />\n                ) : (\n                    <CalendarView\n                        notes={notes}\n                        currentMonth={currentMonth}\n                        setCurrentMonth={setCurrentMonth}\n                        onEdit={setEditingNote}\n                    />\n                )}\n            </div>\n\n            {/* Modals */}\n            {showAddModal && (\n                <NoteModal\n                    onClose={() => setShowAddModal(false)}\n                    onSave={(note: Partial<WorkNote>) => handleAddNote(note)}\n                    title=\"Nueva Nota de Trabajo\"\n                />\n            )}\n            {editingNote && (\n                <NoteModal\n                    note={editingNote}\n                    onClose={() => setEditingNote(null)}\n                    onSave={(updates: Partial<WorkNote>) => handleUpdateNote(editingNote.id, updates)}\n                    title=\"Editar Nota\"\n                />\n            )}\n        </div>\n    );\n}\n\n// --- SUB-COMPONENTS ---\n\ninterface ListViewProps {\n    notes: WorkNote[];\n    onToggleComplete: (note: WorkNote) => void;\n    onEdit: (note: WorkNote) => void;\n    onDelete: (id: string) => void;\n}\n\nfunction ListView({ notes, onToggleComplete, onEdit, onDelete }: ListViewProps) {\n    if (notes.length === 0) {\n        return (\n            <div className=\"flex flex-col items-center justify-center h-full text-slate-400 space-y-2 py-10\">\n                <Clock size={48} weight=\"thin\" />\n                <p className=\"text-sm\">No hay notas que mostrar.</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-3\">\n            {notes.map((note: WorkNote) => (\n                <div\n                    key={note.id}\n                    className={`p-3 rounded-xl border transition-all group ${(() => {\n                        const colorObj = NOTE_COLORS.find(c => c.value === note.color) || NOTE_COLORS[0];\n                        return note.isImportant ? 'bg-amber-50 border-amber-200 shadow-md ring-2 ring-amber-200' : `${colorObj.light} ${colorObj.border} hover:shadow-md`;\n                    })()}`}\n                >\n                    <div className=\"flex gap-3\">\n                        <button\n                            onClick={() => onToggleComplete(note)}\n                            className={`mt-0.5 shrink-0 w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${note.status === 'COMPLETED'\n                                ? 'bg-emerald-500 border-emerald-500 text-white'\n                                : 'border-slate-300 text-transparent hover:border-emerald-500'\n                                }`}\n                        >\n                            <Check size={12} weight=\"bold\" />\n                        </button>\n                        <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center justify-between gap-2 mb-1\">\n                                <span className=\"text-[10px] font-bold text-slate-400 uppercase\">\n                                    {new Date(note.date || note.createdAt).toLocaleDateString('es-ES', { day: 'numeric', month: 'short' })}\n                                </span>\n                                <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                                    <button onClick={() => onEdit(note)} className=\"p-1 text-slate-400 hover:text-blue-600 transition-colors\">\n                                        <PencilSimple size={14} />\n                                    </button>\n                                    <button onClick={() => onDelete(note.id)} className=\"p-1 text-slate-400 hover:text-red-500 transition-colors\">\n                                        <Trash size={14} />\n                                    </button>\n                                </div>\n                            </div>\n                            <p className={`text-sm text-slate-700 leading-relaxed ${note.status === 'COMPLETED' ? 'line-through opacity-50' : ''}`}>\n                                {note.content}\n                            </p>\n                            {note.reminder && (\n                                <div className=\"mt-2 flex items-center gap-1.5 text-[10px] font-medium text-blue-600 bg-blue-50 w-fit px-2 py-0.5 rounded-full\">\n                                    <Bell size={12} weight=\"fill\" />\n                                    {new Date(note.reminder.date).toLocaleString('es-ES', { hour: '2-digit', minute: '2-digit' })}\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            ))}\n        </div>\n    );\n}\n\ninterface CalendarViewProps {\n    notes: WorkNote[];\n    currentMonth: Date;\n    setCurrentMonth: (date: Date) => void;\n    onEdit: (note: WorkNote) => void;\n}\n\nfunction CalendarView({ notes, currentMonth, setCurrentMonth, onEdit }: CalendarViewProps) {\n    const daysInMonth = (month: number, year: number) => new Date(year, month + 1, 0).getDate();\n    const firstDayOfMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), 1).getDay();\n\n    const monthName = currentMonth.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' });\n    const days = [];\n    const totalDays = daysInMonth(currentMonth.getMonth(), currentMonth.getFullYear());\n\n    // Padding for first day\n    for (let i = 0; i < firstDayOfMonth; i++) {\n        days.push(<div key={`pad-${i}`} className=\"h-14 border-b border-r border-slate-50 bg-slate-50/20\" />);\n    }\n\n    for (let d = 1; d <= totalDays; d++) {\n        const dateStr = `${currentMonth.getFullYear()}-${String(currentMonth.getMonth() + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;\n        const dayNotes = notes.filter((n: WorkNote) => n.date === dateStr);\n        const isToday = new Date().toISOString().split('T')[0] === dateStr;\n\n        days.push(\n            <div key={d} className={`h-14 border-b border-r border-slate-100 p-1 relative hover:bg-slate-50 transition-colors group ${isToday ? 'bg-blue-50/30' : ''}`}>\n                <span className={`text-[10px] font-bold ${isToday ? 'text-blue-600' : 'text-slate-400'}`}>{d}</span>\n                <div className=\"flex flex-wrap gap-0.5 mt-0.5 overflow-hidden\">\n                    {dayNotes.map((n: WorkNote) => (\n                        <button\n                            key={n.id}\n                            onClick={() => onEdit(n)}\n                            className={`w-full h-1.5 rounded-full transition-all ${n.color || (n.isImportant ? 'bg-amber-400' : 'bg-blue-400')\n                                } ${n.status === 'COMPLETED' ? 'opacity-30' : 'hover:scale-y-150'}`}\n                            title={n.content}\n                        />\n                    ))}\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"h-full flex flex-col\">\n            <div className=\"flex items-center justify-between mb-4\">\n                <h4 className=\"text-xs font-bold text-slate-600 uppercase tracking-widest\">{monthName}</h4>\n                <div className=\"flex gap-1\">\n                    <button onClick={() => setCurrentMonth(new Date(currentMonth.setMonth(currentMonth.getMonth() - 1)))} className=\"p-1 hover:bg-slate-100 rounded\">\n                        <CaretLeft size={16} />\n                    </button>\n                    <button onClick={() => setCurrentMonth(new Date(currentMonth.setMonth(currentMonth.getMonth() + 1)))} className=\"p-1 hover:bg-slate-100 rounded\">\n                        <CaretRight size={16} />\n                    </button>\n                </div>\n            </div>\n            <div className=\"grid grid-cols-7 border-t border-l border-slate-100 flex-1\">\n                {['D', 'L', 'M', 'M', 'J', 'V', 'S'].map(day => (\n                    <div key={day} className=\"py-2 text-center text-[10px] font-bold text-slate-400 border-b border-r border-slate-100 bg-slate-50\">\n                        {day}\n                    </div>\n                ))}\n                {days}\n            </div>\n        </div>\n    );\n}\n\ninterface NoteModalProps {\n    note?: WorkNote;\n    onClose: () => void;\n    onSave: (note: Partial<WorkNote>) => void;\n    title: string;\n}\n\nfunction NoteModal({ note, onClose, onSave, title }: NoteModalProps) {\n    const [content, setContent] = useState(note?.content || '');\n    const [date, setDate] = useState(note?.date || new Date().toISOString().split('T')[0]);\n    const [isImportant, setIsImportant] = useState(note?.isImportant || false);\n    const [hasReminder, setHasReminder] = useState(!!note?.reminder);\n    const [reminderTime, setReminderTime] = useState(() => {\n        if (note?.reminder) {\n            return new Date(note.reminder.date).toISOString().slice(0, 16);\n        }\n        return new Date().toISOString().slice(0, 16);\n    });\n    const [reminderChannel, setReminderChannel] = useState<'internal' | 'email' | 'both'>(note?.reminder?.channel || 'internal');\n    const [color, setColor] = useState(note?.color || NOTE_COLORS[0].value);\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!content.trim()) return;\n\n        const reminder: NoteReminder | undefined = hasReminder ? {\n            date: new Date(reminderTime).toISOString(),\n            channel: reminderChannel,\n            sent: false\n        } : undefined;\n\n        onSave({ content, date, isImportant, reminder, color });\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-fadeIn\">\n            <div className=\"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-slideUp\">\n                <div className=\"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50\">\n                    <h3 className=\"font-bold text-slate-800\">{title}</h3>\n                    <button onClick={onClose} className=\"p-2 text-slate-400 hover:text-slate-600 transition-colors\">\n                        <X size={20} weight=\"bold\" />\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-5\">\n                    <div>\n                        <label className=\"block text-xs font-bold text-slate-500 uppercase mb-2\">Contenido de la Nota</label>\n                        <textarea\n                            autoFocus\n                            className=\"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all\"\n                            rows={4}\n                            maxLength={500}\n                            placeholder=\"¿Qué tienes pendiente?\"\n                            value={content}\n                            onChange={(e) => setContent(e.target.value)}\n                        />\n                        <div className=\"flex justify-end mt-1\">\n                            <span className={`text-[10px] font-medium ${content.length > 450 ? 'text-amber-600' : 'text-slate-400'}`}>\n                                {content.length}/500\n                            </span>\n                        </div>\n                    </div>\n\n                    <div>\n                        <label className=\"block text-xs font-bold text-slate-500 uppercase mb-3 text-center\">Color Categoría</label>\n                        <div className=\"flex justify-center gap-3\">\n                            {NOTE_COLORS.map(c => (\n                                <button\n                                    key={c.value}\n                                    type=\"button\"\n                                    onClick={() => setColor(c.value)}\n                                    className={`w-8 h-8 rounded-full transition-all flex items-center justify-center ${c.value} ${color === c.value ? 'ring-4 ring-offset-2 ring-slate-300 scale-110' : 'hover:scale-110'}`}\n                                >\n                                    {color === c.value && <Check size={14} className=\"text-white\" weight=\"bold\" />}\n                                </button>\n                            ))}\n                        </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <div>\n                            <label className=\"block text-xs font-bold text-slate-500 uppercase mb-2\">Fecha</label>\n                            <input\n                                type=\"date\"\n                                className=\"w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none focus:ring-2 focus:ring-blue-500\"\n                                value={date}\n                                onChange={(e) => setDate(e.target.value)}\n                            />\n                        </div>\n                        <div className=\"flex items-end pb-1\">\n                            <label className=\"flex items-center gap-2 cursor-pointer group\">\n                                <input\n                                    type=\"checkbox\"\n                                    className=\"hidden\"\n                                    checked={isImportant}\n                                    onChange={(e) => setIsImportant(e.target.checked)}\n                                />\n                                <div className={`w-10 h-6 rounded-full relative transition-colors ${isImportant ? 'bg-amber-400' : 'bg-slate-200'}`}>\n                                    <div className={`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${isImportant ? 'left-5 shadow-sm' : 'left-1'}`} />\n                                </div>\n                                <span className=\"text-xs font-bold text-slate-600 uppercase\">Importante</span>\n                            </label>\n                        </div>\n                    </div>\n\n                    <div className=\"p-4 bg-blue-50/50 rounded-xl border border-blue-100\">\n                        <label className=\"flex items-center gap-2 cursor-pointer mb-3\">\n                            <input\n                                type=\"checkbox\"\n                                className=\"hidden\"\n                                checked={hasReminder}\n                                onChange={(e) => setHasReminder(e.target.checked)}\n                            />\n                            <div className={`w-9 h-5 rounded-full relative transition-colors ${hasReminder ? 'bg-blue-500' : 'bg-slate-300'}`}>\n                                <div className={`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-all ${hasReminder ? 'left-4.5 shadow-sm' : 'left-0.5'}`} />\n                            </div>\n                            <span className=\"text-xs font-bold text-slate-700 uppercase flex items-center gap-2\">\n                                <Bell weight={hasReminder ? 'fill' : 'bold'} /> Recordatorio\n                            </span>\n                        </label>\n\n                        {hasReminder && (\n                            <div className=\"space-y-3 pl-1 animate-fadeIn\">\n                                <div>\n                                    <input\n                                        type=\"datetime-local\"\n                                        className=\"w-full p-2 bg-white border border-blue-200 rounded text-xs outline-none focus:ring-1 focus:ring-blue-500\"\n                                        value={reminderTime}\n                                        onChange={(e) => setReminderTime(e.target.value)}\n                                    />\n                                </div>\n                                <div className=\"flex gap-2\">\n                                    {(['internal', 'email', 'both'] as const).map(ch => (\n                                        <button\n                                            key={ch}\n                                            type=\"button\"\n                                            onClick={() => setReminderChannel(ch)}\n                                            className={`flex-1 py-1 rounded text-[10px] font-bold uppercase transition-all ${reminderChannel === ch\n                                                ? 'bg-blue-600 text-white shadow-sm'\n                                                : 'bg-white text-blue-600 border border-blue-200 hover:bg-blue-50'\n                                                }`}\n                                        >\n                                            {ch === 'both' ? 'Ambos' : ch === 'internal' ? 'Interno' : 'Email'}\n                                        </button>\n                                    ))}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    <div className=\"flex gap-3 pt-2\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-100 rounded-xl transition-colors\"\n                        >\n                            Cancelar\n                        </button>\n                        <button\n                            type=\"submit\"\n                            disabled={!content.trim()}\n                            className=\"flex-1 py-3 bg-blue-600 text-white text-sm font-bold rounded-xl hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 disabled:opacity-50 disabled:shadow-none\"\n                        >\n                            Guardar Nota\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1760, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useApp } from '@/context/AppContext';\nimport { DB, Post, Tenant, User, PlatformAuditEvent } from '@/lib/data';\nimport { useMemo, useState, useEffect } from 'react';\nimport {\n    Lightning, Newspaper, Briefcase, CheckCircle,\n    Plus, FileText, ArrowRight, Clock, Folder,\n    FilePdf, FileVideo, FileImage, Link as LinkIcon, SpeakerHigh, Play, Kanban,\n    Buildings, Users, Database, ChartLineUp, ShieldCheck, WarningCircle\n} from '@phosphor-icons/react';\nimport Link from 'next/link';\nimport PostViewerModal from '@/components/PostViewerModal';\nimport WorkNotesWidget from '@/components/WorkNotesWidget';\nimport { useRouter } from 'next/navigation';\n\nexport default function DashboardPage() {\n    const { currentUser, currentTenant, isSuperAdmin } = useApp();\n    const router = useRouter();\n\n    useEffect(() => {\n        // Tenant User Redirection Logic if Dashboard disabled\n        if (currentTenant && !currentTenant.features?.includes('DASHBOARD') && !isSuperAdmin) {\n            const feats = currentTenant.features || [];\n            if (feats.includes('WORKFLOWS')) router.push('/dashboard/workflows');\n            else if (feats.includes('REPOSITORY')) router.push('/dashboard/repository');\n            else if (feats.includes('CHAT')) router.push('/dashboard/chat');\n            else if (feats.includes('ANALYTICS')) router.push('/dashboard/analytics');\n        }\n    }, [currentTenant, isSuperAdmin, router]);\n\n    if (!currentUser) return <div className=\"p-8\">Cargando...</div>;\n\n    // --- SUPER ADMIN DASHBOARD ---\n    if (isSuperAdmin) {\n        return <GlobalDashboard />;\n    }\n\n    // --- TENANT USER DASHBOARD ---\n\n    // Don't render content if redirecting (basic protection)\n    if (currentTenant && !currentTenant.features?.includes('DASHBOARD')) return null;\n\n    return <TenantDashboard />;\n}\n\n// ==========================================\n// SUPER ADMIN DASHBOARD COMPONENT\n// ==========================================\nfunction GlobalDashboard() {\n    // Calculate Metrics\n    const metrics = useMemo(() => {\n        const totalTenants = DB.tenants.length;\n        const activeTenants = DB.tenants.filter(t => t.status === 'ACTIVE').length;\n        const totalUsers = DB.users.length;\n        const recentAudit = DB.platformAudit.slice(0, 5);\n        const recentTenants = [...DB.tenants].sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime()).slice(0, 5);\n\n        // Mock Storage Calculation (parse \"10 GB\", \"500 MB\" etc if needed, simplified here)\n        const storageUsed = \"1.2 TB\"; // Mocked for aggregator\n\n        return { totalTenants, activeTenants, totalUsers, recentAudit, recentTenants, storageUsed };\n    }, []);\n\n    return (\n        <div className=\"max-w-7xl mx-auto p-6 animate-fadeIn space-y-8\">\n            {/* Header */}\n            <div className=\"flex justify-between items-end\">\n                <div>\n                    <h1 className=\"text-2xl font-bold text-slate-900\">Vista Global del Sistema</h1>\n                    <p className=\"text-slate-500\">Monitoreo en tiempo real de toda la plataforma SaaS.</p>\n                </div>\n                <div className=\"flex items-center gap-2 text-sm font-medium text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full border border-emerald-100\">\n                    <div className=\"w-2 h-2 rounded-full bg-emerald-500 animate-pulse\"></div>\n                    Sistema Operativo\n                </div>\n            </div>\n\n            {/* KPI Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                <StatCard\n                    title=\"Tenants Activos\"\n                    value={`${metrics.activeTenants}/${metrics.totalTenants}`}\n                    icon={Buildings}\n                    color=\"text-blue-600\"\n                    bg=\"bg-blue-50\"\n                    trend=\"+2 este mes\"\n                />\n                <StatCard\n                    title=\"Usuarios Totales\"\n                    value={metrics.totalUsers}\n                    icon={Users}\n                    color=\"text-purple-600\"\n                    bg=\"bg-purple-50\"\n                    trend=\"+12% vs mes anterior\"\n                />\n                <StatCard\n                    title=\"Almacenamiento\"\n                    value={metrics.storageUsed}\n                    icon={Database}\n                    color=\"text-orange-600\"\n                    bg=\"bg-orange-50\"\n                    trend=\"65% de capacidad\"\n                />\n                <StatCard\n                    title=\"Uptime (SLA)\"\n                    value=\"99.98%\"\n                    icon={ChartLineUp}\n                    color=\"text-emerald-600\"\n                    bg=\"bg-emerald-50\"\n                    trend=\"Últimos 30 días\"\n                />\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                {/* Recent Tenants */}\n                <div className=\"lg:col-span-2 space-y-6\">\n                    <div className=\"flex justify-between items-center\">\n                        <h2 className=\"text-lg font-bold text-slate-800 flex items-center gap-2\">\n                            <Buildings className=\"text-indigo-600\" weight=\"duotone\" /> Nuevos Tenants\n                        </h2>\n                        <Link href=\"/dashboard/tenants\" className=\"text-sm font-medium text-blue-600 hover:underline\">Gestionar Todos</Link>\n                    </div>\n                    <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\">\n                        <table className=\"w-full text-left text-sm\">\n                            <thead className=\"bg-slate-50 border-b border-slate-200 text-slate-500 text-xs uppercase font-semibold\">\n                                <tr>\n                                    <th className=\"px-6 py-3\">Empresa</th>\n                                    <th className=\"px-6 py-3\">Plan / Sector</th>\n                                    <th className=\"px-6 py-3\">Estado</th>\n                                    <th className=\"px-6 py-3 text-right\">Fecha Registro</th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"divide-y divide-slate-100\">\n                                {metrics.recentTenants.map(t => (\n                                    <tr key={t.id} className=\"hover:bg-slate-50 transition-colors\">\n                                        <td className=\"px-6 py-3 font-medium text-slate-900\">{t.name}</td>\n                                        <td className=\"px-6 py-3 text-slate-500\">{t.sector || 'N/A'}</td>\n                                        <td className=\"px-6 py-3\">\n                                            <span className={`inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-bold ${t.status === 'ACTIVE' ? 'bg-green-100 text-green-700' : 'bg-slate-100 text-slate-600'}`}>\n                                                {t.status}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-3 text-right text-slate-500 text-xs\">\n                                            {new Date(t.created_at).toLocaleDateString()}\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n\n                {/* Audit Logs Quick View */}\n                <div className=\"space-y-6\">\n                    <div className=\"flex justify-between items-center\">\n                        <h2 className=\"text-lg font-bold text-slate-800 flex items-center gap-2\">\n                            <ShieldCheck className=\"text-slate-600\" weight=\"duotone\" /> Auditoría Reciente\n                        </h2>\n                        <Link href=\"/dashboard/audit\" className=\"text-sm font-medium text-blue-600 hover:underline\">Ver Logs</Link>\n                    </div>\n                    <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 p-4 space-y-4\">\n                        {metrics.recentAudit.length === 0 ? (\n                            <div className=\"text-center py-8 text-slate-400 text-sm\">Sin actividad reciente.</div>\n                        ) : (\n                            metrics.recentAudit.map(log => (\n                                <div key={log.id} className=\"flex gap-3 items-start pb-3 border-b border-slate-50 last:border-0 last:pb-0\">\n                                    <div className=\"mt-1\">\n                                        {log.event_type.includes('FAIL') ? (\n                                            <WarningCircle className=\"text-red-500\" size={16} weight=\"fill\" />\n                                        ) : log.event_type.includes('DELETE') ? (\n                                            <WarningCircle className=\"text-orange-500\" size={16} weight=\"fill\" />\n                                        ) : (\n                                            <CheckCircle className=\"text-blue-500\" size={16} weight=\"fill\" />\n                                        )}\n                                    </div>\n                                    <div>\n                                        <p className=\"text-xs font-bold text-slate-700\">{log.event_type}</p>\n                                        <p className=\"text-xs text-slate-500 mt-0.5\">\n                                            <span className=\"font-semibold\">{log.actor_name}</span> &bull; {new Date(log.created_at).toLocaleTimeString()}\n                                        </p>\n                                    </div>\n                                </div>\n                            ))\n                        )}\n                    </div>\n                </div>\n            </div>\n        </div >\n    );\n}\n\nfunction StatCard({ title, value, icon: Icon, color, bg, trend }: any) {\n    return (\n        <div className=\"bg-white p-5 rounded-xl shadow-sm border border-slate-200 flex flex-col justify-between h-32 relative overflow-hidden group hover:shadow-md transition-shadow\">\n            <div className=\"flex justify-between items-start z-10\">\n                <div>\n                    <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1\">{title}</h3>\n                    <div className=\"text-2xl font-bold text-slate-900\">{value}</div>\n                </div>\n                <div className={`p-2 rounded-lg ${bg} ${color}`}>\n                    <Icon size={24} weight=\"fill\" />\n                </div>\n            </div>\n            <div className=\"z-10 mt-auto\">\n                <span className=\"text-xs font-medium text-slate-500 flex items-center gap-1\">\n                    {trend.includes('+') ? <ChartLineUp className=\"text-green-500\" weight=\"bold\" /> : null}\n                    {trend}\n                </span>\n            </div>\n            <Icon size={80} weight=\"fill\" className={`absolute -right-4 -bottom-4 opacity-[0.03] ${color} group-hover:scale-110 transition-transform duration-500`} />\n        </div>\n    );\n}\n\n\n// ==========================================\n// TENANT DASHBOARD COMPONENT (Original)\n// ==========================================\nfunction TenantDashboard() {\n    const { currentUser, currentTenant } = useApp();\n    const [selectedPost, setSelectedPost] = useState<Post | null>(null);\n\n    const feed = useMemo(() => {\n        if (!currentTenant) return [];\n        return DB.posts\n            .filter(p => p.tenantId === currentTenant.id && p.status === 'published')\n            .slice(0, 5);\n    }, [currentTenant]);\n\n    const myCreated = useMemo(() => {\n        if (!currentUser || !currentTenant) return [];\n        return DB.workflowCases.filter(\n            c => c.tenantId === currentTenant.id &&\n                c.creatorId === currentUser.id\n        ).slice(0, 5);\n    }, [currentUser, currentTenant]);\n\n    if (!currentUser || !currentTenant) return null;\n\n    return (\n        <div className=\"max-w-7xl mx-auto p-2 animate-fadeIn relative\">\n            <PostViewerModal post={selectedPost} onClose={() => setSelectedPost(null)} />\n\n            {/* Header */}\n            <div className=\"mb-8 p-6 bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl text-white shadow-lg\">\n                <div className=\"flex justify-between items-end\">\n                    <div>\n                        <h1 className=\"text-3xl font-bold mb-2\">Hola, {currentUser.name.split(' ')[0]} 👋</h1>\n                        <p className=\"opacity-90 text-sm md:text-base\">Bienvenido a tu centro de trabajo en {currentTenant.name}. Aquí tienes lo más relevante para hoy.</p>\n                    </div>\n                    <div className=\"hidden md:block opacity-80\">\n                        <span className=\"text-xs font-mono uppercase tracking-widest\">{new Date().toLocaleDateString('es-ES', { weekday: 'long', day: 'numeric', month: 'long' })}</span>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                {/* Left Column (Feed & Actions) */}\n                <div className=\"lg:col-span-2 space-y-8\">\n\n                    {/* Quick Access */}\n                    <section>\n                        <h2 className=\"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                            <Lightning className=\"text-amber-500\" weight=\"fill\" /> Accesos Rápidos\n                        </h2>\n                        <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-4\">\n                            <ActionCard icon={Folder} label=\"Repositorio\" color=\"text-purple-600\" bg=\"bg-purple-50\" href=\"/dashboard/repository\" />\n                            <ActionCard icon={Kanban} label=\"Mis Workflows\" color=\"text-emerald-600\" bg=\"bg-emerald-50\" href=\"/dashboard/workflows\" />\n                        </div>\n                    </section>\n\n                    {/* News Feed */}\n                    <section>\n                        <h2 className=\"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                            <Newspaper className=\"text-blue-600\" weight=\"fill\" /> Noticias Institucionales\n                        </h2>\n                        <div className=\"space-y-4\">\n                            {feed.length > 0 ? feed.map(post => (\n                                <div\n                                    key={post.id}\n                                    onClick={() => setSelectedPost(post)}\n                                    className=\"bg-white p-5 rounded-xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow group cursor-pointer\"\n                                >\n                                    <div className=\"flex gap-4\">\n                                        <div className=\"w-24 h-24 shrink-0 rounded-lg overflow-hidden bg-slate-200 relative border border-slate-100\">\n                                            {post.mediaType === 'video' ? (\n                                                <div className=\"w-full h-full bg-slate-900 group-hover:bg-slate-800 transition-colors flex items-center justify-center relative overflow-hidden\">\n                                                    {post.image && <img src={post.image} className=\"absolute inset-0 w-full h-full object-cover opacity-60\" alt=\"Video thumbnail\" />}\n                                                    <div className=\"w-8 h-8 rounded-full bg-white/20 backdrop-blur border border-white/30 flex items-center justify-center text-white relative z-10 shadow-lg\">\n                                                        <Play weight=\"fill\" size={14} className=\"translate-x-0.5\" />\n                                                    </div>\n                                                </div>\n                                            ) : post.mediaType === 'audio' ? (\n                                                <div className=\"w-full h-full bg-indigo-50 group-hover:bg-indigo-100 transition-colors flex items-center justify-center\">\n                                                    <SpeakerHigh weight=\"duotone\" size={28} className=\"text-indigo-500\" />\n                                                </div>\n                                            ) : post.image ? (\n                                                <img src={post.image} alt=\"\" className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\" />\n                                            ) : (\n                                                <div className=\"w-full h-full flex items-center justify-center bg-slate-100 text-slate-300\">\n                                                    <Newspaper size={32} />\n                                                </div>\n                                            )}\n                                        </div>\n                                        <div className=\"flex-1\">\n                                            <div className=\"flex items-center gap-2 mb-1\">\n                                                <span className={`text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider ${getCategoryColor(post.category)}`}>\n                                                    {post.category}\n                                                </span>\n                                                <span className=\"text-xs text-slate-400 font-medium flex items-center gap-1\">\n                                                    <Clock size={12} /> {post.date}\n                                                </span>\n                                            </div>\n                                            <h3 className=\"font-bold text-slate-800 mb-1 group-hover:text-blue-600 transition-colors line-clamp-1\">{post.title}</h3>\n                                            <p className=\"text-sm text-slate-500 line-clamp-2\">{post.excerpt}</p>\n                                        </div>\n                                    </div>\n                                </div>\n                            )) : (\n                                <EmptyState text=\"No hay noticias recientes.\" />\n                            )}\n                        </div>\n                    </section>\n                </div>\n\n                {/* Right Column (My Work & Notes) */}\n                <div className=\"space-y-8\">\n                    {/* Work Notes Widget */}\n                    <WorkNotesWidget userId={currentUser.id} tenantId={currentTenant.id} />\n\n                    {/* Created by Me */}\n                    <section>\n                        <div className=\"flex justify-between items-center mb-4\">\n                            <h2 className=\"text-lg font-bold text-slate-800 flex items-center gap-2\">\n                                <Kanban className=\"text-emerald-600\" weight=\"fill\" /> Mis Workflows\n                            </h2>\n                            <Link href=\"/dashboard/workflows\" className=\"text-xs font-semibold text-blue-600 hover:underline\">Ver todo</Link>\n                        </div>\n                        <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 divide-y divide-slate-100\">\n                            {myCreated.length > 0 ? myCreated.map(c => (\n                                <div key={c.id} className=\"p-4 hover:bg-slate-50 transition-colors\">\n                                    <div className=\"flex justify-between items-start mb-1\">\n                                        <span className={`text-[10px] font-bold px-1.5 py-0.5 rounded border ${getStatusColor(c.status)}`}>\n                                            {c.status}\n                                        </span>\n                                        <span className=\"text-[10px] text-slate-400\">{c.id}</span>\n                                    </div>\n                                    <h4 className=\"font-semibold text-sm text-slate-800 mb-0.5 line-clamp-2\">{c.title}</h4>\n                                </div>\n                            )) : (\n                                <EmptyState text=\"No has creado solicitudes.\" compact />\n                            )}\n                        </div>\n                    </section>\n                </div>\n            </div>\n        </div>\n    );\n}\n\n// Helpers\nfunction ActionCard({ icon: Icon, label, color, bg, href }: any) {\n    return (\n        <Link href={href} className={`${bg} p-4 rounded-xl border border-transparent hover:border-slate-200 hover:shadow-md transition-all flex flex-col items-center justify-center gap-3 text-center group h-28`}>\n            <Icon size={32} weight=\"fill\" className={`${color} group-hover:scale-110 transition-transform`} />\n            <span className=\"text-xs font-bold text-slate-700\">{label}</span>\n        </Link>\n    );\n}\n\nfunction EmptyState({ text, compact }: { text: string, compact?: boolean }) {\n    return (\n        <div className={`text-center ${compact ? 'py-8' : 'py-12'} text-slate-400 bg-slate-50/50 rounded-xl border border-dashed border-slate-200`}>\n            <p className=\"text-sm\">{text}</p>\n        </div>\n    );\n}\n\nfunction getCategoryColor(cat: string) {\n    switch (cat) {\n        case 'Institucional': return 'bg-blue-100 text-blue-700';\n        case 'Alerta': return 'bg-red-100 text-red-700';\n        case 'Social': return 'bg-pink-100 text-pink-700';\n        default: return 'bg-slate-100 text-slate-600';\n    }\n}\n\nfunction getStatusColor(status: string) {\n    if (status === 'IN_PROGRESS' || status === 'En Proceso') return 'bg-blue-50 text-blue-700 border-blue-100';\n    if (status === 'REVIEW' || status === 'Pendiente') return 'bg-amber-50 text-amber-700 border-amber-100';\n    if (status === 'APPROVED' || status === 'Aprobado') return 'bg-emerald-50 text-emerald-700 border-emerald-100';\n    if (status === 'REJECTED' || status === 'Rechazado') return 'bg-rose-50 text-rose-700 border-rose-100';\n    if (status === 'CLOSED' || status === 'Cerrado') return 'bg-slate-50 text-slate-500 border-slate-100';\n    if (status === 'RECEIVED') return 'bg-purple-50 text-purple-700 border-purple-100';\n    return 'bg-slate-50 text-slate-600 hover:bg-slate-100';\n}\n\nfunction csvContains(value: string, list: string[]) {\n    return list.some(item => value.includes(item));\n}\n\nfunction getMediaIcon(type: string) {\n    switch (type) {\n        case 'video': return <FileVideo weight=\"fill\" />;\n        case 'audio': return <SpeakerHigh weight=\"fill\" />;\n        case 'image': return <FileImage weight=\"fill\" />;\n        default: return <FileText weight=\"fill\" />;\n    }\n}\n"],"names":[],"mappings":"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"}}]
}